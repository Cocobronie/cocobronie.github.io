{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/anzhiyu/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/512.png","path":"img/512.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/algolia.svg","path":"img/algolia.svg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/archive_img.jpg","path":"img/archive_img.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/card.ico","path":"img/card.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/comment_bg.png","path":"img/comment_bg.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/default_cover.jpg","path":"img/default_cover.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/default_top_img.jpg","path":"img/default_top_img.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/green.svg","path":"img/green.svg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/index_img.jpg","path":"img/index_img.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/nfc.ico","path":"img/nfc.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/loading.gif","path":"img/loading.gif","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/paycode.png","path":"img/paycode.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/red.svg","path":"img/red.svg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/resume.ico","path":"img/resume.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/weather.ico","path":"img/weather.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/16.png","path":"img/siteicon/16.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/32.png","path":"img/siteicon/32.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/apple-icon-180.png","path":"img/siteicon/apple-icon-180.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-192.maskable.png","path":"img/siteicon/manifest-icon-192.maskable.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-512.maskable.png","path":"img/siteicon/manifest-icon-512.maskable.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg","path":"images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg","path":"images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg","path":"images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Untitled 1-1685249325027-13.png","path":"images/CardSpending/Untitled 1-1685249325027-13.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Untitled 15-1685252038490-19.png","path":"images/CardSpending/Untitled 15-1685252038490-19.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Untitled 17-1685252073223-23.png","path":"images/CardSpending/Untitled 17-1685252073223-23.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Untitled 16-1685252055780-21.png","path":"images/CardSpending/Untitled 16-1685252055780-21.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Untitled 2-1685249399313-17.png","path":"images/CardSpending/Untitled 2-1685249399313-17.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/Untitled-1685249374298-15.png","path":"images/CardSpending/Untitled-1685249374298-15.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/image-20230528133143833.png","path":"images/CardSpending/image-20230528133143833.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/image-20230528133216623.png","path":"images/CardSpending/image-20230528133216623.png","modified":0,"renderable":0},{"_id":"source/images/GitNote/branches-delete.png","path":"images/GitNote/branches-delete.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/image-20230528133239391.png","path":"images/CardSpending/image-20230528133239391.png","modified":0,"renderable":0},{"_id":"source/images/CardSpending/image-20230528133300931.png","path":"images/CardSpending/image-20230528133300931.png","modified":0,"renderable":0},{"_id":"source/images/GitNote/image-20230528093749248.png","path":"images/GitNote/image-20230528093749248.png","modified":0,"renderable":0},{"_id":"source/images/GitNote/image-20230528094312668.png","path":"images/GitNote/image-20230528094312668.png","modified":0,"renderable":0},{"_id":"source/images/OAuth/OIP-C.y3Ld0-_6IbLOaiE2-hlXZAHaFUw=233&h=180&c=7&r=0&o=5&dpr=1.5&pid=1.jpeg","path":"images/OAuth/OIP-C.y3Ld0-_6IbLOaiE2-hlXZAHaFUw=233&h=180&c=7&r=0&o=5&dpr=1.5&pid=1.jpeg","modified":0,"renderable":0},{"_id":"source/images/OAuth/bg2015092302.jpg","path":"images/OAuth/bg2015092302.jpg","modified":0,"renderable":0},{"_id":"source/images/OAuth/bg2019042101.jpg","path":"images/OAuth/bg2019042101.jpg","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/23-05-28-11-33-28.mp4","path":"images/WeatherBroadcast/23-05-28-11-33-28.mp4","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/Untitled 1.png","path":"images/WeatherBroadcast/Untitled 1.png","modified":0,"renderable":0},{"_id":"source/images/GitNote/image-20230528101552880.png","path":"images/GitNote/image-20230528101552880.png","modified":0,"renderable":0},{"_id":"source/images/GitNote/image-20230528100012067.png","path":"images/GitNote/image-20230528100012067.png","modified":0,"renderable":0},{"_id":"source/images/GitNote/image-20230528095326943.png","path":"images/GitNote/image-20230528095326943.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/Untitled 6.png","path":"images/WeatherBroadcast/Untitled 6.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/Untitled 2.png","path":"images/WeatherBroadcast/Untitled 2.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/Untitled 7.png","path":"images/WeatherBroadcast/Untitled 7.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/Untitled 8.png","path":"images/WeatherBroadcast/Untitled 8.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/Untitled 9.png","path":"images/WeatherBroadcast/Untitled 9.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528110917512.png","path":"images/WeatherBroadcast/image-20230528110917512.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528111026749.png","path":"images/WeatherBroadcast/image-20230528111026749.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528111218099.png","path":"images/WeatherBroadcast/image-20230528111218099.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112110529.png","path":"images/WeatherBroadcast/image-20230528112110529.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112048700.png","path":"images/WeatherBroadcast/image-20230528112048700.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112239798.png","path":"images/WeatherBroadcast/image-20230528112239798.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112305880.png","path":"images/WeatherBroadcast/image-20230528112305880.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112329509.png","path":"images/WeatherBroadcast/image-20230528112329509.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112345108.png","path":"images/WeatherBroadcast/image-20230528112345108.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112408350.png","path":"images/WeatherBroadcast/image-20230528112408350.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112458417.png","path":"images/WeatherBroadcast/image-20230528112458417.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112524704.png","path":"images/WeatherBroadcast/image-20230528112524704.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/2023-05-26_152705.png","path":"images/hexoConfigNote/2023-05-26_152705.png","modified":0,"renderable":0},{"_id":"source/images/WeatherBroadcast/image-20230528112547986.png","path":"images/WeatherBroadcast/image-20230528112547986.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png","path":"images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192310164.png","path":"images/hexoConfigNote/image-20230526192310164.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192457800.png","path":"images/hexoConfigNote/image-20230526192457800.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192517508.png","path":"images/hexoConfigNote/image-20230526192517508.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192535335.png","path":"images/hexoConfigNote/image-20230526192535335.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192611019.png","path":"images/hexoConfigNote/image-20230526192611019.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192735406.png","path":"images/hexoConfigNote/image-20230526192735406.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192715672.png","path":"images/hexoConfigNote/image-20230526192715672.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526193046611.png","path":"images/hexoConfigNote/image-20230526193046611.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526192827373.png","path":"images/hexoConfigNote/image-20230526192827373.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214207511.png","path":"images/hexoConfigNote/image-20230526214207511.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214721316.png","path":"images/hexoConfigNote/image-20230526214721316.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214734538.png","path":"images/hexoConfigNote/image-20230526214734538.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214745972.png","path":"images/hexoConfigNote/image-20230526214745972.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214802166.png","path":"images/hexoConfigNote/image-20230526214802166.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214839842.png","path":"images/hexoConfigNote/image-20230526214839842.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214857770.png","path":"images/hexoConfigNote/image-20230526214857770.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214910920.png","path":"images/hexoConfigNote/image-20230526214910920.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214924274.png","path":"images/hexoConfigNote/image-20230526214924274.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214939187.png","path":"images/hexoConfigNote/image-20230526214939187.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526214948330.png","path":"images/hexoConfigNote/image-20230526214948330.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526215016301.png","path":"images/hexoConfigNote/image-20230526215016301.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526215101219.png","path":"images/hexoConfigNote/image-20230526215101219.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230526215415503.png","path":"images/hexoConfigNote/image-20230526215415503.png","modified":0,"renderable":0},{"_id":"source/images/dumiNote/image-20230528191439024.png","path":"images/dumiNote/image-20230528191439024.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/image-20230527173207803.png","path":"images/hexoConfigNote/image-20230527173207803.png","modified":0,"renderable":0},{"_id":"source/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp","path":"images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp","modified":0,"renderable":0},{"_id":"source/images/dumiNote/image-20230528191442525.png","path":"images/dumiNote/image-20230528191442525.png","modified":0,"renderable":0},{"_id":"source/images/dumiNote/image-20230528203012828.png","path":"images/dumiNote/image-20230528203012828.png","modified":0,"renderable":0},{"_id":"source/images/myNFC/88162883639770466-1685255179109-3.jpg","path":"images/myNFC/88162883639770466-1685255179109-3.jpg","modified":0,"renderable":0},{"_id":"source/images/myNFC/Untitled-1685255140308-1.png","path":"images/myNFC/Untitled-1685255140308-1.png","modified":0,"renderable":0},{"_id":"source/images/myNFC/image-20230528141821319.png","path":"images/myNFC/image-20230528141821319.png","modified":0,"renderable":0},{"_id":"source/images/myNFC/video.mp4","path":"images/myNFC/video.mp4","modified":0,"renderable":0},{"_id":"source/images/myNFC/image-20230528141851384.png","path":"images/myNFC/image-20230528141851384.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/2023-05-30_093958.png","path":"images/vitepressNote/2023-05-30_093958.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/2023-05-30_094604.png","path":"images/vitepressNote/2023-05-30_094604.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/2023-05-30_135506.png","path":"images/vitepressNote/2023-05-30_135506.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530084302643.png","path":"images/vitepressNote/image-20230530084302643.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530084634717.png","path":"images/vitepressNote/image-20230530084634717.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530084747612.png","path":"images/vitepressNote/image-20230530084747612.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530084853480.png","path":"images/vitepressNote/image-20230530084853480.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530105441661.png","path":"images/vitepressNote/image-20230530105441661.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530090814042.png","path":"images/vitepressNote/image-20230530090814042.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530140144181.png","path":"images/vitepressNote/image-20230530140144181.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530135914934.png","path":"images/vitepressNote/image-20230530135914934.png","modified":0,"renderable":0},{"_id":"source/images/vitepressNote/image-20230530140358622.png","path":"images/vitepressNote/image-20230530140358622.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"2b858a135a845cc6c10494a03c84d79a7cf38172","modified":1685000900737},{"_id":"source/_data/creativity.yml","hash":"a21abaaabd7a21c48f83e5c713ce94aa015e2520","modified":1685097041462},{"_id":"source/_posts/CardSpending.md","hash":"06626369d10342fb4c36bdb898cef63d9d96dfff","modified":1686130702455},{"_id":"source/_posts/100things.md","hash":"a26bea31272bdad3133f3059d56d5302920b6cdd","modified":1687094356508},{"_id":"source/_posts/GitNote.md","hash":"5967f91f2fc0156ae1e5550032a35c853a199b7f","modified":1686130746126},{"_id":"source/_posts/TreasureinLife.md","hash":"f5ac24c3d368acff9fa568b96db75a0afdc7732c","modified":1687093841237},{"_id":"source/_posts/WeatherBroadcast.md","hash":"1368e0f83b5a5bd01d78f6a837c5080d2b1ea88c","modified":1686130797036},{"_id":"source/_posts/dumiNote.md","hash":"01cffbd2d3fad6a9b1bfb6c0d030555d9ec476ff","modified":1686130712094},{"_id":"source/_posts/myNFC.md","hash":"757b71339ecfc8485588d0a57df634a4fb6d2d06","modified":1686130763407},{"_id":"source/_posts/vitepressNote.md","hash":"a9a349325fd1dc290718dd9795d15463790e86ac","modified":1686130778517},{"_id":"source/_posts/hexoConfigNote.md","hash":"c253192308a5e9edb30132890fcf25f45b34d740","modified":1687095477368},{"_id":"source/tags/index.md","hash":"04de7d7b14f82d664879eb2fb18916f8a2afe19a","modified":1687095078909},{"_id":"source/categories/index.md","hash":"8c6a12ef6d13ab3d379d63894120563b7e029c40","modified":1687093382256},{"_id":"source/_posts/GitNote/mycover.jpg","hash":"caa59c7dc0e0e62889469fc9aba86ecae5fa1336","modified":1685247250302},{"_id":"source/_posts/myNFC/mycover.jpg","hash":"15c7297d2f5c5676b43209f105d39eb4b7f757ea","modified":1685255298357},{"_id":"source/images/CardSpending/Untitled 15-1685252038490-19.png","hash":"8f4dee13586b58eb5b3545f7fd816370d6ede61d","modified":1685252038494},{"_id":"source/images/CardSpending/Untitled 16-1685252055780-21.png","hash":"8879040c2759787d3cd8122b344e6f1cf1feb797","modified":1685252055787},{"_id":"source/images/CardSpending/Untitled 2-1685249399313-17.png","hash":"2e50aeea3c52939c5e2fc0a4faeabe8fc4efa281","modified":1685249399319},{"_id":"source/images/GitNote/branches-delete.png","hash":"9ba758a47dde35b155076ddf519cae3d94f817fd","modified":1685240191281},{"_id":"source/images/CardSpending/image-20230528133239391.png","hash":"140cc31e45165539c83392001b7dfcaf06ca71cf","modified":1685251959432},{"_id":"source/images/CardSpending/image-20230528133143833.png","hash":"70d0d8524060869322bf7f339e25c82d00e943ca","modified":1685251903875},{"_id":"source/images/CardSpending/image-20230528133216623.png","hash":"647b91d57a58e14e72517300e425c0cb1b5e8ef8","modified":1685251936638},{"_id":"source/images/CardSpending/image-20230528133300931.png","hash":"751adc137228a27271d33f96502d7ffca329aaf5","modified":1685251980985},{"_id":"source/images/GitNote/image-20230528093749248.png","hash":"1c4e81e0f6cb7c46ee599db4790dd87604275f5b","modified":1685237869263},{"_id":"source/images/OAuth/bg2015092302.jpg","hash":"1e8211083201e6836a919557e306d59c478f9249","modified":1685164150136},{"_id":"source/images/OAuth/OIP-C.y3Ld0-_6IbLOaiE2-hlXZAHaFUw=233&h=180&c=7&r=0&o=5&dpr=1.5&pid=1.jpeg","hash":"9ecbb4e9c2135434ab0fddfb38f3fc162f367e10","modified":1685159270992},{"_id":"source/images/GitNote/image-20230528094312668.png","hash":"c9d70dbfa55cd181f44d69309aa04291c214c7c9","modified":1685238192681},{"_id":"source/images/OAuth/bg2019042101.jpg","hash":"499c4234e5c959c290f14d5a3d4dd27272199049","modified":1685159221487},{"_id":"source/images/WeatherBroadcast/Untitled 1.png","hash":"c032ec35f505a727feb18923020062137682a6ec","modified":1685243470122},{"_id":"source/images/GitNote/image-20230528101552880.png","hash":"bf7d2fa76d5b5beb6e873ed2446e0bc85ddbd1d0","modified":1685240152885},{"_id":"source/images/WeatherBroadcast/Untitled 6.png","hash":"2e1ea208a6a9a7572b05910ef039c7ef491222b4","modified":1685243470122},{"_id":"source/images/GitNote/image-20230528100012067.png","hash":"ad7c4d355c821dd65eff5ac217fb0dcb3da68f18","modified":1685239212117},{"_id":"source/images/WeatherBroadcast/Untitled 2.png","hash":"6da76d72aaa8ddfedeb35b81846a3c867e2e40c4","modified":1685243470121},{"_id":"source/images/GitNote/image-20230528095326943.png","hash":"cb6210c235337b35946553be5e583995200591a8","modified":1685238806964},{"_id":"source/images/WeatherBroadcast/Untitled 7.png","hash":"9b285d68bb268fd44c1db91acdd412441925457b","modified":1685243470122},{"_id":"source/images/WeatherBroadcast/Untitled 9.png","hash":"55edf54e6dfc6e106510674d30e4dbf9acf53330","modified":1685243470122},{"_id":"source/images/WeatherBroadcast/image-20230528112305880.png","hash":"47eb8fd88d3d700969561d831ae2b9e0fb751b85","modified":1685244185893},{"_id":"source/images/hexoConfigNote/image-20230526192457800.png","hash":"6b41d6217fa15dcb30ae442196b0c3c624765646","modified":1685100297814},{"_id":"source/images/hexoConfigNote/image-20230526192535335.png","hash":"c428486fe8e06cf7b84d7b412b0f7681db8c3dcc","modified":1685100335341},{"_id":"source/images/hexoConfigNote/image-20230526192611019.png","hash":"7602e1a8e17444ca3274c081341d0707314ac470","modified":1685100371041},{"_id":"source/images/hexoConfigNote/image-20230526192735406.png","hash":"cabdf51edb3faaf7570a4c9fc3771c25164a1b7c","modified":1685100455493},{"_id":"source/images/hexoConfigNote/image-20230526192827373.png","hash":"edf630c9c74141fe4bda4f165037d02fe3d51aac","modified":1685100507460},{"_id":"source/images/hexoConfigNote/image-20230526214721316.png","hash":"e99516680608a74a030cc75d31c16e4fc28701a8","modified":1685108841340},{"_id":"source/images/hexoConfigNote/image-20230526214734538.png","hash":"0e80661dd59e840e9142ebefefa78a8b339630ed","modified":1685108854548},{"_id":"source/images/hexoConfigNote/image-20230526214745972.png","hash":"b1f498d57f634c2fa91b14cc6abdc2d36d62a067","modified":1685108865996},{"_id":"source/images/hexoConfigNote/image-20230526214802166.png","hash":"0beeacaa08f40c454e4e8896bbe513da5700a6db","modified":1685108882176},{"_id":"source/images/hexoConfigNote/image-20230526214839842.png","hash":"dc129c9654b313870120b09d49add17cac25a8f5","modified":1685108919861},{"_id":"source/images/hexoConfigNote/image-20230526214857770.png","hash":"500e8cf3aeee61944145c728cc5530301bbcdfd4","modified":1685108937801},{"_id":"source/images/hexoConfigNote/image-20230526214924274.png","hash":"2c6f93696ae76336215792575d41b0d8b6ed934e","modified":1685108964302},{"_id":"source/images/hexoConfigNote/image-20230526214939187.png","hash":"99526ea8ef3c62affded5cc629f96569e44422a1","modified":1685108979191},{"_id":"source/images/hexoConfigNote/image-20230526214948330.png","hash":"88a0d372d8e8442966649c4c67896d3d3926a22a","modified":1685108988350},{"_id":"source/images/hexoConfigNote/image-20230526215016301.png","hash":"fc89860e30d8b332c72cc07ae59e9d626b90d3f6","modified":1685109016351},{"_id":"source/images/hexoConfigNote/image-20230526215415503.png","hash":"ebe2139e654fef821cfb19c95bf80143fc04cd70","modified":1685109255550},{"_id":"source/images/dumiNote/image-20230528191439024.png","hash":"6af4311548781f85f17b140ca03e0c6738b6d57e","modified":1685272479049},{"_id":"source/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp","hash":"0643bade99647974038faac5e6c9fc8d98030f7c","modified":1685108759531},{"_id":"source/images/dumiNote/image-20230528191442525.png","hash":"6af4311548781f85f17b140ca03e0c6738b6d57e","modified":1685272482582},{"_id":"source/images/dumiNote/image-20230528203012828.png","hash":"2776bf2f0aedb68ec003c04b1d6ecffda97057c9","modified":1685277013004},{"_id":"source/images/myNFC/88162883639770466-1685255179109-3.jpg","hash":"c5dfe1a99bb164647a47536a53ca153656f5c4ae","modified":1685255179113},{"_id":"source/images/myNFC/Untitled-1685255140308-1.png","hash":"78674f35f022f03b72c595f1c19c0c9d009b8a50","modified":1685255140315},{"_id":"source/images/myNFC/image-20230528141821319.png","hash":"46a226b98ae935fcb6d4e65eabe5559ae045e104","modified":1685254701339},{"_id":"source/images/vitepressNote/image-20230530084634717.png","hash":"d3ff2a656d1e746688a1bb4b406a2f7d414dd33e","modified":1685407594781},{"_id":"source/images/vitepressNote/2023-05-30_135506.png","hash":"fce02dfa61e7787805093385dbf1c1cc6c774c8f","modified":1685426201300},{"_id":"source/images/vitepressNote/image-20230530084302643.png","hash":"c0fda4daf04f87e1d77ce496d9c3bd19342c5d99","modified":1685407382650},{"_id":"source/images/vitepressNote/image-20230530084747612.png","hash":"638e37079f9d2526055f949ca98ddea3fcec78f7","modified":1685407667664},{"_id":"source/images/vitepressNote/image-20230530084853480.png","hash":"3857660ad4a3eaf40f2f602d899527d8647d92cb","modified":1685407733531},{"_id":"source/images/vitepressNote/image-20230530140144181.png","hash":"d1092e9363ff6b30c27259463b449c2cf4c11933","modified":1685426504223},{"_id":"source/_posts/100things/mycover.jpg","hash":"761afeded3f7f14d9d253a5aad5df6d3191c552a","modified":1687094118567},{"_id":"source/_posts/WeatherBroadcast/mycover.png","hash":"5efb3811575bf74e4ab93d441d6c25321f6a63a3","modified":1685247073794},{"_id":"source/images/CardSpending/Untitled 17-1685252073223-23.png","hash":"ca14f250219b657a90a67366b524f7e8ffc1c0de","modified":1685254043282},{"_id":"source/images/WeatherBroadcast/Untitled 8.png","hash":"fef7a64a12dae1c458a43b38aa567c202505f746","modified":1685243470125},{"_id":"source/images/WeatherBroadcast/image-20230528111218099.png","hash":"00bbf81b49ab19f9b1c290e856733e312be47da2","modified":1685243538134},{"_id":"source/images/WeatherBroadcast/image-20230528112110529.png","hash":"0e2149233e2e8b48667ea29f500e029f6899d47c","modified":1685244070567},{"_id":"source/images/WeatherBroadcast/image-20230528112048700.png","hash":"f606433892290c9e2708280ac1e4886d392dbadf","modified":1685244048740},{"_id":"source/images/WeatherBroadcast/image-20230528112329509.png","hash":"00bbf81b49ab19f9b1c290e856733e312be47da2","modified":1685244209563},{"_id":"source/images/WeatherBroadcast/image-20230528112345108.png","hash":"00bbf81b49ab19f9b1c290e856733e312be47da2","modified":1685244225150},{"_id":"source/images/WeatherBroadcast/image-20230528112408350.png","hash":"3134a08450ce472d91f71d40e80184f11ce971cf","modified":1685244248396},{"_id":"source/images/WeatherBroadcast/image-20230528112547986.png","hash":"7419529110dbedca7ce8095ea174e3c7d06b1eb4","modified":1685244348010},{"_id":"source/images/hexoConfigNote/image-20230526192310164.png","hash":"1aa0576ee763c1d63a413394a3e829cb3c52caaa","modified":1685100190208},{"_id":"source/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png","hash":"98b3883abc66ffb05f3721c2e6e67e089f7fa018","modified":1685181414903},{"_id":"source/images/hexoConfigNote/image-20230526193046611.png","hash":"7f40061ba88bcb68964644f26ab0f7f74ab91da4","modified":1685100646657},{"_id":"source/images/hexoConfigNote/image-20230526192715672.png","hash":"1a932df5887687d34205882a174ebc8a3bdb5721","modified":1685100435733},{"_id":"source/images/hexoConfigNote/image-20230526214207511.png","hash":"da2fb493e2f32e82e9032cfb41b4ae27ba368eef","modified":1685108527546},{"_id":"source/images/hexoConfigNote/image-20230526215101219.png","hash":"de0e8b5f54660f475f1440f399d8e15bdf3524b8","modified":1685109061264},{"_id":"source/images/hexoConfigNote/image-20230527173207803.png","hash":"cfbe7a3840373761093bee954dea66500feb5cd6","modified":1685179927869},{"_id":"source/images/myNFC/image-20230528141851384.png","hash":"8f4a2dec569d1ff68eb3b647d3fa1c24f789367f","modified":1685254731425},{"_id":"source/images/vitepressNote/2023-05-30_093958.png","hash":"1f312dc815e8f2c387b483c8ee5a9313325b29e6","modified":1685411088158},{"_id":"source/images/vitepressNote/image-20230530105441661.png","hash":"e26eba9080e20060859b8cc617ca97e23f26239f","modified":1685415281769},{"_id":"source/images/vitepressNote/image-20230530135914934.png","hash":"116ab459224aff7c8c79c8b89d5e9ed8444a5cc2","modified":1685426354965},{"_id":"source/_posts/MyIndex/mycover.png","hash":"857e736ea97bcf48da8b8676dde9f2285efaa0e9","modified":1685370407838},{"_id":"source/_posts/hexoConfigNote/mytop_img.png","hash":"4eb479ae912433a0bb0447f1c32db5dd87a1ec85","modified":1685110288990},{"_id":"source/images/WeatherBroadcast/image-20230528110917512.png","hash":"841e66c2925d91c18ddf669a2f69be37cc134c6c","modified":1685243470127},{"_id":"source/images/WeatherBroadcast/image-20230528112458417.png","hash":"eb1c7201b6c64ac70a5d7fd0ad33cfaea3ab0560","modified":1685244298472},{"_id":"source/images/hexoConfigNote/image-20230526192517508.png","hash":"448a4ce2d7c697c233f7b18000f7123784046a21","modified":1685100317553},{"_id":"source/images/vitepressNote/image-20230530140358622.png","hash":"a996120b04ad25bc8dcad5b1107a869eda69b027","modified":1685426638818},{"_id":"source/images/WeatherBroadcast/image-20230528111026749.png","hash":"d83e57c744d4cd70df854e089e183e1621cb0887","modified":1685243470130},{"_id":"source/images/WeatherBroadcast/image-20230528112239798.png","hash":"dd75578b3d2330292028044ad6d27931b8a756eb","modified":1685244159904},{"_id":"source/images/WeatherBroadcast/image-20230528112524704.png","hash":"a54283ce2dbcc154024ae2ea9fd935e314272efe","modified":1685244324825},{"_id":"source/images/vitepressNote/2023-05-30_094604.png","hash":"c99ae0d52cd572e69f0ad1bc46dbb538bf84c65d","modified":1685411524062},{"_id":"source/_posts/CardSpending/mycover.png","hash":"0469b27a0e737e62a7444dadfb537a0faf9e6e06","modified":1685252370155},{"_id":"source/_posts/hexoConfigNote/mycover.png","hash":"687dffa9a63f5614fbb96623ca3ef6d4431b21f6","modified":1685109991153},{"_id":"source/images/CardSpending/Untitled 1-1685249325027-13.png","hash":"0469b27a0e737e62a7444dadfb537a0faf9e6e06","modified":1685249325033},{"_id":"source/images/CardSpending/Untitled-1685249374298-15.png","hash":"5cd89b259e6b09e266125e3fb152cf25487580d2","modified":1685249374304},{"_id":"source/_posts/dumiNote/mycover.png","hash":"d146f5ffdfeb7f93bf8c272c51dd5935edd6af16","modified":1686130563502},{"_id":"source/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg","hash":"f092939b78d717598fd73b64021f1aa8bf10aeaa","modified":1685249291923},{"_id":"themes/anzhiyu/README.md","hash":"1aa2e7e0121bea976ccc0f16917d0a84a32dabb9","modified":1685077880141},{"_id":"themes/anzhiyu/LICENSE","hash":"c8bc7df08db9dd3b39c2c2259a163a36cf2f6808","modified":1685077880140},{"_id":"themes/anzhiyu/.gitignore","hash":"17b9594db1006e57f76e109924db33e54f0f2d87","modified":1685077880140},{"_id":"themes/anzhiyu/README_EN.md","hash":"9b57ba843e4d4ef4edfe180b2b7c37bcab734321","modified":1685077880141},{"_id":"themes/anzhiyu/languages/en.yml","hash":"519c38b91e7cbbfc3d2aa557cb2fc7913d68f303","modified":1685077880142},{"_id":"themes/anzhiyu/plugins.yml","hash":"64b88c4e07428068af5dd39d0e58f1faf3fd2d36","modified":1685077880185},{"_id":"themes/anzhiyu/languages/default.yml","hash":"d5f3bfb6663088108322cf8cef9c64fbd8f297f3","modified":1685077880142},{"_id":"themes/anzhiyu/package.json","hash":"6e7a77c2ffad5b2d5015ea693324e96d0cf68fac","modified":1685077880184},{"_id":"themes/anzhiyu/layout/archive.pug","hash":"1c1e1dec24f8ee1d731e4b246697597a56a68b5d","modified":1685077880144},{"_id":"themes/anzhiyu/languages/zh-TW.yml","hash":"66cf1cbb44a0306376b4edb37abf1bb47a9542b5","modified":1685077880144},{"_id":"themes/anzhiyu/languages/zh-CN.yml","hash":"5ecb538ba8040af28c90872fd151fb366096dacd","modified":1685077880143},{"_id":"themes/anzhiyu/layout/category.pug","hash":"3028789225ac853000b7a84aa3a0715afd7bfb0a","modified":1685077880144},{"_id":"themes/anzhiyu/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"1c50c14dd6b66ab636a8852e9b967c40671f1200","modified":1685077880138},{"_id":"themes/anzhiyu/layout/index.pug","hash":"818aeebcd24466aade30e632ee5275f92e73baea","modified":1685077880183},{"_id":"themes/anzhiyu/layout/page.pug","hash":"2f169ca0662db2ae8dcdfbeb8cdb34b65efb011c","modified":1685077880183},{"_id":"themes/anzhiyu/layout/post.pug","hash":"9d8147f7c7cc8a141bc11a16a046db9f9942c19a","modified":1685077880183},{"_id":"themes/anzhiyu/layout/tag.pug","hash":"fe81f8e8193dae2db7693e5464d4746704bbecdf","modified":1685077880184},{"_id":"themes/anzhiyu/.github/ISSUE_TEMPLATE/config.yml","hash":"03363537fc04f148d98d092237969299950991ff","modified":1685077880138},{"_id":"themes/anzhiyu/layout/includes/404.pug","hash":"799817011e194e6b1fc9ccb5530f5d96d59cfcc0","modified":1685077880144},{"_id":"themes/anzhiyu/.github/workflows/publish.yml","hash":"e320b40c051bae1549156cd5ea4a51383cf78598","modified":1685077880139},{"_id":"themes/anzhiyu/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"0aaafd614172a6ca77a9b41fd3e81e885e8cfec7","modified":1685077880139},{"_id":"themes/anzhiyu/layout/includes/additional-js.pug","hash":"b5bea6350c13720c7a6a40ff14a1cbaffde7593f","modified":1685077880144},{"_id":"themes/anzhiyu/.github/workflows/stale.yml","hash":"4040c76547e270aaf184e9b219a44ca41bbb1b9f","modified":1685077880140},{"_id":"themes/anzhiyu/layout/includes/categoryGroup.pug","hash":"e08a308acca100cec2ccc086b9c2cff047582fda","modified":1685077880151},{"_id":"themes/anzhiyu/layout/includes/bbTimeList.pug","hash":"7221213fc26e71598acdd15d4ccfac2f615fe7c9","modified":1685077880150},{"_id":"themes/anzhiyu/layout/includes/head.pug","hash":"b60de789dd1609425a8ac43c17f388caedfdf79f","modified":1685077880151},{"_id":"themes/anzhiyu/layout/includes/music.pug","hash":"e23f52be79726a310de3a73eb6f7a854815bbc4d","modified":1685077880158},{"_id":"themes/anzhiyu/layout/includes/footer.pug","hash":"3c2a794418ba68a28871bafe6ff113df370a21ec","modified":1685077880151},{"_id":"themes/anzhiyu/layout/includes/layout.pug","hash":"cd8b243ec0852773528f4d6a0ae1f0f35cf56190","modified":1685077880156},{"_id":"themes/anzhiyu/layout/includes/pagination.pug","hash":"9e43911b63efcb3e0ef2cf096cc186a801ad56c4","modified":1685077880162},{"_id":"themes/anzhiyu/layout/includes/rightside.pug","hash":"72235b40310a8b2babdffa3a42334fc8b75aabf9","modified":1685077880164},{"_id":"themes/anzhiyu/source/css/index.styl","hash":"33398f3102dde8cde6655d9fd5ddde431c7e8be7","modified":1685077880240},{"_id":"themes/anzhiyu/source/css/var.styl","hash":"3af301c2f9447731980d1c50071b178f4717ce13","modified":1685077880240},{"_id":"themes/anzhiyu/layout/includes/sidebar.pug","hash":"5c3bcf31a73f878caf21617cf2a14eb95c5321a0","modified":1685077880164},{"_id":"themes/anzhiyu/layout/includes/shortcutKey.pug","hash":"83c51f80f4183b9f73907d958d928b9e57ad4375","modified":1685077880164},{"_id":"themes/anzhiyu/source/img/512.png","hash":"6988b23a31304d9de45b95a1e7c05dd42024e560","modified":1685077880243},{"_id":"themes/anzhiyu/source/img/archive_img.jpg","hash":"486da5427d0ba0bf9622b831512fe6f6e6cea3f9","modified":1685096592578},{"_id":"themes/anzhiyu/source/img/algolia.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1685077880243},{"_id":"themes/anzhiyu/source/img/comment_bg.png","hash":"91612a887446fb436e9151981e2289f2a426a3e5","modified":1685077880244},{"_id":"themes/anzhiyu/source/img/card.ico","hash":"1230d7ffd6de4c3eb4a6066a93b400f162593e84","modified":1685258227004},{"_id":"themes/anzhiyu/source/img/avatar.jpg","hash":"453097d7a71689555f8b8620d7b61c9f0f825c8e","modified":1685006049536},{"_id":"themes/anzhiyu/source/img/default_cover.jpg","hash":"19a2b44fb81175ef6a18d6f3db140801cfb579b2","modified":1685096323172},{"_id":"themes/anzhiyu/source/img/favicon.ico","hash":"7d00042dea184d93bde4bc81c3a5c20a86d2899e","modified":1685005952140},{"_id":"themes/anzhiyu/source/img/green.svg","hash":"d23ae259ad961518e831adf7a2caa2b24fb682f0","modified":1685092545246},{"_id":"themes/anzhiyu/source/img/index_img.jpg","hash":"054569cc9327c32f76ed3a84f383559eaf79fe7b","modified":1685096675871},{"_id":"themes/anzhiyu/source/img/nfc.ico","hash":"2fa18b05b22b54e3adcc7588737bd99da87670c0","modified":1685258468114},{"_id":"themes/anzhiyu/source/img/red.svg","hash":"f66fbc2326a77da78c2f5991981e375237463cb3","modified":1685092407022},{"_id":"themes/anzhiyu/source/img/weather.ico","hash":"7740d3a5410374460fd59f146d0791f4b6fba3a9","modified":1685246233213},{"_id":"themes/anzhiyu/source/img/paycode.png","hash":"e45a943d5304e44fb997eff325412ac07366e039","modified":1685089254811},{"_id":"themes/anzhiyu/source/img/resume.ico","hash":"ef0868be47a9cd98498d6aee4f56d4a780507de2","modified":1685258381841},{"_id":"themes/anzhiyu/scripts/events/404.js","hash":"f1d1c378356b776e9b2a8411e6dca88dc8c3245c","modified":1685077880186},{"_id":"themes/anzhiyu/source/js/tw_cn.js","hash":"bf7d18a5df7be67e8dbb2dfaf249545ef317a47f","modified":1685077880261},{"_id":"themes/anzhiyu/scripts/events/cdn.js","hash":"e7013d5bc954b9d0cadd4000c72088066bc50fdb","modified":1685077880186},{"_id":"themes/anzhiyu/source/js/main.js","hash":"63e3fa79d2e1abd475cdf990ab6929818f19ccdc","modified":1685077880259},{"_id":"themes/anzhiyu/source/js/utils.js","hash":"b9067f8b08f68e52e84bf351d779abe1e7b4b2f4","modified":1685077880261},{"_id":"themes/anzhiyu/scripts/events/comment.js","hash":"176332aa4d01728d0bd084e9b02c60167dc307dd","modified":1685077880186},{"_id":"themes/anzhiyu/scripts/events/init.js","hash":"404b1200a3be17dbc14ccbb293aa17389d3a834b","modified":1685077880187},{"_id":"themes/anzhiyu/scripts/filters/random_cover.js","hash":"6c3b7d0874fa499800a4fd49894c481b05ec750c","modified":1685077880188},{"_id":"themes/anzhiyu/scripts/filters/post_lazyload.js","hash":"a5c5692043d525f6ee21134139c5ab4a37750035","modified":1685077880188},{"_id":"themes/anzhiyu/scripts/helpers/aside_archives.js","hash":"7c6a4a980da7b2b6ae23672b01ec8b05c9b42c8c","modified":1685077880188},{"_id":"themes/anzhiyu/scripts/events/stylus.js","hash":"218add7e9b39b6fb6e69921abb9e44891a6cc3ce","modified":1685077880187},{"_id":"themes/anzhiyu/scripts/events/welcome.js","hash":"6c3f69381c11fdb651684bcc04c077bcff892a2f","modified":1685077880187},{"_id":"themes/anzhiyu/scripts/helpers/aside_categories.js","hash":"b23cceb19532edf2a3bd1ea322613a22ec05c3ca","modified":1685077880189},{"_id":"themes/anzhiyu/scripts/helpers/findArchiveLength.js","hash":"db4f5971c27f49a4cb47d34729f4ddf9919d392b","modified":1685077880189},{"_id":"themes/anzhiyu/scripts/helpers/get_version.js","hash":"799ae97c1368c395649444b9e5a71f9074852522","modified":1685077880189},{"_id":"themes/anzhiyu/scripts/helpers/catalog_list.js","hash":"f2ba64e35ee507ecbcaa4a3516ea95f1f7abefac","modified":1685077880189},{"_id":"themes/anzhiyu/scripts/helpers/random.js","hash":"a645a95b6f927d167b8af66bb7ae52c92a5acc23","modified":1685077880190},{"_id":"themes/anzhiyu/scripts/helpers/page.js","hash":"5722b2167891af9ad22957f69e339b0f592777cf","modified":1685077880190},{"_id":"themes/anzhiyu/scripts/helpers/inject_head_js.js","hash":"fc67b0b9b9aee801bf20fa9b398c566a2749cfb1","modified":1685077880190},{"_id":"themes/anzhiyu/scripts/helpers/year.js","hash":"94f15ddba7d29cdcc4dd52ed6c35c9c29cc19d37","modified":1685077880192},{"_id":"themes/anzhiyu/scripts/helpers/related_post.js","hash":"b6960063129984f1c6760e21c8215a4739fdbac5","modified":1685077880191},{"_id":"themes/anzhiyu/scripts/tag/btns.js","hash":"b5e7a6f87a5c131f65e6db342c1d24dddd0fe515","modified":1685077880192},{"_id":"themes/anzhiyu/scripts/helpers/tags_page_list.js","hash":"00d1e1d35622a1e944b8b074696db60bfbb87ded","modified":1685077880192},{"_id":"themes/anzhiyu/scripts/helpers/sort_attr_post.js","hash":"1cf55b611e4342f5a0c0e26bf69cf2a401cdcfff","modified":1685077880192},{"_id":"themes/anzhiyu/scripts/tag/button.js","hash":"8f6d382ea394bef44da90cdf197dd2e207d5c7db","modified":1685077880192},{"_id":"themes/anzhiyu/scripts/tag/checkbox.js","hash":"636cef0f4500a14b123c6b21187fb67989472cbd","modified":1685077880193},{"_id":"themes/anzhiyu/scripts/tag/dogeplayer.js","hash":"7b2972e55f7faaa68f492e791ee827dd21aafeb7","modified":1685077880193},{"_id":"themes/anzhiyu/scripts/tag/folding.js","hash":"93f56903a307b4ce54963b40050fbb9aeb5baf47","modified":1685077880193},{"_id":"themes/anzhiyu/scripts/tag/flink.js","hash":"2896117872232b470a3b49ee044355d3e4abd4b1","modified":1685077880193},{"_id":"themes/anzhiyu/scripts/tag/iconfont.js","hash":"ea983f7c8dd060ed411044df1c10aa6b72dec34f","modified":1685077880194},{"_id":"themes/anzhiyu/scripts/tag/hide.js","hash":"e01a3967e5884881bab858b11635457df412de80","modified":1685077880194},{"_id":"themes/anzhiyu/scripts/tag/gallery.js","hash":"e4bc5a47e474e258cadf77fbd3e02b70b31a4f34","modified":1685077880194},{"_id":"themes/anzhiyu/scripts/tag/inline-labels.js","hash":"eaaedc3d65384e0beb4306534ef4ed202b46da18","modified":1685077880194},{"_id":"themes/anzhiyu/scripts/tag/inlineImg.js","hash":"7641adb0d520c5ff29dd36fc1fb8617c52ecc9fb","modified":1685077880195},{"_id":"themes/anzhiyu/scripts/tag/label.js","hash":"551f1b8edc973bd8afc5cce2eae546f002fa84c3","modified":1685077880195},{"_id":"themes/anzhiyu/scripts/tag/media.js","hash":"ebe4a6ebe34e8d77c0652c63bd5f763439743eb2","modified":1685077880195},{"_id":"themes/anzhiyu/scripts/tag/link.js","hash":"1e59ee54f389973cbb33cb1516f07c88953c5cc4","modified":1685077880195},{"_id":"themes/anzhiyu/scripts/tag/mermaid.js","hash":"fd683ccc090db3122d77c7ee73e8d35dc8735ee3","modified":1685077880196},{"_id":"themes/anzhiyu/scripts/tag/note.js","hash":"56a5d41487d74654b75305c5325167a116495900","modified":1685077880196},{"_id":"themes/anzhiyu/scripts/tag/site.js","hash":"b085ab9682b8465b1399c60889283d809a91e980","modified":1685077880196},{"_id":"themes/anzhiyu/scripts/tag/span.js","hash":"89aaa0678188aa85ec18116af4b036f80ca7c073","modified":1685077880197},{"_id":"themes/anzhiyu/scripts/tag/tabs.js","hash":"b961a403e9ea5943eef02e0de1c65d6a14f6ef9c","modified":1685077880197},{"_id":"themes/anzhiyu/layout/includes/header/index.pug","hash":"b5ebc8ad984b815e5b7916464d734e30b9da5e18","modified":1685077880155},{"_id":"themes/anzhiyu/scripts/tag/tip.js","hash":"0c2833f461168fa04c23bfd87f1274976d611fc1","modified":1685077880197},{"_id":"themes/anzhiyu/scripts/tag/timeline.js","hash":"4c7056d3cd56f10bd209d2ba4d3cc2027aad1440","modified":1685077880197},{"_id":"themes/anzhiyu/layout/includes/header/post-info.pug","hash":"25654f47db7ed88b7ab9c2c08e8092c44aa8ce40","modified":1685077880155},{"_id":"themes/anzhiyu/layout/includes/head/Open_Graph.pug","hash":"63f6386d19b58cd20ccc84764ec9eb78ba4cfd9d","modified":1685077880152},{"_id":"themes/anzhiyu/layout/includes/head/analytics.pug","hash":"c1e45d4d0bd905ddcd2282de4fe89be92e67847d","modified":1685077880152},{"_id":"themes/anzhiyu/layout/includes/header/menu_item.pug","hash":"6f6cca8973a87009137b1572faf1713b99199752","modified":1685077880155},{"_id":"themes/anzhiyu/layout/includes/head/config.pug","hash":"821325e9e7af9a9d923c6465e9e6b2dcbc95c99d","modified":1685077880152},{"_id":"themes/anzhiyu/layout/includes/header/nav.pug","hash":"31ec439b30218c93da13c6bb44751402b76d4925","modified":1685077880155},{"_id":"themes/anzhiyu/layout/includes/header/social.pug","hash":"7e9ee70012fdef99e80aa92fb301e27900a8ec6b","modified":1685077880156},{"_id":"themes/anzhiyu/layout/includes/head/config_site.pug","hash":"bd5dd5452e28a4fe94c3241a758ec6f4fdb7a149","modified":1685077880153},{"_id":"themes/anzhiyu/layout/includes/head/site_verification.pug","hash":"5168caadc4cf541f5d6676a9c5e8ae47a948f9ad","modified":1685077880155},{"_id":"themes/anzhiyu/layout/includes/head/noscript.pug","hash":"72efaa09ff60843567458bd54152e06f0cb2757e","modified":1685077880154},{"_id":"themes/anzhiyu/layout/includes/head/google_adsense.pug","hash":"f29123e603cbbcc6ce277d4e8f600ba67498077c","modified":1685077880153},{"_id":"themes/anzhiyu/layout/includes/head/preconnect.pug","hash":"2a68294c958a8c938c032f8331862f58cf3f9672","modified":1685077880154},{"_id":"themes/anzhiyu/layout/includes/head/pwa.pug","hash":"6eaa145bade42e0b55287200c098368bcebbe4d5","modified":1685077880154},{"_id":"themes/anzhiyu/layout/includes/bili-banner/index.pug","hash":"e3954ae43a708a560894fb28a21ac369a5b2d422","modified":1685077880151},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/anzhiyu-js.pug","hash":"9dd4891e1328a817995490f0af4fb5490f5664df","modified":1685077880146},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/about-extra.pug","hash":"1d1a000cef22366543b7cd7e2a49b6ebd315cd14","modified":1685077880145},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/ai-info.pug","hash":"e7cc2d43662a4a6d05da558e3025fa5826e37c13","modified":1685077880145},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/clock.pug","hash":"d3d82975e1a7d33da00519fcee26fed4ad902ab6","modified":1685077880147},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/console.pug","hash":"ba10e9b977b40473731d70643fd456e829eb8277","modified":1685077880148},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/commentBarrage-js.pug","hash":"24e2eb7e30dc3b0d43cfaaa4f58b4afadb456e27","modified":1685077880148},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/log-js.pug","hash":"4a44fc37c6b9ab411a3a836347ed8d6261e3fe94","modified":1685077880148},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/random-friends-post-js.pug","hash":"bbd5c2a7081ec779261ab75a1f8f4ff22f1e1d9f","modified":1685077880148},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/rightmenu-js.pug","hash":"ed3cffa33bf3b035f43d063218bdb5eba00daec7","modified":1685077880149},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/rightmenu.pug","hash":"60a6829fed3cfebf7bdab3475a4c0291a82a678c","modified":1685077880149},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/title-js.pug","hash":"bf70086f15a27fb80509e43906ca577aa8b1df76","modified":1685077880150},{"_id":"themes/anzhiyu/layout/includes/loading/fullpage-loading.pug","hash":"a764336588746938a1acc9271e0f3d2be6e2f6fe","modified":1685077880157},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/tags-group-all.pug","hash":"91cf0e01340b36e909ec4d982779acb20aac4bcd","modified":1685077880149},{"_id":"themes/anzhiyu/layout/includes/loading/pace.pug","hash":"8f25b42cb6c2c07ea609ad69c243bb11463d8b60","modified":1685077880157},{"_id":"themes/anzhiyu/layout/includes/loading/index.pug","hash":"81362a8c82029119d02b33f0f7bed249950040f0","modified":1685077880157},{"_id":"themes/anzhiyu/layout/includes/mixins/article-sort.pug","hash":"184edf9307d86a20a0f873a0a9def03a05747fcb","modified":1685077880158},{"_id":"themes/anzhiyu/layout/includes/mixins/post-ui.pug","hash":"3b5885bb3e2a498cb513655622812088512b622c","modified":1685077880158},{"_id":"themes/anzhiyu/layout/includes/page/about.pug","hash":"37f32d508fa5809d55a5d520e11327e0600f2927","modified":1685077880159},{"_id":"themes/anzhiyu/layout/includes/page/album_detail.pug","hash":"86fa001bad572ee951abc5df82983f97c8fc2cd7","modified":1685077880159},{"_id":"themes/anzhiyu/layout/includes/page/album.pug","hash":"aa55ced62473389e180d1d55b6bbb0fee5ae1589","modified":1685077880159},{"_id":"themes/anzhiyu/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1685077880159},{"_id":"themes/anzhiyu/layout/includes/page/default-page.pug","hash":"e9459f122af7b733398578f9f0f8ab3c5e12a217","modified":1685077880160},{"_id":"themes/anzhiyu/layout/includes/page/essay.pug","hash":"8ebee45b573d46e7d8bc6fc6ec1df537bb7e0a67","modified":1685077880160},{"_id":"themes/anzhiyu/layout/includes/page/fcircle.pug","hash":"a1a0c8f20b5879d32d491c12a8f75b9c1fbb451f","modified":1685077880160},{"_id":"themes/anzhiyu/layout/includes/page/flink.pug","hash":"6658bc882b50eab9a9e580eca59bcc28cd795b71","modified":1685077880161},{"_id":"themes/anzhiyu/layout/includes/post/post-copyright.pug","hash":"be6ab32b92441360b231be6f0a90aa23c7c59e9c","modified":1685077880163},{"_id":"themes/anzhiyu/layout/includes/page/music.pug","hash":"2cee254ce63d5890e6cabb358b29e0c01275abc3","modified":1685077880161},{"_id":"themes/anzhiyu/layout/includes/page/room.pug","hash":"c509876ab0488cdc3a21f0dcbea01abdcae58a31","modified":1685077880162},{"_id":"themes/anzhiyu/layout/includes/post/reward.pug","hash":"22af38003ab111e6449c029310a32021bb2a00a3","modified":1685077880163},{"_id":"themes/anzhiyu/layout/includes/page/tags.pug","hash":"affa27b6fa972c2868dc7a445342becea43476b9","modified":1685077880162},{"_id":"themes/anzhiyu/layout/includes/post/ptool.pug","hash":"9aea5a86136dcccc7bec8a243edbe7db0bb9823c","modified":1685077880163},{"_id":"themes/anzhiyu/layout/includes/widget/card_ad.pug","hash":"a8312b527493dabbadbb1280760168d3bc909a3b","modified":1685077880178},{"_id":"themes/anzhiyu/layout/includes/widget/card_archives.pug","hash":"aea77a8644328f08b79f18d3b43702b0d8eb853c","modified":1685077880179},{"_id":"themes/anzhiyu/layout/includes/widget/card_announcement.pug","hash":"ac60c45ae916120aab1e5c5039444029042eb3a4","modified":1685077880178},{"_id":"themes/anzhiyu/layout/includes/widget/card_author.pug","hash":"1ca32da4d77809fcc82d51266d3c104d1c6eeaa1","modified":1685077880179},{"_id":"themes/anzhiyu/layout/includes/widget/card_bottom_self.pug","hash":"1dba77d250eeebfb6e293d504352c7e9ea31980b","modified":1685077880179},{"_id":"themes/anzhiyu/layout/includes/widget/card_newest_comment.pug","hash":"88e756eb4afb8461afdf4ac57b6641e4b9147b75","modified":1685077880179},{"_id":"themes/anzhiyu/layout/includes/widget/card_categories.pug","hash":"66e383b4ef374951eb87dd1bf4cdb7a667193fb5","modified":1685077880179},{"_id":"themes/anzhiyu/layout/includes/widget/card_recent_post.pug","hash":"1740e6ef4e483c108dd6af5808ed7e99c644a4d0","modified":1685077880180},{"_id":"themes/anzhiyu/layout/includes/widget/card_tags.pug","hash":"b8315b369164ee12c79cd0d1ebc11753e3c26f4d","modified":1685077880181},{"_id":"themes/anzhiyu/layout/includes/widget/card_post_toc.pug","hash":"9c849ba0451a314a1d97016be7b12f04c3ce6444","modified":1685077880180},{"_id":"themes/anzhiyu/layout/includes/widget/card_top_self.pug","hash":"7b5ae404a1205546b7de4be42291315cf918f2b3","modified":1685077880182},{"_id":"themes/anzhiyu/layout/includes/widget/index.pug","hash":"95677f3b4510b68777f42f8c80efd7c423cb63ce","modified":1685077880182},{"_id":"themes/anzhiyu/layout/includes/widget/card_webinfo.pug","hash":"2eb9ec87038f88b55486f394e9b727f195abb9a3","modified":1685077880182},{"_id":"themes/anzhiyu/layout/includes/widget/card_weixin.pug","hash":"7725687c5db4329d989350f2d3e1de72b6e69156","modified":1685077880182},{"_id":"themes/anzhiyu/layout/includes/third-party/aplayer.pug","hash":"e939344fd389aeb11864ee697d5fd9b036d8325f","modified":1685077880165},{"_id":"themes/anzhiyu/layout/includes/third-party/effect.pug","hash":"4e37535c63149708ecbedb262336014524ad8723","modified":1685077880171},{"_id":"themes/anzhiyu/layout/includes/third-party/pjax.pug","hash":"211ae20c605d8fc479487080226b347e208ec1a8","modified":1685077880174},{"_id":"themes/anzhiyu/layout/includes/third-party/pangu.pug","hash":"f0898509da70388b5c532f19e762756d74080200","modified":1685077880174},{"_id":"themes/anzhiyu/layout/includes/third-party/prismjs.pug","hash":"08979afbfecb4476a5ae8e360947b92624d285b8","modified":1685077880174},{"_id":"themes/anzhiyu/layout/includes/third-party/subtitle.pug","hash":"d561d36229692e2c8a9ee45a7c24c0c2b3599170","modified":1685077880177},{"_id":"themes/anzhiyu/layout/includes/top/top.pug","hash":"795c34f934a49de46d659279426753cfb9f0054f","modified":1685077880178},{"_id":"themes/anzhiyu/source/css/_highlight/theme.styl","hash":"3c178608406c31d768af355ef1d7326da37cc75f","modified":1685077880222},{"_id":"themes/anzhiyu/source/css/_highlight/highlight.styl","hash":"762bf1a98026747b429969f9026fce38dbea9f45","modified":1685077880220},{"_id":"themes/anzhiyu/source/css/_layout/404.styl","hash":"c199227504d597000735cbad449f09ccc43e13ca","modified":1685077880223},{"_id":"themes/anzhiyu/source/css/_layout/aside.styl","hash":"ddcbaa77ab0cc4af6dcb34597445a53c26be04d4","modified":1685077880223},{"_id":"themes/anzhiyu/source/css/_layout/banner.styl","hash":"31df78e8a76590d735d27c82196b9ce0ba6e722f","modified":1685077880223},{"_id":"themes/anzhiyu/source/css/_layout/comments.styl","hash":"fb5f6a1d22f70815623fe0093710736754bd4037","modified":1685077880223},{"_id":"themes/anzhiyu/source/css/_layout/chat.styl","hash":"f27ad7b5d781c98bcac5c12c2d70b69b830e0374","modified":1685077880223},{"_id":"themes/anzhiyu/source/css/_layout/footer.styl","hash":"5a218978c6bf61a4b21ca43ec5997e611579550e","modified":1685077880224},{"_id":"themes/anzhiyu/source/css/_layout/head.styl","hash":"7f12a0b93a8642f986b40762750ceedce6106226","modified":1685077880224},{"_id":"themes/anzhiyu/source/css/_layout/loading.styl","hash":"77785499deeeff3eb69191ada58643deb56235fb","modified":1685077880224},{"_id":"themes/anzhiyu/source/css/_layout/nav.styl","hash":"8f5145b5a94fe8cc66d2b7bbc8729988459a6789","modified":1685077880225},{"_id":"themes/anzhiyu/source/css/_layout/oneGraphFlow.styl","hash":"5f8b8d7c2d563c993498905d44a996b96553b496","modified":1685077880225},{"_id":"themes/anzhiyu/source/css/_layout/post.styl","hash":"cf7b5616e309c0b59286bee4a086ded98787feac","modified":1685077880226},{"_id":"themes/anzhiyu/source/css/_layout/pagination.styl","hash":"3469517b8b600fb445867240150ebca4abf72197","modified":1685077880225},{"_id":"themes/anzhiyu/source/css/_layout/relatedposts.styl","hash":"6dcf19c0933c8828a439f801b0f4b256447dec07","modified":1685077880226},{"_id":"themes/anzhiyu/source/css/_global/function.styl","hash":"2500612d2bc94228e04231e1cb87d5a22e435b90","modified":1685077880219},{"_id":"themes/anzhiyu/source/css/_layout/ptool.styl","hash":"9744d52a1e95c86483385c99e7d8e9649f94a94a","modified":1685077880226},{"_id":"themes/anzhiyu/source/css/_layout/reward.styl","hash":"786eaaf2dea92a7a4c8005165cc552e2d604a071","modified":1685077880226},{"_id":"themes/anzhiyu/source/css/_layout/rightside.styl","hash":"1ba84ae3437fc3d13abda396f7d02d55fef7ae64","modified":1685077880227},{"_id":"themes/anzhiyu/source/css/_layout/shortcutKey.styl","hash":"9f45ebfba4fd0c6bde7877b06d7e1b3b1e7da405","modified":1685077880227},{"_id":"themes/anzhiyu/source/css/_layout/third-party.styl","hash":"b5f366f4c5286ca4321c832852feddda1f18c960","modified":1685077880228},{"_id":"themes/anzhiyu/source/css/_layout/sidebar.styl","hash":"bdeb1d81b697a8c91df60e8aaad5fc6d4987faff","modified":1685077880227},{"_id":"themes/anzhiyu/source/css/_global/icon.styl","hash":"0a8e0470910209033479ef515013bb968db9e4b5","modified":1685077880219},{"_id":"themes/anzhiyu/source/css/_global/index.styl","hash":"0f9d79a7cb42a3172905b455647e231ff5e631fe","modified":1685077880219},{"_id":"themes/anzhiyu/source/css/_mode/darkmode.styl","hash":"2798e1cd2259dda59b506807ddc1944d3700c65f","modified":1685077880228},{"_id":"themes/anzhiyu/source/css/_mode/readmode.styl","hash":"1dc2fb48a3376e234148537bd78645b1bbd00e8a","modified":1685077880228},{"_id":"themes/anzhiyu/source/css/_search/local-search.styl","hash":"45792c13c7c439d412b7dc597d74d24f3b598406","modified":1685077880233},{"_id":"themes/anzhiyu/source/css/_search/index.styl","hash":"cced94e70b4b90130cfa215582be2adbf883efba","modified":1685077880232},{"_id":"themes/anzhiyu/source/css/_page/about.styl","hash":"49baf9ef93ad6bf51b47ed28d3f47c6f4e7f6e41","modified":1685077880229},{"_id":"themes/anzhiyu/source/css/_search/algolia.styl","hash":"bb2dae2267c7e11e4a1788712b20ef923af1fb4d","modified":1685077880232},{"_id":"themes/anzhiyu/source/css/_page/404.styl","hash":"a7223a8fcc4fa7b81e552c9a2554be7df9de312e","modified":1685077880229},{"_id":"themes/anzhiyu/source/css/_page/common.styl","hash":"236a8550408311f15519c2198db0d65f825d7e40","modified":1685077880230},{"_id":"themes/anzhiyu/source/css/_page/archives.styl","hash":"614b055b99edc29027f0640e225b3f4c77f9d87d","modified":1685077880229},{"_id":"themes/anzhiyu/source/css/_page/categories.styl","hash":"68bc8cbea25dbb3cdc170f09f9b43ce130547717","modified":1685077880230},{"_id":"themes/anzhiyu/source/css/_page/flink.styl","hash":"450e744d747779c6232b0e503f25af0f6d5fc2e6","modified":1685077880230},{"_id":"themes/anzhiyu/source/css/_page/homepage.styl","hash":"90b495404b6e118970cb96fec9e1e81e05d9506b","modified":1685077880230},{"_id":"themes/anzhiyu/source/css/_page/tag_page.styl","hash":"ccf4767ac0882c8d14d71361e667b559f86789f5","modified":1685077880232},{"_id":"themes/anzhiyu/source/css/_page/music.styl","hash":"c9941fadb2af203c8ff7e7f5ce1255535eaae3d3","modified":1685077880231},{"_id":"themes/anzhiyu/source/css/_page/reward.styl","hash":"2e4db35be45c29ae07109a0a1f0f4a05ef905191","modified":1685077880232},{"_id":"themes/anzhiyu/source/css/_page/tags.styl","hash":"9e35f91847773b915c74a78b8aa66c7bdb950ad0","modified":1685077880232},{"_id":"themes/anzhiyu/source/css/_tags/btns.styl","hash":"d90bd2d470164716ab3742ed31609bf02e5b0b30","modified":1685077880233},{"_id":"themes/anzhiyu/source/css/_tags/checkbox.styl","hash":"3f1fcb0973ccea197afef26e0d515b3800dae348","modified":1685077880235},{"_id":"themes/anzhiyu/source/css/_tags/button.styl","hash":"ea2018ba7cbc2e11d413231556d5b001cdbd5117","modified":1685077880235},{"_id":"themes/anzhiyu/source/css/_tags/folding.styl","hash":"f4c117ccd9ffec997a36347358050021e60df498","modified":1685077880235},{"_id":"themes/anzhiyu/source/css/_tags/gallery.styl","hash":"99f2edcee8318b8cf5911fe344b89f58df7f313c","modified":1685077880236},{"_id":"themes/anzhiyu/source/css/_tags/hexo.styl","hash":"985b183db7b7bfd8f9bdb60494549fb7f850348b","modified":1685077880236},{"_id":"themes/anzhiyu/source/css/_tags/hide.styl","hash":"4de1984c5fdf774ef2f8e856ea188729d06743b6","modified":1685077880236},{"_id":"themes/anzhiyu/source/css/_tags/inline-labels.styl","hash":"c7d6be0b6435b346a383fd9cac4cc1a43db7cb8a","modified":1685077880236},{"_id":"themes/anzhiyu/source/css/_tags/inlineImg.styl","hash":"5a873d01fabebcf7ddf7a6b1c2e2e5e2714097f4","modified":1685077880237},{"_id":"themes/anzhiyu/source/css/_tags/media.styl","hash":"da94e08918d1468871e69e265969d501310d3553","modified":1685077880237},{"_id":"themes/anzhiyu/source/css/_tags/label.styl","hash":"2f83bd145b870d80d4b18b0ac603235229a5694e","modified":1685077880237},{"_id":"themes/anzhiyu/source/css/_tags/note.styl","hash":"70e338c1742dcedcf5e6da8bd5c6fd0b2c1f3c27","modified":1685077880238},{"_id":"themes/anzhiyu/source/css/_tags/site-card.styl","hash":"d497a9c654b927e1579a8a8513573bafacc7150a","modified":1685077880238},{"_id":"themes/anzhiyu/source/css/_tags/span.styl","hash":"252220ebb7f8e3bbff620b4d254a4703dfea7f3e","modified":1685077880238},{"_id":"themes/anzhiyu/source/img/siteicon/16.png","hash":"8dc6ca32ff1264f7c1c3a8f62727a8c96ea7525b","modified":1685077880257},{"_id":"themes/anzhiyu/source/css/_tags/timeline.styl","hash":"f538fe0525c6491ac24b23ae2f9c1d2c396494fd","modified":1685077880238},{"_id":"themes/anzhiyu/source/css/_tags/tabs.styl","hash":"ec81ea316c82b83d6aee31e52f248d329559d5d3","modified":1685077880238},{"_id":"themes/anzhiyu/source/css/_tags/tip.styl","hash":"0ff439cf17d53a1ed7c8ec167ef941eebeb9095d","modified":1685077880239},{"_id":"themes/anzhiyu/source/img/siteicon/32.png","hash":"147aae33224066ef2a5987c3cbbfa4309c49cef4","modified":1685077880258},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-512.maskable.png","hash":"6f8b4b3df8d1498db55a559f7106dc9b6e6af647","modified":1685077880259},{"_id":"themes/anzhiyu/source/img/siteicon/apple-icon-180.png","hash":"7f580ec4819c9ef10b1306102152f4473f037a98","modified":1685077880258},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-192.maskable.png","hash":"528b94ebcd34fb55436d64fdda76ef43ccbf031f","modified":1685077880259},{"_id":"themes/anzhiyu/source/css/_third-party/twikoo.styl","hash":"3f1778943b8c22840939216085154e8d2a1cc543","modified":1685077880239},{"_id":"themes/anzhiyu/source/js/search/local-search.js","hash":"23e1b201d825afc1063b51031c5c172dfdeb49d4","modified":1685077880260},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/artalk.pug","hash":"645087801624a73cbee63269cfd399e9da39c663","modified":1685077880166},{"_id":"themes/anzhiyu/source/css/_third-party/normalize.min.css","hash":"0f503b742ff2889977951b0c49fd1048b685a501","modified":1685077880239},{"_id":"themes/anzhiyu/source/js/search/algolia.js","hash":"db36297d2ed2b4b3898438a19e707ddbc17093b5","modified":1685077880260},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/index.pug","hash":"5a6072e73874997e27dce1bf47f3d37922430336","modified":1685077880166},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/twikoo.pug","hash":"38b85d216d9377ddbaa2e5867e2f03805227237c","modified":1685077880166},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/valine.pug","hash":"cd4fc9c5a61608a5dedf645c1295430a1623040f","modified":1685077880167},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/waline.pug","hash":"3f59333064c4fc754c638f13a417b7be2569ca09","modified":1685077880167},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/artalk.pug","hash":"8a6fe39853b2740ccc752cc221cf3868526046fe","modified":1685077880170},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/twikoo.pug","hash":"64cc42322519e1ecbecbe0e1ad55d545cedf0361","modified":1685077880170},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/waline.pug","hash":"761ecb0ef38ebb291715e7035048b70882e85805","modified":1685077880171},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/valine.pug","hash":"304682b41bc07d8cb5ea6e89e3d9a0ad22905324","modified":1685077880171},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/crisp.pug","hash":"b741b5e942481d779a8a1fe94c45154a62a6b748","modified":1685077880168},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/js.pug","hash":"1d14d5374dcc38a837a48fd92ef521dcfaeb9240","modified":1685077880170},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/index.pug","hash":"feed6592c889db2cf09fc212943f1a698a700d5a","modified":1685077880170},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/chatra.pug","hash":"f3f6eaecbcf9352342e259f4a5a3ad7160f31fc9","modified":1685077880167},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/gitter.pug","hash":"794ce3911f17d354b7196deb8c36d191afac63fb","modified":1685077880168},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/daovoice.pug","hash":"e5af55cdb87d1ffd3d8702bc77097159acf95b54","modified":1685077880168},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/index.pug","hash":"bb467bb22f3d0775b33f9eacbfc086ecb7831e78","modified":1685077880168},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/tidio.pug","hash":"cd7ab4a776be93eea96a6f6fd0a547977fbe1ea3","modified":1685077880169},{"_id":"themes/anzhiyu/layout/includes/third-party/math/index.pug","hash":"2afa4c21dd19890f47fb568cfb0d90efb676a253","modified":1685077880171},{"_id":"themes/anzhiyu/layout/includes/third-party/math/katex.pug","hash":"65a432d2c54b9269ddaa68715dbcd8724ed32efb","modified":1685077880172},{"_id":"themes/anzhiyu/layout/includes/third-party/math/mermaid.pug","hash":"297d34d83e7bff8ec3b8bc19bb0f4d901c35fe5a","modified":1685077880172},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/artalk.pug","hash":"51584e0e2789b2af7ebcb47d17414961d37d790e","modified":1685077880172},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/index.pug","hash":"cb4021a8bbb4045c2ecca1a161921ea45fb1506f","modified":1685077880173},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"61ed945548977cb718b1476541077efdc40ddea1","modified":1685077880173},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/valine.pug","hash":"5e05dbb5aec03845f172959d6404096071f24255","modified":1685077880173},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/waline.pug","hash":"1de3c7afd7b833d9193e42f5038bc1d124224ebb","modified":1685077880174},{"_id":"themes/anzhiyu/layout/includes/third-party/runtime/runtime-js.pug","hash":"50ab270c7decba45244c5e6d99f463932b2ad3e9","modified":1685077880175},{"_id":"themes/anzhiyu/source/css/_custom/about/about.css","hash":"ec42be11a02996a7ee6ebd6eb592371414acc798","modified":1685077880199},{"_id":"themes/anzhiyu/source/css/_custom/album/album.css","hash":"b7c4b32455d1498dbdfff10b8481285209f83146","modified":1685077880200},{"_id":"themes/anzhiyu/source/css/_custom/about/careers.css","hash":"b66e67230103bfefb2c0dd98dc5eb34ede2084a4","modified":1685077880199},{"_id":"themes/anzhiyu/source/css/_custom/album/album_detail.css","hash":"868db4e9e51e2bbe2d6555c957ecf56d50032c3c","modified":1685077880200},{"_id":"themes/anzhiyu/source/css/_custom/about/hello-about.css","hash":"9f45a0062cd002cfc578e01c6b32a8787f90ce23","modified":1685077880199},{"_id":"themes/anzhiyu/source/css/_custom/about/genshinimpact.css","hash":"77345d457709520e55fd76272cb708df2a64043c","modified":1685077880199},{"_id":"themes/anzhiyu/layout/includes/third-party/search/algolia.pug","hash":"1ec99a285ad93791940ba1f44a268453f16ceedb","modified":1685077880175},{"_id":"themes/anzhiyu/layout/includes/third-party/share/addtoany.pug","hash":"1f02a26730e5f36cc2dfec7ff4d5c93a099ed5ba","modified":1685077880176},{"_id":"themes/anzhiyu/layout/includes/third-party/search/index.pug","hash":"ff3727c3ec698ec61a28c55cbc8c8508f0efb0a0","modified":1685077880175},{"_id":"themes/anzhiyu/layout/includes/third-party/search/local-search.pug","hash":"928accb5fb5978b851b1d19abcd464258dd10e06","modified":1685077880176},{"_id":"themes/anzhiyu/layout/includes/third-party/share/index.pug","hash":"2bdc87958d81f1c0a516c7598863e6edccf8bdc6","modified":1685077880176},{"_id":"themes/anzhiyu/layout/includes/third-party/share/share-js.pug","hash":"b45fc15c3ae7db3a0fbce0d6da74a72a95ca8a2b","modified":1685077880177},{"_id":"themes/anzhiyu/source/css/_custom/algolia-search/algolia-search.css","hash":"6a0dbe8e83f760126e170849640b4b06f9961dbf","modified":1685077880201},{"_id":"themes/anzhiyu/source/css/_custom/aside_weixin/aside_weixin.css","hash":"a96b0559ca915f2aa1f2a80412bb75cfce6fea38","modified":1685077880202},{"_id":"themes/anzhiyu/source/css/_custom/catalog_list/catalog_list.css","hash":"c776b405b5e853aa259394ff3797026a6d10bd61","modified":1685077880202},{"_id":"themes/anzhiyu/source/css/_custom/anzhiyu/custom.css","hash":"7634d28e5cd12c09c18f262b94ec7f4603d20026","modified":1685077880201},{"_id":"themes/anzhiyu/source/css/_custom/categoryBar/categoryBar.css","hash":"7942f92df920c8d5e8d48f5afcf57cdc254f2d69","modified":1685077880203},{"_id":"themes/anzhiyu/source/css/_custom/clock/clock.css","hash":"581be0a5214a5534e4cf81ceb3184737e5f2d987","modified":1685077880203},{"_id":"themes/anzhiyu/source/css/_custom/code/code.css","hash":"bd3e91c8caff1d5048b8ecf26edb3b6242123878","modified":1685077880203},{"_id":"themes/anzhiyu/layout/includes/third-party/share/add-this.pug","hash":"8b4034e53ca5bf85097f681a6e76a53ce685c205","modified":1685077880176},{"_id":"themes/anzhiyu/source/css/_custom/code/details_summary.css","hash":"71d98974fca9d899bcb5c429b3ab3e9e1cb88bba","modified":1685077880204},{"_id":"themes/anzhiyu/source/css/_custom/console/console.css","hash":"6321d37f98dffa02788bcd4e5ad5f7ac3bf79eaa","modified":1685077880205},{"_id":"themes/anzhiyu/source/css/_custom/fix/aplayer.css","hash":"2b07dcb80628f742a5bf08eb484283b2ecca8cbb","modified":1685077880206},{"_id":"themes/anzhiyu/layout/includes/third-party/math/mathjax.pug","hash":"056756e43908519039b8bbd7a90f8c49d561eb52","modified":1685077880172},{"_id":"themes/anzhiyu/source/css/_custom/commentBarrage/commentBarrage.css","hash":"93eabcbf5a08c64c5d85ba58836f56ab0cf0bbbb","modified":1685077880204},{"_id":"themes/anzhiyu/source/css/_custom/fix/bilibili-bangumi.css","hash":"0cb28adec6878ebd7a9372f289e21280b2bc7259","modified":1685077880207},{"_id":"themes/anzhiyu/source/css/_custom/fix/bilibili-ratio.css","hash":"628352103e72c98e6d2b25f1cdb39070bd0f021c","modified":1685077880207},{"_id":"themes/anzhiyu/source/css/_custom/fix/categories.css","hash":"9a636a2548bdd96084b919a2ad174db141d609c8","modified":1685077880207},{"_id":"themes/anzhiyu/source/css/_custom/fix/clock.css","hash":"adb0616fdb157a880d1ab01bfb51e522df8c3523","modified":1685077880207},{"_id":"themes/anzhiyu/source/css/_custom/fix/comments.css","hash":"7c2a30ceeb7519c96eda1c2ef67b6873ba3f24d2","modified":1685077880207},{"_id":"themes/anzhiyu/source/css/_custom/fix/fcircle_page.css","hash":"16833b57f9dbb1d72cdf4a3cd80751a315a0bb27","modified":1685077880208},{"_id":"themes/anzhiyu/source/css/_custom/fix/dark.css","hash":"dfc609b95f31544177babc76dade1720fe7cda42","modified":1685077880207},{"_id":"themes/anzhiyu/source/css/_custom/fix/gitcalendar.css","hash":"b3081e90ff9994e0ed0206065bbb07daa90d6e29","modified":1685077880208},{"_id":"themes/anzhiyu/source/css/_custom/fix/hexo-tag-dplayer.css","hash":"7ded42d62e0ba475b9789977ed7236a6c1b32007","modified":1685077880208},{"_id":"themes/anzhiyu/source/css/_custom/fix/hide-block.css","hash":"cb6319200511548acd5642f4c6d9a3115a778b35","modified":1685077880208},{"_id":"themes/anzhiyu/source/css/_custom/fix/link_page.css","hash":"ced162602659f3cb0e423ef15c532cc7c99d6123","modified":1685077880209},{"_id":"themes/anzhiyu/source/css/_custom/fix/overflow.css","hash":"f576d683669eb9c7b84d344a7381457d044b7377","modified":1685077880209},{"_id":"themes/anzhiyu/source/css/_custom/fix/radius.css","hash":"87a883c4df828c3dae3f10b3fc47d113f9d9fcbb","modified":1685077880209},{"_id":"themes/anzhiyu/source/css/_custom/fix/site-card.css","hash":"f56eff8b96c773ae6a8e97ef0e1c822feabe5854","modified":1685077880209},{"_id":"themes/anzhiyu/source/css/_custom/essay_page/home_essay_bar.css","hash":"d8026910a2b99fec6e8cdd5889e4f22488c0d64a","modified":1685077880206},{"_id":"themes/anzhiyu/source/css/_custom/friends/friends.css","hash":"171868650c64cb995cfab069b3c128b5d07e3d38","modified":1685077880210},{"_id":"themes/anzhiyu/source/css/_custom/footer/footer.css","hash":"497980fa313ff7045c0756a32dc08101dcc3013d","modified":1685077880210},{"_id":"themes/anzhiyu/source/css/_custom/essay_page/essay_page.css","hash":"f8043bf2e98c27db2efe19188277aa018917f822","modified":1685077880206},{"_id":"themes/anzhiyu/source/css/_custom/local_search/local_search.css","hash":"9fc79ed81a5f0476172fe688ecba08e7b8e3be03","modified":1685077880213},{"_id":"themes/anzhiyu/source/css/_custom/home_top/categorygroup.css","hash":"a781813ebb26aa099a559c869841a509746b0b61","modified":1685077880211},{"_id":"themes/anzhiyu/source/css/_custom/greeting_box/greeting_box.css","hash":"d23e4c88753a1487181dde849c0a5d6161e053a3","modified":1685077880211},{"_id":"themes/anzhiyu/source/css/_custom/home_top/home_top_post_group.css","hash":"7673ab37f7458cc282711567f4e44114242ab5bc","modified":1685077880212},{"_id":"themes/anzhiyu/source/css/_custom/home_top/swiperstyle.css","hash":"8ec42b6fade14a0f31794114f6314541784dc306","modified":1685077880212},{"_id":"themes/anzhiyu/source/css/_custom/home_top/home_top.css","hash":"a01d4f141b1e83c13540bcb84d6890853728b63a","modified":1685077880211},{"_id":"themes/anzhiyu/source/css/_custom/home_top/random-banner.css","hash":"954f6958772bb22150f5ac8088a0ac0cc25125e2","modified":1685077880212},{"_id":"themes/anzhiyu/source/css/_custom/rightmenu/rightmenu.css","hash":"985fd55e9d39636f0d1c241f480fa215b73fc372","modified":1685077880215},{"_id":"themes/anzhiyu/source/css/_custom/home_top/top_group_banner.css","hash":"21d42dfaf4100e4708b3ea9eca7a65fee4ccb417","modified":1685077880213},{"_id":"themes/anzhiyu/source/css/_custom/reset/reset.css","hash":"4651067de360b4e00dd361795a74a7ed2a5a62ff","modified":1685077880214},{"_id":"themes/anzhiyu/source/css/_custom/reward/about-reward.css","hash":"2201faa78b7a9ded910f59abe28df2b897fd23b0","modified":1685077880215},{"_id":"themes/anzhiyu/source/css/_custom/runtime/runtime.css","hash":"f480da5a6f13ef7a8f7a53353908754d5a2fdf18","modified":1685077880216},{"_id":"themes/anzhiyu/source/css/_custom/skills/skills.css","hash":"12901c0c77345fbd92edf591ee98266919eed259","modified":1685077880217},{"_id":"themes/anzhiyu/source/css/_custom/room/room.css","hash":"6d347523d9a158dcb841e0165c5778af70787cfa","modified":1685077880216},{"_id":"themes/anzhiyu/source/css/_custom/tag/link.css","hash":"2d8f0133ed93b09ad5d39748048c4620dcb42356","modified":1685077880218},{"_id":"themes/anzhiyu/source/css/_custom/tag/site.css","hash":"ad3aebb29b61f5417954bea53a046392da80efaa","modified":1685077880218},{"_id":"themes/anzhiyu/source/css/_custom/single_card/single_card.css","hash":"f7690f0dde69437f2222a9889ea957a185a7fbb6","modified":1685077880217},{"_id":"themes/anzhiyu/source/css/_custom/snackbar/snackbar.css","hash":"5e460fb4d0a1647ae31c7c227332636e41f270b3","modified":1685077880217},{"_id":"themes/anzhiyu/source/css/_highlight/highlight/diff.styl","hash":"6e77f1ca0cfb0db6b028f5c0238780e66d344f3d","modified":1685077880220},{"_id":"themes/anzhiyu/source/css/_highlight/prismjs/diff.styl","hash":"1309292f1c8c53d96cd7333507b106bcc24ca8fc","modified":1685077880221},{"_id":"themes/anzhiyu/source/css/_highlight/highlight/index.styl","hash":"fc702a4614d0562a381907b083f71ba63d301d86","modified":1685077880221},{"_id":"themes/anzhiyu/source/css/_highlight/prismjs/index.styl","hash":"78398d5c407a30a561c1c98baccaabd9633edd27","modified":1685077880222},{"_id":"themes/anzhiyu/source/css/_highlight/prismjs/line-number.styl","hash":"0b8aea62d1550113e1fcc237fae1b03743190208","modified":1685077880222},{"_id":"themes/anzhiyu/source/img/404.jpg","hash":"030b9c7c9d654b3d67c1249a6e5900bf40c79373","modified":1685077880242},{"_id":"source/images/hexoConfigNote/image-20230526214910920.png","hash":"0397818f78688e40d9e569e4f13e0c31ea4493ce","modified":1685108951121},{"_id":"source/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg","hash":"44e9489ea66fae99d376ad3aa6ee31a0f3d246db","modified":1685249167511},{"_id":"source/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg","hash":"53bbfda9b270bbb51af9bce3992e1372ca7b8e0e","modified":1685249242015},{"_id":"source/images/hexoConfigNote/2023-05-26_152705.png","hash":"aea71474bdde904cfaf84756f1aebda371ef1c3d","modified":1685100407376},{"_id":"themes/anzhiyu/source/img/friend_404.gif","hash":"4c0a482bce3710942aff900d62c48333827e5a53","modified":1685077880251},{"_id":"themes/anzhiyu/source/img/loading.gif","hash":"b9e8d78b86bc48d565e26c8c1ea275c2c758fb0d","modified":1685077880257},{"_id":"source/images/vitepressNote/image-20230530090814042.png","hash":"cad3445d6de434904b7110cf75ab5c5b672a3da0","modified":1685408894635},{"_id":"themes/anzhiyu/source/img/default_top_img.jpg","hash":"5cbf842141b5edccddac8d8937f78156c60c2370","modified":1685093666845},{"_id":"source/_posts/hexoConfigNote/mybackground.jpg","hash":"791953f317ad9ec5e89800aea7abd7cf87e8bf4e","modified":1685110338824},{"_id":"source/_posts/TreasureinLife/mycover.png","hash":"c31161beef1d7f373f5d3e1466528f75b8266e0a","modified":1687094845929},{"_id":"source/images/myNFC/video.mp4","hash":"2aace6cd242c197634901473b4b859115d2a3a4a","modified":1685254373371},{"_id":"source/images/WeatherBroadcast/23-05-28-11-33-28.mp4","hash":"04058eaf6a568a9c145d4266417a932521cee0f0","modified":1685244942659},{"_id":"public/anzhiyu/random.js","hash":"92e2434e9ca4c8530c290e3c8d73b95621c92d62","modified":1687356228792},{"_id":"public/404.html","hash":"42f894be9548647489b11b852255245222fb575e","modified":1687356228792},{"_id":"public/categories/index.html","hash":"b0e624e4189bc7cc0c887ca7088fb00f3fe564a0","modified":1687356228792},{"_id":"public/tags/index.html","hash":"708f8720afda3c454f5c3d32bf2510adaa633cf5","modified":1687356228792},{"_id":"public/2023/06/18/TreasureinLife/index.html","hash":"b41caeb1a5e19d11e0a2f13205e314c0ac7075f1","modified":1687356228792},{"_id":"public/2023/06/18/100things/index.html","hash":"c8f24d8319430c2475e0043ba05711f2fea9fcc0","modified":1687356228792},{"_id":"public/2023/05/30/vitepressNote/index.html","hash":"2802171eb0ddae512ccb48c06cbff5d27acc1ea3","modified":1687356228792},{"_id":"public/2023/05/28/dumiNote/index.html","hash":"2262485d1dad13ac2ac28f02cbb3bf03a9e079c5","modified":1687356228792},{"_id":"public/2023/05/28/myNFC/index.html","hash":"9f7e51a73d1097c92120547726f2219cb32a9f65","modified":1687356228792},{"_id":"public/2023/05/28/CardSpending/index.html","hash":"c7774eb0ec536e5f5a6522f6cd778edb91707bcd","modified":1687356228792},{"_id":"public/2023/05/28/WeatherBroadcast/index.html","hash":"2646c840e567e68350a63aedf224ad046f8ad9eb","modified":1687356228792},{"_id":"public/2023/05/28/GitNote/index.html","hash":"44c0d7df983bbfee8b8b5cda6fe0f02f15698b36","modified":1687356228792},{"_id":"public/2023/05/26/hexoConfigNote/index.html","hash":"6af020e246af5d7e1beefd576211badbc9515525","modified":1687356228792},{"_id":"public/archives/index.html","hash":"75d8cc453fbf4a856edfda4de8ed62ec79f54b15","modified":1687356228792},{"_id":"public/archives/2023/index.html","hash":"bb1df18032eeef54e4b2088597e094bebbd9ff31","modified":1687356228792},{"_id":"public/archives/2023/05/index.html","hash":"8a4b66483e1464e8b68384afd11b6ee169e427e6","modified":1687356228792},{"_id":"public/archives/2023/06/index.html","hash":"8060ec189e166f2fbb99c30ae01caf4e89f5cbe8","modified":1687356228792},{"_id":"public/categories/生活日常/index.html","hash":"eb640ec3dc74006eac0fdd92815812c1d1b907e5","modified":1687356228792},{"_id":"public/index.html","hash":"72728f71f86719edeea0f85c78324225fd9aa0ef","modified":1687356228792},{"_id":"public/tags/life/index.html","hash":"caf0e56c94a97469716737fd3909097a38f4c59d","modified":1687356228792},{"_id":"public/tags/前端工程化-react/index.html","hash":"b1048697db1fec746c571d9293e04afcf2041680","modified":1687356228792},{"_id":"public/tags/Git/index.html","hash":"89bc377b2d41c1a104cf580b159072c328836a08","modified":1687356228792},{"_id":"public/tags/Android-APP/index.html","hash":"6649a82af44c3919f8b64b41326ce16fb3bf01b9","modified":1687356228792},{"_id":"public/tags/config/index.html","hash":"4d982ba4ef48182164aff42cd4c76fdcc1668494","modified":1687356228792},{"_id":"public/tags/vitepress/index.html","hash":"5c99ffe4bac392d493b290a7d4c73a681a4e4919","modified":1687356228792},{"_id":"public/img/512.png","hash":"6988b23a31304d9de45b95a1e7c05dd42024e560","modified":1687356228792},{"_id":"public/img/algolia.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1687356228792},{"_id":"public/img/archive_img.jpg","hash":"486da5427d0ba0bf9622b831512fe6f6e6cea3f9","modified":1687356228792},{"_id":"public/img/avatar.jpg","hash":"453097d7a71689555f8b8620d7b61c9f0f825c8e","modified":1687356228792},{"_id":"public/img/card.ico","hash":"1230d7ffd6de4c3eb4a6066a93b400f162593e84","modified":1687356228792},{"_id":"public/img/default_cover.jpg","hash":"19a2b44fb81175ef6a18d6f3db140801cfb579b2","modified":1687356228792},{"_id":"public/img/comment_bg.png","hash":"91612a887446fb436e9151981e2289f2a426a3e5","modified":1687356228792},{"_id":"public/img/favicon.ico","hash":"7d00042dea184d93bde4bc81c3a5c20a86d2899e","modified":1687356228792},{"_id":"public/img/green.svg","hash":"d23ae259ad961518e831adf7a2caa2b24fb682f0","modified":1687356228792},{"_id":"public/img/index_img.jpg","hash":"054569cc9327c32f76ed3a84f383559eaf79fe7b","modified":1687356228792},{"_id":"public/img/nfc.ico","hash":"2fa18b05b22b54e3adcc7588737bd99da87670c0","modified":1687356228792},{"_id":"public/img/paycode.png","hash":"e45a943d5304e44fb997eff325412ac07366e039","modified":1687356228792},{"_id":"public/img/red.svg","hash":"f66fbc2326a77da78c2f5991981e375237463cb3","modified":1687356228792},{"_id":"public/img/siteicon/16.png","hash":"8dc6ca32ff1264f7c1c3a8f62727a8c96ea7525b","modified":1687356228792},{"_id":"public/img/resume.ico","hash":"ef0868be47a9cd98498d6aee4f56d4a780507de2","modified":1687356228792},{"_id":"public/img/weather.ico","hash":"7740d3a5410374460fd59f146d0791f4b6fba3a9","modified":1687356228792},{"_id":"public/img/siteicon/apple-icon-180.png","hash":"7f580ec4819c9ef10b1306102152f4473f037a98","modified":1687356228792},{"_id":"public/img/siteicon/32.png","hash":"147aae33224066ef2a5987c3cbbfa4309c49cef4","modified":1687356228792},{"_id":"public/CNAME","hash":"2b858a135a845cc6c10494a03c84d79a7cf38172","modified":1687356228792},{"_id":"public/img/siteicon/manifest-icon-512.maskable.png","hash":"6f8b4b3df8d1498db55a559f7106dc9b6e6af647","modified":1687356228792},{"_id":"public/img/siteicon/manifest-icon-192.maskable.png","hash":"528b94ebcd34fb55436d64fdda76ef43ccbf031f","modified":1687356228792},{"_id":"public/images/CardSpending/Untitled 15-1685252038490-19.png","hash":"8f4dee13586b58eb5b3545f7fd816370d6ede61d","modified":1687356228792},{"_id":"public/images/CardSpending/Untitled 16-1685252055780-21.png","hash":"8879040c2759787d3cd8122b344e6f1cf1feb797","modified":1687356228792},{"_id":"public/images/CardSpending/Untitled 2-1685249399313-17.png","hash":"2e50aeea3c52939c5e2fc0a4faeabe8fc4efa281","modified":1687356228792},{"_id":"public/images/CardSpending/image-20230528133143833.png","hash":"70d0d8524060869322bf7f339e25c82d00e943ca","modified":1687356228792},{"_id":"public/images/CardSpending/image-20230528133216623.png","hash":"647b91d57a58e14e72517300e425c0cb1b5e8ef8","modified":1687356228792},{"_id":"public/images/GitNote/branches-delete.png","hash":"9ba758a47dde35b155076ddf519cae3d94f817fd","modified":1687356228792},{"_id":"public/images/CardSpending/image-20230528133239391.png","hash":"140cc31e45165539c83392001b7dfcaf06ca71cf","modified":1687356228792},{"_id":"public/images/CardSpending/image-20230528133300931.png","hash":"751adc137228a27271d33f96502d7ffca329aaf5","modified":1687356228792},{"_id":"public/images/GitNote/image-20230528094312668.png","hash":"c9d70dbfa55cd181f44d69309aa04291c214c7c9","modified":1687356228792},{"_id":"public/images/GitNote/image-20230528093749248.png","hash":"1c4e81e0f6cb7c46ee599db4790dd87604275f5b","modified":1687356228792},{"_id":"public/images/OAuth/OIP-C.y3Ld0-_6IbLOaiE2-hlXZAHaFUw=233&h=180&c=7&r=0&o=5&dpr=1.5&pid=1.jpeg","hash":"9ecbb4e9c2135434ab0fddfb38f3fc162f367e10","modified":1687356228792},{"_id":"public/images/OAuth/bg2015092302.jpg","hash":"1e8211083201e6836a919557e306d59c478f9249","modified":1687356228792},{"_id":"public/images/OAuth/bg2019042101.jpg","hash":"499c4234e5c959c290f14d5a3d4dd27272199049","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/Untitled 1.png","hash":"c032ec35f505a727feb18923020062137682a6ec","modified":1687356228792},{"_id":"public/images/GitNote/image-20230528101552880.png","hash":"bf7d2fa76d5b5beb6e873ed2446e0bc85ddbd1d0","modified":1687356228792},{"_id":"public/images/GitNote/image-20230528100012067.png","hash":"ad7c4d355c821dd65eff5ac217fb0dcb3da68f18","modified":1687356228792},{"_id":"public/images/GitNote/image-20230528095326943.png","hash":"cb6210c235337b35946553be5e583995200591a8","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/Untitled 6.png","hash":"2e1ea208a6a9a7572b05910ef039c7ef491222b4","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/Untitled 2.png","hash":"6da76d72aaa8ddfedeb35b81846a3c867e2e40c4","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/Untitled 7.png","hash":"9b285d68bb268fd44c1db91acdd412441925457b","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/Untitled 9.png","hash":"55edf54e6dfc6e106510674d30e4dbf9acf53330","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112305880.png","hash":"47eb8fd88d3d700969561d831ae2b9e0fb751b85","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192457800.png","hash":"6b41d6217fa15dcb30ae442196b0c3c624765646","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192535335.png","hash":"c428486fe8e06cf7b84d7b412b0f7681db8c3dcc","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192611019.png","hash":"7602e1a8e17444ca3274c081341d0707314ac470","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192735406.png","hash":"cabdf51edb3faaf7570a4c9fc3771c25164a1b7c","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192827373.png","hash":"edf630c9c74141fe4bda4f165037d02fe3d51aac","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214721316.png","hash":"e99516680608a74a030cc75d31c16e4fc28701a8","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214734538.png","hash":"0e80661dd59e840e9142ebefefa78a8b339630ed","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214745972.png","hash":"b1f498d57f634c2fa91b14cc6abdc2d36d62a067","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214802166.png","hash":"0beeacaa08f40c454e4e8896bbe513da5700a6db","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214839842.png","hash":"dc129c9654b313870120b09d49add17cac25a8f5","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214857770.png","hash":"500e8cf3aeee61944145c728cc5530301bbcdfd4","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214939187.png","hash":"99526ea8ef3c62affded5cc629f96569e44422a1","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214924274.png","hash":"2c6f93696ae76336215792575d41b0d8b6ed934e","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214948330.png","hash":"88a0d372d8e8442966649c4c67896d3d3926a22a","modified":1687356228792},{"_id":"public/images/dumiNote/image-20230528191439024.png","hash":"6af4311548781f85f17b140ca03e0c6738b6d57e","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526215016301.png","hash":"fc89860e30d8b332c72cc07ae59e9d626b90d3f6","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526215415503.png","hash":"ebe2139e654fef821cfb19c95bf80143fc04cd70","modified":1687356228792},{"_id":"public/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp","hash":"0643bade99647974038faac5e6c9fc8d98030f7c","modified":1687356228792},{"_id":"public/images/dumiNote/image-20230528191442525.png","hash":"6af4311548781f85f17b140ca03e0c6738b6d57e","modified":1687356228792},{"_id":"public/images/dumiNote/image-20230528203012828.png","hash":"2776bf2f0aedb68ec003c04b1d6ecffda97057c9","modified":1687356228792},{"_id":"public/images/myNFC/88162883639770466-1685255179109-3.jpg","hash":"c5dfe1a99bb164647a47536a53ca153656f5c4ae","modified":1687356228792},{"_id":"public/images/myNFC/image-20230528141821319.png","hash":"46a226b98ae935fcb6d4e65eabe5559ae045e104","modified":1687356228792},{"_id":"public/images/myNFC/Untitled-1685255140308-1.png","hash":"78674f35f022f03b72c595f1c19c0c9d009b8a50","modified":1687356228792},{"_id":"public/images/vitepressNote/2023-05-30_135506.png","hash":"fce02dfa61e7787805093385dbf1c1cc6c774c8f","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530084302643.png","hash":"c0fda4daf04f87e1d77ce496d9c3bd19342c5d99","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530084747612.png","hash":"638e37079f9d2526055f949ca98ddea3fcec78f7","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530084634717.png","hash":"d3ff2a656d1e746688a1bb4b406a2f7d414dd33e","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530084853480.png","hash":"3857660ad4a3eaf40f2f602d899527d8647d92cb","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530140144181.png","hash":"d1092e9363ff6b30c27259463b449c2cf4c11933","modified":1687356228792},{"_id":"public/2023/05/28/GitNote/mycover.jpg","hash":"caa59c7dc0e0e62889469fc9aba86ecae5fa1336","modified":1687356228792},{"_id":"public/2023/05/28/myNFC/mycover.jpg","hash":"15c7297d2f5c5676b43209f105d39eb4b7f757ea","modified":1687356228792},{"_id":"public/images/CardSpending/Untitled 17-1685252073223-23.png","hash":"ca14f250219b657a90a67366b524f7e8ffc1c0de","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/Untitled 8.png","hash":"fef7a64a12dae1c458a43b38aa567c202505f746","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528111218099.png","hash":"00bbf81b49ab19f9b1c290e856733e312be47da2","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112110529.png","hash":"0e2149233e2e8b48667ea29f500e029f6899d47c","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112048700.png","hash":"f606433892290c9e2708280ac1e4886d392dbadf","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112345108.png","hash":"00bbf81b49ab19f9b1c290e856733e312be47da2","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112329509.png","hash":"00bbf81b49ab19f9b1c290e856733e312be47da2","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112408350.png","hash":"3134a08450ce472d91f71d40e80184f11ce971cf","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112547986.png","hash":"7419529110dbedca7ce8095ea174e3c7d06b1eb4","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192310164.png","hash":"1aa0576ee763c1d63a413394a3e829cb3c52caaa","modified":1687356228792},{"_id":"public/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png","hash":"98b3883abc66ffb05f3721c2e6e67e089f7fa018","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192715672.png","hash":"1a932df5887687d34205882a174ebc8a3bdb5721","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526193046611.png","hash":"7f40061ba88bcb68964644f26ab0f7f74ab91da4","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214207511.png","hash":"da2fb493e2f32e82e9032cfb41b4ae27ba368eef","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526215101219.png","hash":"de0e8b5f54660f475f1440f399d8e15bdf3524b8","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230527173207803.png","hash":"cfbe7a3840373761093bee954dea66500feb5cd6","modified":1687356228792},{"_id":"public/images/vitepressNote/2023-05-30_093958.png","hash":"1f312dc815e8f2c387b483c8ee5a9313325b29e6","modified":1687356228792},{"_id":"public/images/myNFC/image-20230528141851384.png","hash":"8f4a2dec569d1ff68eb3b647d3fa1c24f789367f","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530105441661.png","hash":"e26eba9080e20060859b8cc617ca97e23f26239f","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530135914934.png","hash":"116ab459224aff7c8c79c8b89d5e9ed8444a5cc2","modified":1687356228792},{"_id":"public/2023/06/18/100things/mycover.jpg","hash":"761afeded3f7f14d9d253a5aad5df6d3191c552a","modified":1687356228792},{"_id":"public/2023/05/28/WeatherBroadcast/mycover.png","hash":"5efb3811575bf74e4ab93d441d6c25321f6a63a3","modified":1687356228792},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1687356228792},{"_id":"public/js/search/local-search.js","hash":"3ad66c75b4a0fc28a14a5478ee8a19fde72f837f","modified":1687356228792},{"_id":"public/js/search/algolia.js","hash":"3cb3f26227689d55651e45411965c7f106856c76","modified":1687356228792},{"_id":"public/css/index.css","hash":"54f78d802d78c6c77950d00adc0b0b53c8567c1f","modified":1687356228792},{"_id":"public/js/tw_cn.js","hash":"8e47b7ecbd1b94ef87b7a5795120c145100fcba9","modified":1687356228792},{"_id":"public/js/utils.js","hash":"bdcfb1b93c71c2d9cd8dc88a5a881971f830d39d","modified":1687356228792},{"_id":"public/js/main.js","hash":"f70de5c968d066061df195dc2a56f5b485869140","modified":1687356228792},{"_id":"public/img/404.jpg","hash":"030b9c7c9d654b3d67c1249a6e5900bf40c79373","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528110917512.png","hash":"841e66c2925d91c18ddf669a2f69be37cc134c6c","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112458417.png","hash":"eb1c7201b6c64ac70a5d7fd0ad33cfaea3ab0560","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526192517508.png","hash":"448a4ce2d7c697c233f7b18000f7123784046a21","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530140358622.png","hash":"a996120b04ad25bc8dcad5b1107a869eda69b027","modified":1687356228792},{"_id":"public/2023/05/26/hexoConfigNote/mytop_img.png","hash":"4eb479ae912433a0bb0447f1c32db5dd87a1ec85","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528111026749.png","hash":"d83e57c744d4cd70df854e089e183e1621cb0887","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112239798.png","hash":"dd75578b3d2330292028044ad6d27931b8a756eb","modified":1687356228792},{"_id":"public/images/vitepressNote/2023-05-30_094604.png","hash":"c99ae0d52cd572e69f0ad1bc46dbb538bf84c65d","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/image-20230528112524704.png","hash":"a54283ce2dbcc154024ae2ea9fd935e314272efe","modified":1687356228792},{"_id":"public/images/CardSpending/Untitled 1-1685249325027-13.png","hash":"0469b27a0e737e62a7444dadfb537a0faf9e6e06","modified":1687356228792},{"_id":"public/images/CardSpending/Untitled-1685249374298-15.png","hash":"5cd89b259e6b09e266125e3fb152cf25487580d2","modified":1687356228792},{"_id":"public/2023/05/28/CardSpending/mycover.png","hash":"0469b27a0e737e62a7444dadfb537a0faf9e6e06","modified":1687356228792},{"_id":"public/2023/05/26/hexoConfigNote/mycover.png","hash":"687dffa9a63f5614fbb96623ca3ef6d4431b21f6","modified":1687356228792},{"_id":"public/2023/05/28/dumiNote/mycover.png","hash":"d146f5ffdfeb7f93bf8c272c51dd5935edd6af16","modified":1687356228792},{"_id":"public/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg","hash":"f092939b78d717598fd73b64021f1aa8bf10aeaa","modified":1687356228792},{"_id":"public/images/hexoConfigNote/image-20230526214910920.png","hash":"0397818f78688e40d9e569e4f13e0c31ea4493ce","modified":1687356228792},{"_id":"public/img/friend_404.gif","hash":"4c0a482bce3710942aff900d62c48333827e5a53","modified":1687356228792},{"_id":"public/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg","hash":"44e9489ea66fae99d376ad3aa6ee31a0f3d246db","modified":1687356228792},{"_id":"public/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg","hash":"53bbfda9b270bbb51af9bce3992e1372ca7b8e0e","modified":1687356228792},{"_id":"public/images/hexoConfigNote/2023-05-26_152705.png","hash":"aea71474bdde904cfaf84756f1aebda371ef1c3d","modified":1687356228792},{"_id":"public/img/loading.gif","hash":"b9e8d78b86bc48d565e26c8c1ea275c2c758fb0d","modified":1687356228792},{"_id":"public/img/default_top_img.jpg","hash":"5cbf842141b5edccddac8d8937f78156c60c2370","modified":1687356228792},{"_id":"public/images/vitepressNote/image-20230530090814042.png","hash":"cad3445d6de434904b7110cf75ab5c5b672a3da0","modified":1687356228792},{"_id":"public/2023/05/26/hexoConfigNote/mybackground.jpg","hash":"791953f317ad9ec5e89800aea7abd7cf87e8bf4e","modified":1687356228792},{"_id":"public/2023/06/18/TreasureinLife/mycover.png","hash":"c31161beef1d7f373f5d3e1466528f75b8266e0a","modified":1687356228792},{"_id":"public/images/myNFC/video.mp4","hash":"2aace6cd242c197634901473b4b859115d2a3a4a","modified":1687356228792},{"_id":"public/images/WeatherBroadcast/23-05-28-11-33-28.mp4","hash":"04058eaf6a568a9c145d4266417a932521cee0f0","modified":1687356228792}],"Category":[{"name":"生活日常","_id":"clj5sc47e0004f4ssc2ysb3wt"}],"Data":[{"_id":"creativity","data":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}],"Page":[{"title":"categories","date":"2023-06-18T12:48:39.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2023-06-18 20:48:39\ntype: \"categories\"\n---\n","updated":"2023-06-18T13:03:02.256Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clj5sc4730000f4ss769c8j1n","content":"","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"cover":"/img/default_cover.jpg","excerpt":"","more":""},{"title":"tags","date":"2023-06-18T13:30:52.000Z","type":"tags","orderby":"random","order":1,"_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2023-06-18 21:30:52\ntype: \"tags\"\norderby: random\norder: 1\n---\n","updated":"2023-06-18T13:31:18.909Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clj5sc47b0002f4ssclbwf7ng","content":"","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"cover":"/img/default_cover.jpg","excerpt":"","more":""}],"Post":[{"title":"生命中的那些宝藏","date":"2023-06-18T13:09:38.000Z","cover":"2023/06/18/TreasureinLife/mycover.png","_content":"\n# 生命中的宝藏\n\n## 音乐\n\n1. 《我用什么把你留住》\n\n\n\n## 电影\n\n1. 《Flipped》\n2. 《傲慢与偏见》\n\n\n\n## 电视剧\n\n1. 《知否》\n2. \n\n\n\n## 书籍\n\n1. 《》","source":"_posts/TreasureinLife.md","raw":"---\ntitle: 生命中的那些宝藏\ndate: 2023-06-18 21:09:38\ntags: life\ncategories: 生活日常\ncover: mycover.png\n---\n\n# 生命中的宝藏\n\n## 音乐\n\n1. 《我用什么把你留住》\n\n\n\n## 电影\n\n1. 《Flipped》\n2. 《傲慢与偏见》\n\n\n\n## 电视剧\n\n1. 《知否》\n2. \n\n\n\n## 书籍\n\n1. 《》","slug":"TreasureinLife","published":1,"updated":"2023-06-18T13:10:41.237Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc4770001f4ssgnu00b80","content":"<h1 id=\"生命中的宝藏\"><a href=\"#生命中的宝藏\" class=\"headerlink\" title=\"生命中的宝藏\"></a>生命中的宝藏</h1><h2 id=\"音乐\"><a href=\"#音乐\" class=\"headerlink\" title=\"音乐\"></a>音乐</h2><ol>\n<li>《我用什么把你留住》</li>\n</ol>\n<h2 id=\"电影\"><a href=\"#电影\" class=\"headerlink\" title=\"电影\"></a>电影</h2><ol>\n<li>《Flipped》</li>\n<li>《傲慢与偏见》</li>\n</ol>\n<h2 id=\"电视剧\"><a href=\"#电视剧\" class=\"headerlink\" title=\"电视剧\"></a>电视剧</h2><ol>\n<li>《知否》</li>\n<li></li>\n</ol>\n<h2 id=\"书籍\"><a href=\"#书籍\" class=\"headerlink\" title=\"书籍\"></a>书籍</h2><ol>\n<li>《》</li>\n</ol>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"生命中的宝藏\"><a href=\"#生命中的宝藏\" class=\"headerlink\" title=\"生命中的宝藏\"></a>生命中的宝藏</h1><h2 id=\"音乐\"><a href=\"#音乐\" class=\"headerlink\" title=\"音乐\"></a>音乐</h2><ol>\n<li>《我用什么把你留住》</li>\n</ol>\n<h2 id=\"电影\"><a href=\"#电影\" class=\"headerlink\" title=\"电影\"></a>电影</h2><ol>\n<li>《Flipped》</li>\n<li>《傲慢与偏见》</li>\n</ol>\n<h2 id=\"电视剧\"><a href=\"#电视剧\" class=\"headerlink\" title=\"电视剧\"></a>电视剧</h2><ol>\n<li>《知否》</li>\n<li></li>\n</ol>\n<h2 id=\"书籍\"><a href=\"#书籍\" class=\"headerlink\" title=\"书籍\"></a>书籍</h2><ol>\n<li>《》</li>\n</ol>\n"},{"title":"人生中必做的 100 件事","date":"2023-06-18T13:07:56.000Z","cover":"2023/06/18/100things/mycover.jpg","top_img":"2023/06/18/100things/mycover.jpg","_content":"\n\n# 人生中必做的 100 件事\n\n1. 学唱歌！！然后去人多的地方唱歌！！我要唱《我用什么把你留住》\n2. 爬泰山！！\n3. 流利的说英语！！泰裤辣！！\n4. 瘦到110斤！！实现穿衣自由！！\n\n","source":"_posts/100things.md","raw":"---\ntitle: 人生中必做的 100 件事\ndate: 2023-06-18 21:07:56\ntags: life\ncategories: 生活日常\ncover: mycover.jpg\ntop_img: mycover.jpg\n---\n\n\n# 人生中必做的 100 件事\n\n1. 学唱歌！！然后去人多的地方唱歌！！我要唱《我用什么把你留住》\n2. 爬泰山！！\n3. 流利的说英语！！泰裤辣！！\n4. 瘦到110斤！！实现穿衣自由！！\n\n","slug":"100things","published":1,"updated":"2023-06-18T13:19:16.508Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47c0003f4ss28ho23tn","content":"<h1 id=\"人生中必做的-100-件事\"><a href=\"#人生中必做的-100-件事\" class=\"headerlink\" title=\"人生中必做的 100 件事\"></a>人生中必做的 100 件事</h1><ol>\n<li>学唱歌！！然后去人多的地方唱歌！！我要唱《我用什么把你留住》</li>\n<li>爬泰山！！</li>\n<li>流利的说英语！！泰裤辣！！</li>\n<li>瘦到110斤！！实现穿衣自由！！</li>\n</ol>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"人生中必做的-100-件事\"><a href=\"#人生中必做的-100-件事\" class=\"headerlink\" title=\"人生中必做的 100 件事\"></a>人生中必做的 100 件事</h1><ol>\n<li>学唱歌！！然后去人多的地方唱歌！！我要唱《我用什么把你留住》</li>\n<li>爬泰山！！</li>\n<li>流利的说英语！！泰裤辣！！</li>\n<li>瘦到110斤！！实现穿衣自由！！</li>\n</ol>\n"},{"title":"用dumi创建一个属于自己的组件库！","date":"2023-05-28T11:06:05.000Z","swiper_index":999,"cover":"2023/05/28/dumiNote/mycover.png","ai":false,"typora-root-url":"./..","_content":"\n# 用dumi创建一个属于自己的组件库！\n\n## 1、初始化配置\n\n### 1.1 生成网页\n\n参考官网：[初始化 (umijs.org)](https://d.umijs.org/guide/initialize)\n\n```shell\n$ npx create-dumi #通过官方工具创建项目\n? Pick template type › - Use arrow-keys. Return to submit.\n$ ❯   Static Site # 用于构建网站\n$     React Library # 用于构建组件库，有组件例子(选这个)\n$     Theme Package # 主题包开发脚手架，用于开发主题包\n$ npm start\t\t# 安装依赖后启动项目\n```\n\n### 1.2 左上角顶部Nav配置\n\n<img src=\"/../../images/dumiNote/image-20230528191442525.png\" alt=\"image-20230528191442525\" style=\"zoom:70%;\" />\n\n参考：[【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)](https://juejin.cn/post/7222804347830206525)\n\n在`dumic.ts`中配置：\n\n```shell\nexport default defineConfig({\n  // ...\n  themeConfig: {\n    name: 'dumi2-demo',\n    nav: [\n      { title: '介绍', link: '/guide' },\n      { title: '组件', link: '/components/Foo' }, // components会默认自动对应到src文件夹\n    ],\n  },\n  // ...\n```\n\n\n\n## 2、开发组件Button\n\n参考：[【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)](https://juejin.cn/post/7222804347830206525)\n\n### 2.1 编写组件源码\n\n- 新建`src/Button/index.tsx`：组件源码\n\n```tsx\nimport React, { memo } from 'react';\nimport './styles/index.less' // 引入样式\nexport interface ButtonProps {\n  /** 按钮类型 */\n  type?: 'primary' | 'default';\n  /** 按钮文字 */\n  children?: React.ReactNode;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>\n}\n\n/** 按钮组件 */\nconst Button: React.FC<ButtonProps> = (props) => {\n  const { type = 'default', children, onClick } = props\n  return (\n    <button\n      type='button'\n      className={`dumi-btn ${type ? 'dumi-btn-' + type : ''}`}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport default memo(Button);\n```\n\n- 新建`src/Button/index.less`：组件样式\n\n```less\n@import '../../variables.less';\n\n.dumi-btn {\n  font-size: 14px;\n  height: 32px;\n  padding: 4px 15px;\n  border-radius: 6px;\n  transition: all .3s;\n  cursor: pointer;\n}\n\n.dumi-btn-default {\n  background: #fff;\n  color: #333;\n  border: 1px solid #d9d9d9;\n\n  &:hover {\n    color: @dumi-primary;\n    border-color: @dumi-primary;\n  }\n}\n\n.dumi-btn-primary {\n  color: #fff;\n  background: @dumi-primary;\n  border: 1px solid @dumi-primary;\n}\n```\n\n- 在`src/index.ts`中引入后暴露一下\n\n```typescript\nexport { default as Button } from './Button';\n```\n\n\n\n### 2.2 添加demo示例\n\n- 新建`src/Button/demo/base.tsx`：组件的演示代码\n\n```tsx\nimport React from 'react';\nimport { Button } from 'cocolib';\n\nexport default () => {\n\n  return (\n    <>\n      <Button type=\"default\">默认按钮</Button> &nbsp;\n      <Button type=\"primary\">主要按钮</Button>\n    </>\n  );\n}\n```\n\n\n\n### 2.3 添加组件文档\n\n- 新建`src/Button/index.md`：组件文档\n\n```markdown\n---\ncategory: Components\ntitle: Button 按钮 # 组件的标题，会在菜单侧边栏展示\ntoc: content # 在页面右侧展示锚点链接\ngroup: # 分组\n  title: 基础组件 # 所在分组的名称\n  order: 1 # 分组排序，值越小越靠前\n---\n\n# Button 按钮\n\n## 介绍\n\n基础的按钮组件 Button。\n\n## 示例 \n\n<!-- 可以通过code加载示例代码，dumi会帮我们做解析 -->\n<code src=\"./demo/base.tsx\">基础用法</code>\n\n## APi\n\n<!-- 会生成api表格 -->\n| 属性 | 类型                   | 默认值   | 必填 | 说明 |\n| ---- | --------------------- | -------- | ---- | ---- |\n| type | 'primary' | 'default' | 'default |  false  | 按钮类型 |\n```\n\n\n\n### 2.4 添加单元测试 \n\n- 测试框架采用react最常用的jest工具，再配合react配套的单元测试库，安装依赖:\n\n```shell\nnpm i jest @testing-library/react @types/jest ts-jest jest-environment-jsdom jest-less-loader typescript@4 -D\n```\n\n- 新建`/jest.config.js`：在项目根目录新建jest的配置文件，配置信息如下：\n\n```javascript\n/** @type {import('ts-jest').JestConfigWithTsJest} */\nmodule.exports = {\n  preset: 'ts-jest', // 使用ts-jest预设，支持用ts写单元测试\n  testEnvironment: 'jsdom', // 设置测试环境为jsdom环境\n  roots: ['./src'], // 查找src目录中的文件\n  collectCoverage: true, // 统计覆盖率\n  coverageDirectory: 'coverage', // 覆盖率结果输出的文件夹\n  transform: {\n    '\\.(less|css)$': 'jest-less-loader' // 支持less\n  },\n  // 单元覆盖率统计的文件\n  collectCoverageFrom: ['src/**/*.tsx', 'src/**/*.ts', '!src/index.ts', '!src/**/demo/*'],\n};\n```\n\n- 新建`src/Button/__tests__/index.test.tsx`：单元测试代码\n\n```tsx\nimport React from 'react';\nimport { render, fireEvent } from '@testing-library/react';\nimport Button from '..';\n\ndescribe('Button组件', () => {\n  it('能够正确渲染按钮文字', () => {\n    const buttonText = '按钮文字';\n    const { getByRole } = render(<Button>{buttonText}</Button>);\n    const buttonElement = getByRole('button');\n    expect(buttonElement.innerHTML).toBe(buttonText);\n  });\n\n  it('能够正确渲染默认样式的按钮', () => {\n    const { getByRole } = render(<Button >默认按钮</Button>);\n    const buttonElement = getByRole('button');\n    expect(buttonElement.classList.contains('dumi-btn')).toBe(true);\n  });\n\n  it('能够正确渲染主要样式的按钮', () => {\n    const { getByRole } = render(<Button type=\"primary\">主要按钮</Button>);\n    const buttonElement = getByRole('button');\n    expect(buttonElement.classList.contains('dumi-btn-primary')).toBe(true);\n  });\n\n  it('能够触发点击事件', () => {\n    const handleClick = jest.fn();\n    const { getByRole } = render(<Button type=\"primary\" onClick={handleClick}>点击按钮</Button>);\n    const buttonElement = getByRole('button');\n    fireEvent.click(buttonElement);\n    // 断言函数被调用了一次。\n    expect(handleClick).toHaveBeenCalledTimes(1);\n  });\n});\n```\n\n- 执行一下单元测试:\n\n```shell\n$ npx jest\n```\n\n- 项目根目录下会生成测试报告的静态站点**coverage**文件夹，在浏览器打开`coverage/lcov-report/index.html`文件，即可看到测试报告\n\n<img src=\"/../../images/dumiNote/image-20230528203012828.png\" alt=\"image-20230528203012828\" style=\"zoom:67%;\" />\n\n## 3、二次开发\n\n有时候除了从0封装基础组件之外，还会基于antd等组件库进行二次开发，方式和开发基础组件是一样的。\n\n\n\n\n\n## 4、函数库开发\n\n","source":"_posts/dumiNote.md","raw":"---\ntitle: 用dumi创建一个属于自己的组件库！\ndate: 2023-05-28 19:06:05\ntags: 前端工程化 react\nswiper_index: 999\ncover: mycover.png\nai: false\ntypora-root-url: ./.. \n---\n\n# 用dumi创建一个属于自己的组件库！\n\n## 1、初始化配置\n\n### 1.1 生成网页\n\n参考官网：[初始化 (umijs.org)](https://d.umijs.org/guide/initialize)\n\n```shell\n$ npx create-dumi #通过官方工具创建项目\n? Pick template type › - Use arrow-keys. Return to submit.\n$ ❯   Static Site # 用于构建网站\n$     React Library # 用于构建组件库，有组件例子(选这个)\n$     Theme Package # 主题包开发脚手架，用于开发主题包\n$ npm start\t\t# 安装依赖后启动项目\n```\n\n### 1.2 左上角顶部Nav配置\n\n<img src=\"/../../images/dumiNote/image-20230528191442525.png\" alt=\"image-20230528191442525\" style=\"zoom:70%;\" />\n\n参考：[【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)](https://juejin.cn/post/7222804347830206525)\n\n在`dumic.ts`中配置：\n\n```shell\nexport default defineConfig({\n  // ...\n  themeConfig: {\n    name: 'dumi2-demo',\n    nav: [\n      { title: '介绍', link: '/guide' },\n      { title: '组件', link: '/components/Foo' }, // components会默认自动对应到src文件夹\n    ],\n  },\n  // ...\n```\n\n\n\n## 2、开发组件Button\n\n参考：[【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)](https://juejin.cn/post/7222804347830206525)\n\n### 2.1 编写组件源码\n\n- 新建`src/Button/index.tsx`：组件源码\n\n```tsx\nimport React, { memo } from 'react';\nimport './styles/index.less' // 引入样式\nexport interface ButtonProps {\n  /** 按钮类型 */\n  type?: 'primary' | 'default';\n  /** 按钮文字 */\n  children?: React.ReactNode;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>\n}\n\n/** 按钮组件 */\nconst Button: React.FC<ButtonProps> = (props) => {\n  const { type = 'default', children, onClick } = props\n  return (\n    <button\n      type='button'\n      className={`dumi-btn ${type ? 'dumi-btn-' + type : ''}`}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport default memo(Button);\n```\n\n- 新建`src/Button/index.less`：组件样式\n\n```less\n@import '../../variables.less';\n\n.dumi-btn {\n  font-size: 14px;\n  height: 32px;\n  padding: 4px 15px;\n  border-radius: 6px;\n  transition: all .3s;\n  cursor: pointer;\n}\n\n.dumi-btn-default {\n  background: #fff;\n  color: #333;\n  border: 1px solid #d9d9d9;\n\n  &:hover {\n    color: @dumi-primary;\n    border-color: @dumi-primary;\n  }\n}\n\n.dumi-btn-primary {\n  color: #fff;\n  background: @dumi-primary;\n  border: 1px solid @dumi-primary;\n}\n```\n\n- 在`src/index.ts`中引入后暴露一下\n\n```typescript\nexport { default as Button } from './Button';\n```\n\n\n\n### 2.2 添加demo示例\n\n- 新建`src/Button/demo/base.tsx`：组件的演示代码\n\n```tsx\nimport React from 'react';\nimport { Button } from 'cocolib';\n\nexport default () => {\n\n  return (\n    <>\n      <Button type=\"default\">默认按钮</Button> &nbsp;\n      <Button type=\"primary\">主要按钮</Button>\n    </>\n  );\n}\n```\n\n\n\n### 2.3 添加组件文档\n\n- 新建`src/Button/index.md`：组件文档\n\n```markdown\n---\ncategory: Components\ntitle: Button 按钮 # 组件的标题，会在菜单侧边栏展示\ntoc: content # 在页面右侧展示锚点链接\ngroup: # 分组\n  title: 基础组件 # 所在分组的名称\n  order: 1 # 分组排序，值越小越靠前\n---\n\n# Button 按钮\n\n## 介绍\n\n基础的按钮组件 Button。\n\n## 示例 \n\n<!-- 可以通过code加载示例代码，dumi会帮我们做解析 -->\n<code src=\"./demo/base.tsx\">基础用法</code>\n\n## APi\n\n<!-- 会生成api表格 -->\n| 属性 | 类型                   | 默认值   | 必填 | 说明 |\n| ---- | --------------------- | -------- | ---- | ---- |\n| type | 'primary' | 'default' | 'default |  false  | 按钮类型 |\n```\n\n\n\n### 2.4 添加单元测试 \n\n- 测试框架采用react最常用的jest工具，再配合react配套的单元测试库，安装依赖:\n\n```shell\nnpm i jest @testing-library/react @types/jest ts-jest jest-environment-jsdom jest-less-loader typescript@4 -D\n```\n\n- 新建`/jest.config.js`：在项目根目录新建jest的配置文件，配置信息如下：\n\n```javascript\n/** @type {import('ts-jest').JestConfigWithTsJest} */\nmodule.exports = {\n  preset: 'ts-jest', // 使用ts-jest预设，支持用ts写单元测试\n  testEnvironment: 'jsdom', // 设置测试环境为jsdom环境\n  roots: ['./src'], // 查找src目录中的文件\n  collectCoverage: true, // 统计覆盖率\n  coverageDirectory: 'coverage', // 覆盖率结果输出的文件夹\n  transform: {\n    '\\.(less|css)$': 'jest-less-loader' // 支持less\n  },\n  // 单元覆盖率统计的文件\n  collectCoverageFrom: ['src/**/*.tsx', 'src/**/*.ts', '!src/index.ts', '!src/**/demo/*'],\n};\n```\n\n- 新建`src/Button/__tests__/index.test.tsx`：单元测试代码\n\n```tsx\nimport React from 'react';\nimport { render, fireEvent } from '@testing-library/react';\nimport Button from '..';\n\ndescribe('Button组件', () => {\n  it('能够正确渲染按钮文字', () => {\n    const buttonText = '按钮文字';\n    const { getByRole } = render(<Button>{buttonText}</Button>);\n    const buttonElement = getByRole('button');\n    expect(buttonElement.innerHTML).toBe(buttonText);\n  });\n\n  it('能够正确渲染默认样式的按钮', () => {\n    const { getByRole } = render(<Button >默认按钮</Button>);\n    const buttonElement = getByRole('button');\n    expect(buttonElement.classList.contains('dumi-btn')).toBe(true);\n  });\n\n  it('能够正确渲染主要样式的按钮', () => {\n    const { getByRole } = render(<Button type=\"primary\">主要按钮</Button>);\n    const buttonElement = getByRole('button');\n    expect(buttonElement.classList.contains('dumi-btn-primary')).toBe(true);\n  });\n\n  it('能够触发点击事件', () => {\n    const handleClick = jest.fn();\n    const { getByRole } = render(<Button type=\"primary\" onClick={handleClick}>点击按钮</Button>);\n    const buttonElement = getByRole('button');\n    fireEvent.click(buttonElement);\n    // 断言函数被调用了一次。\n    expect(handleClick).toHaveBeenCalledTimes(1);\n  });\n});\n```\n\n- 执行一下单元测试:\n\n```shell\n$ npx jest\n```\n\n- 项目根目录下会生成测试报告的静态站点**coverage**文件夹，在浏览器打开`coverage/lcov-report/index.html`文件，即可看到测试报告\n\n<img src=\"/../../images/dumiNote/image-20230528203012828.png\" alt=\"image-20230528203012828\" style=\"zoom:67%;\" />\n\n## 3、二次开发\n\n有时候除了从0封装基础组件之外，还会基于antd等组件库进行二次开发，方式和开发基础组件是一样的。\n\n\n\n\n\n## 4、函数库开发\n\n","slug":"dumiNote","published":1,"updated":"2023-06-07T09:38:32.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47g0006f4ss5g0p7w35","content":"<h1 id=\"用dumi创建一个属于自己的组件库！\"><a href=\"#用dumi创建一个属于自己的组件库！\" class=\"headerlink\" title=\"用dumi创建一个属于自己的组件库！\"></a>用dumi创建一个属于自己的组件库！</h1><h2 id=\"1、初始化配置\"><a href=\"#1、初始化配置\" class=\"headerlink\" title=\"1、初始化配置\"></a>1、初始化配置</h2><h3 id=\"1-1-生成网页\"><a href=\"#1-1-生成网页\" class=\"headerlink\" title=\"1.1 生成网页\"></a>1.1 生成网页</h3><p>参考官网：<a href=\"https://d.umijs.org/guide/initialize\">初始化 (umijs.org)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">npx create-dumi <span class=\"comment\">#通过官方工具创建项目</span></span></span><br><span class=\"line\">? Pick template type › - Use arrow-keys. Return to submit.</span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">❯   Static Site <span class=\"comment\"># 用于构建网站</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">    React Library <span class=\"comment\"># 用于构建组件库，有组件例子(选这个)</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">    Theme Package <span class=\"comment\"># 主题包开发脚手架，用于开发主题包</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">npm start\t\t<span class=\"comment\"># 安装依赖后启动项目</span></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-左上角顶部Nav配置\"><a href=\"#1-2-左上角顶部Nav配置\" class=\"headerlink\" title=\"1.2 左上角顶部Nav配置\"></a>1.2 左上角顶部Nav配置</h3><img src=\"/../../images/dumiNote/image-20230528191442525.png\" alt=\"image-20230528191442525\" style=\"zoom:70%;\">\n\n<p>参考：<a href=\"https://juejin.cn/post/7222804347830206525\">【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)</a></p>\n<p>在<code>dumic.ts</code>中配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export default defineConfig(&#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  themeConfig: &#123;</span><br><span class=\"line\">    name: &#x27;dumi2-demo&#x27;,</span><br><span class=\"line\">    nav: [</span><br><span class=\"line\">      &#123; title: &#x27;介绍&#x27;, link: &#x27;/guide&#x27; &#125;,</span><br><span class=\"line\">      &#123; title: &#x27;组件&#x27;, link: &#x27;/components/Foo&#x27; &#125;, // components会默认自动对应到src文件夹</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  // ...</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2、开发组件Button\"><a href=\"#2、开发组件Button\" class=\"headerlink\" title=\"2、开发组件Button\"></a>2、开发组件Button</h2><p>参考：<a href=\"https://juejin.cn/post/7222804347830206525\">【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)</a></p>\n<h3 id=\"2-1-编写组件源码\"><a href=\"#2-1-编写组件源码\" class=\"headerlink\" title=\"2.1 编写组件源码\"></a>2.1 编写组件源码</h3><ul>\n<li>新建<code>src/Button/index.tsx</code>：组件源码</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span>, &#123; memo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./styles/index.less&#x27;</span> <span class=\"comment\">// 引入样式</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ButtonProps</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/** 按钮类型 */</span></span><br><span class=\"line\">  <span class=\"keyword\">type</span>?: <span class=\"string\">&#x27;primary&#x27;</span> | <span class=\"string\">&#x27;default&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">/** 按钮文字 */</span></span><br><span class=\"line\">  children?: <span class=\"title class_\">React</span>.<span class=\"property\">ReactNode</span>;</span><br><span class=\"line\">  onClick?: <span class=\"title class_\">React</span>.<span class=\"property\">MouseEventHandler</span>&lt;<span class=\"title class_\">HTMLButtonElement</span>&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 按钮组件 */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Button</span>: <span class=\"title class_\">React</span>.<span class=\"property\">FC</span>&lt;<span class=\"title class_\">ButtonProps</span>&gt; = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; <span class=\"keyword\">type</span> = <span class=\"string\">&#x27;default&#x27;</span>, children, onClick &#125; = props</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">type</span>=<span class=\"string\">&#x27;button&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">dumi-btn</span> $&#123;<span class=\"attr\">type</span> ? &#x27;<span class=\"attr\">dumi-btn-</span>&#x27; + <span class=\"attr\">type</span> <span class=\"attr\">:</span> &#x27;&#x27;&#125;`&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;onClick&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    &gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      &#123;children&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">memo</span>(<span class=\"title class_\">Button</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>新建<code>src/Button/index.less</code>：组件样式</li>\n</ul>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;../../variables.less&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.dumi-btn</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">32px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">4px</span> <span class=\"number\">15px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">6px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all .<span class=\"number\">3s</span>;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.dumi-btn-default</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d9d9d9</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.dumi-btn-primary</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在<code>src/index.ts</code>中引入后暴露一下</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> <span class=\"keyword\">as</span> <span class=\"title class_\">Button</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Button&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-2-添加demo示例\"><a href=\"#2-2-添加demo示例\" class=\"headerlink\" title=\"2.2 添加demo示例\"></a>2.2 添加demo示例</h3><ul>\n<li>新建<code>src/Button/demo/base.tsx</code>：组件的演示代码</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Button</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;cocolib&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> () =&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;default&quot;</span>&gt;</span>默认按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span> <span class=\"symbol\">&amp;nbsp;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span>&gt;</span>主要按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-3-添加组件文档\"><a href=\"#2-3-添加组件文档\" class=\"headerlink\" title=\"2.3 添加组件文档\"></a>2.3 添加组件文档</h3><ul>\n<li>新建<code>src/Button/index.md</code>：组件文档</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">category: Components</span><br><span class=\"line\">title: Button 按钮 # 组件的标题，会在菜单侧边栏展示</span><br><span class=\"line\">toc: content # 在页面右侧展示锚点链接</span><br><span class=\"line\">group: # 分组</span><br><span class=\"line\">  title: 基础组件 # 所在分组的名称</span><br><span class=\"line\"><span class=\"section\">  order: 1 # 分组排序，值越小越靠前</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># Button 按钮</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## 介绍</span></span><br><span class=\"line\"></span><br><span class=\"line\">基础的按钮组件 Button。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## 示例 </span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 可以通过code加载示例代码，dumi会帮我们做解析 --&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">code</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./demo/base.tsx&quot;</span>&gt;</span></span>基础用法<span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## APi</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 会生成api表格 --&gt;</span><br><span class=\"line\">| 属性 | 类型                   | 默认值   | 必填 | 说明 |</span><br><span class=\"line\">| ---- | --------------------- | -------- | ---- | ---- |</span><br><span class=\"line\">| type | &#x27;primary&#x27; | &#x27;default&#x27; | &#x27;default |  false  | 按钮类型 |</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-4-添加单元测试\"><a href=\"#2-4-添加单元测试\" class=\"headerlink\" title=\"2.4 添加单元测试\"></a>2.4 添加单元测试</h3><ul>\n<li>测试框架采用react最常用的jest工具，再配合react配套的单元测试库，安装依赖:</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i jest @testing-library/react @types/jest ts-jest jest-environment-jsdom jest-less-loader typescript@4 -D</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>新建<code>/jest.config.js</code>：在项目根目录新建jest的配置文件，配置信息如下：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type</span> &#123;<span class=\"type\">import(&#x27;ts-jest&#x27;).JestConfigWithTsJest</span>&#125; */</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">preset</span>: <span class=\"string\">&#x27;ts-jest&#x27;</span>, <span class=\"comment\">// 使用ts-jest预设，支持用ts写单元测试</span></span><br><span class=\"line\">  <span class=\"attr\">testEnvironment</span>: <span class=\"string\">&#x27;jsdom&#x27;</span>, <span class=\"comment\">// 设置测试环境为jsdom环境</span></span><br><span class=\"line\">  <span class=\"attr\">roots</span>: [<span class=\"string\">&#x27;./src&#x27;</span>], <span class=\"comment\">// 查找src目录中的文件</span></span><br><span class=\"line\">  <span class=\"attr\">collectCoverage</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 统计覆盖率</span></span><br><span class=\"line\">  <span class=\"attr\">coverageDirectory</span>: <span class=\"string\">&#x27;coverage&#x27;</span>, <span class=\"comment\">// 覆盖率结果输出的文件夹</span></span><br><span class=\"line\">  <span class=\"attr\">transform</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;\\.(less|css)$&#x27;</span>: <span class=\"string\">&#x27;jest-less-loader&#x27;</span> <span class=\"comment\">// 支持less</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 单元覆盖率统计的文件</span></span><br><span class=\"line\">  <span class=\"attr\">collectCoverageFrom</span>: [<span class=\"string\">&#x27;src/**/*.tsx&#x27;</span>, <span class=\"string\">&#x27;src/**/*.ts&#x27;</span>, <span class=\"string\">&#x27;!src/index.ts&#x27;</span>, <span class=\"string\">&#x27;!src/**/demo/*&#x27;</span>],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>新建<code>src/Button/__tests__/index.test.tsx</code>：单元测试代码</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; render, fireEvent &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@testing-library/react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Button</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;..&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">describe</span>(<span class=\"string\">&#x27;Button组件&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够正确渲染按钮文字&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonText = <span class=\"string\">&#x27;按钮文字&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span>&gt;</span>&#123;buttonText&#125;<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(buttonElement.<span class=\"property\">innerHTML</span>).<span class=\"title function_\">toBe</span>(buttonText);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够正确渲染默认样式的按钮&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> &gt;</span>默认按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(buttonElement.<span class=\"property\">classList</span>.<span class=\"title function_\">contains</span>(<span class=\"string\">&#x27;dumi-btn&#x27;</span>)).<span class=\"title function_\">toBe</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够正确渲染主要样式的按钮&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span>&gt;</span>主要按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(buttonElement.<span class=\"property\">classList</span>.<span class=\"title function_\">contains</span>(<span class=\"string\">&#x27;dumi-btn-primary&#x27;</span>)).<span class=\"title function_\">toBe</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够触发点击事件&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleClick = jest.<span class=\"title function_\">fn</span>();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleClick&#125;</span>&gt;</span>点击按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    fireEvent.<span class=\"title function_\">click</span>(buttonElement);</span><br><span class=\"line\">    <span class=\"comment\">// 断言函数被调用了一次。</span></span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(handleClick).<span class=\"title function_\">toHaveBeenCalledTimes</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>执行一下单元测试:</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">npx jest</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>项目根目录下会生成测试报告的静态站点<strong>coverage</strong>文件夹，在浏览器打开<code>coverage/lcov-report/index.html</code>文件，即可看到测试报告</li>\n</ul>\n<img src=\"/../../images/dumiNote/image-20230528203012828.png\" alt=\"image-20230528203012828\" style=\"zoom:67%;\">\n\n<h2 id=\"3、二次开发\"><a href=\"#3、二次开发\" class=\"headerlink\" title=\"3、二次开发\"></a>3、二次开发</h2><p>有时候除了从0封装基础组件之外，还会基于antd等组件库进行二次开发，方式和开发基础组件是一样的。</p>\n<h2 id=\"4、函数库开发\"><a href=\"#4、函数库开发\" class=\"headerlink\" title=\"4、函数库开发\"></a>4、函数库开发</h2>","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"用dumi创建一个属于自己的组件库！\"><a href=\"#用dumi创建一个属于自己的组件库！\" class=\"headerlink\" title=\"用dumi创建一个属于自己的组件库！\"></a>用dumi创建一个属于自己的组件库！</h1><h2 id=\"1、初始化配置\"><a href=\"#1、初始化配置\" class=\"headerlink\" title=\"1、初始化配置\"></a>1、初始化配置</h2><h3 id=\"1-1-生成网页\"><a href=\"#1-1-生成网页\" class=\"headerlink\" title=\"1.1 生成网页\"></a>1.1 生成网页</h3><p>参考官网：<a href=\"https://d.umijs.org/guide/initialize\">初始化 (umijs.org)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">npx create-dumi <span class=\"comment\">#通过官方工具创建项目</span></span></span><br><span class=\"line\">? Pick template type › - Use arrow-keys. Return to submit.</span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">❯   Static Site <span class=\"comment\"># 用于构建网站</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">    React Library <span class=\"comment\"># 用于构建组件库，有组件例子(选这个)</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">    Theme Package <span class=\"comment\"># 主题包开发脚手架，用于开发主题包</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">npm start\t\t<span class=\"comment\"># 安装依赖后启动项目</span></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-左上角顶部Nav配置\"><a href=\"#1-2-左上角顶部Nav配置\" class=\"headerlink\" title=\"1.2 左上角顶部Nav配置\"></a>1.2 左上角顶部Nav配置</h3><img src=\"/../../images/dumiNote/image-20230528191442525.png\" alt=\"image-20230528191442525\" style=\"zoom:70%;\">\n\n<p>参考：<a href=\"https://juejin.cn/post/7222804347830206525\">【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)</a></p>\n<p>在<code>dumic.ts</code>中配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export default defineConfig(&#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  themeConfig: &#123;</span><br><span class=\"line\">    name: &#x27;dumi2-demo&#x27;,</span><br><span class=\"line\">    nav: [</span><br><span class=\"line\">      &#123; title: &#x27;介绍&#x27;, link: &#x27;/guide&#x27; &#125;,</span><br><span class=\"line\">      &#123; title: &#x27;组件&#x27;, link: &#x27;/components/Foo&#x27; &#125;, // components会默认自动对应到src文件夹</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  // ...</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2、开发组件Button\"><a href=\"#2、开发组件Button\" class=\"headerlink\" title=\"2、开发组件Button\"></a>2、开发组件Button</h2><p>参考：<a href=\"https://juejin.cn/post/7222804347830206525\">【前端工程化】使用dumi2搭建React组件库和函数库详细教程和最佳实践 - 掘金 (juejin.cn)</a></p>\n<h3 id=\"2-1-编写组件源码\"><a href=\"#2-1-编写组件源码\" class=\"headerlink\" title=\"2.1 编写组件源码\"></a>2.1 编写组件源码</h3><ul>\n<li>新建<code>src/Button/index.tsx</code>：组件源码</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span>, &#123; memo &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;./styles/index.less&#x27;</span> <span class=\"comment\">// 引入样式</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ButtonProps</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/** 按钮类型 */</span></span><br><span class=\"line\">  <span class=\"keyword\">type</span>?: <span class=\"string\">&#x27;primary&#x27;</span> | <span class=\"string\">&#x27;default&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">/** 按钮文字 */</span></span><br><span class=\"line\">  children?: <span class=\"title class_\">React</span>.<span class=\"property\">ReactNode</span>;</span><br><span class=\"line\">  onClick?: <span class=\"title class_\">React</span>.<span class=\"property\">MouseEventHandler</span>&lt;<span class=\"title class_\">HTMLButtonElement</span>&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 按钮组件 */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Button</span>: <span class=\"title class_\">React</span>.<span class=\"property\">FC</span>&lt;<span class=\"title class_\">ButtonProps</span>&gt; = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; <span class=\"keyword\">type</span> = <span class=\"string\">&#x27;default&#x27;</span>, children, onClick &#125; = props</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">type</span>=<span class=\"string\">&#x27;button&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">dumi-btn</span> $&#123;<span class=\"attr\">type</span> ? &#x27;<span class=\"attr\">dumi-btn-</span>&#x27; + <span class=\"attr\">type</span> <span class=\"attr\">:</span> &#x27;&#x27;&#125;`&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;onClick&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    &gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      &#123;children&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">memo</span>(<span class=\"title class_\">Button</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>新建<code>src/Button/index.less</code>：组件样式</li>\n</ul>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&#x27;../../variables.less&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.dumi-btn</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">32px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">4px</span> <span class=\"number\">15px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">6px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all .<span class=\"number\">3s</span>;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.dumi-btn-default</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d9d9d9</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.dumi-btn-primary</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">@dumi-primary</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在<code>src/index.ts</code>中引入后暴露一下</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123; <span class=\"keyword\">default</span> <span class=\"keyword\">as</span> <span class=\"title class_\">Button</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Button&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-2-添加demo示例\"><a href=\"#2-2-添加demo示例\" class=\"headerlink\" title=\"2.2 添加demo示例\"></a>2.2 添加demo示例</h3><ul>\n<li>新建<code>src/Button/demo/base.tsx</code>：组件的演示代码</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Button</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;cocolib&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> () =&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;default&quot;</span>&gt;</span>默认按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span> <span class=\"symbol\">&amp;nbsp;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span>&gt;</span>主要按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-3-添加组件文档\"><a href=\"#2-3-添加组件文档\" class=\"headerlink\" title=\"2.3 添加组件文档\"></a>2.3 添加组件文档</h3><ul>\n<li>新建<code>src/Button/index.md</code>：组件文档</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">category: Components</span><br><span class=\"line\">title: Button 按钮 # 组件的标题，会在菜单侧边栏展示</span><br><span class=\"line\">toc: content # 在页面右侧展示锚点链接</span><br><span class=\"line\">group: # 分组</span><br><span class=\"line\">  title: 基础组件 # 所在分组的名称</span><br><span class=\"line\"><span class=\"section\">  order: 1 # 分组排序，值越小越靠前</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># Button 按钮</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## 介绍</span></span><br><span class=\"line\"></span><br><span class=\"line\">基础的按钮组件 Button。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## 示例 </span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 可以通过code加载示例代码，dumi会帮我们做解析 --&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">code</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./demo/base.tsx&quot;</span>&gt;</span></span>基础用法<span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## APi</span></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 会生成api表格 --&gt;</span><br><span class=\"line\">| 属性 | 类型                   | 默认值   | 必填 | 说明 |</span><br><span class=\"line\">| ---- | --------------------- | -------- | ---- | ---- |</span><br><span class=\"line\">| type | &#x27;primary&#x27; | &#x27;default&#x27; | &#x27;default |  false  | 按钮类型 |</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-4-添加单元测试\"><a href=\"#2-4-添加单元测试\" class=\"headerlink\" title=\"2.4 添加单元测试\"></a>2.4 添加单元测试</h3><ul>\n<li>测试框架采用react最常用的jest工具，再配合react配套的单元测试库，安装依赖:</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i jest @testing-library/react @types/jest ts-jest jest-environment-jsdom jest-less-loader typescript@4 -D</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>新建<code>/jest.config.js</code>：在项目根目录新建jest的配置文件，配置信息如下：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type</span> &#123;<span class=\"type\">import(&#x27;ts-jest&#x27;).JestConfigWithTsJest</span>&#125; */</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">preset</span>: <span class=\"string\">&#x27;ts-jest&#x27;</span>, <span class=\"comment\">// 使用ts-jest预设，支持用ts写单元测试</span></span><br><span class=\"line\">  <span class=\"attr\">testEnvironment</span>: <span class=\"string\">&#x27;jsdom&#x27;</span>, <span class=\"comment\">// 设置测试环境为jsdom环境</span></span><br><span class=\"line\">  <span class=\"attr\">roots</span>: [<span class=\"string\">&#x27;./src&#x27;</span>], <span class=\"comment\">// 查找src目录中的文件</span></span><br><span class=\"line\">  <span class=\"attr\">collectCoverage</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 统计覆盖率</span></span><br><span class=\"line\">  <span class=\"attr\">coverageDirectory</span>: <span class=\"string\">&#x27;coverage&#x27;</span>, <span class=\"comment\">// 覆盖率结果输出的文件夹</span></span><br><span class=\"line\">  <span class=\"attr\">transform</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;\\.(less|css)$&#x27;</span>: <span class=\"string\">&#x27;jest-less-loader&#x27;</span> <span class=\"comment\">// 支持less</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 单元覆盖率统计的文件</span></span><br><span class=\"line\">  <span class=\"attr\">collectCoverageFrom</span>: [<span class=\"string\">&#x27;src/**/*.tsx&#x27;</span>, <span class=\"string\">&#x27;src/**/*.ts&#x27;</span>, <span class=\"string\">&#x27;!src/index.ts&#x27;</span>, <span class=\"string\">&#x27;!src/**/demo/*&#x27;</span>],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>新建<code>src/Button/__tests__/index.test.tsx</code>：单元测试代码</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; render, fireEvent &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@testing-library/react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Button</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;..&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">describe</span>(<span class=\"string\">&#x27;Button组件&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够正确渲染按钮文字&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonText = <span class=\"string\">&#x27;按钮文字&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span>&gt;</span>&#123;buttonText&#125;<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(buttonElement.<span class=\"property\">innerHTML</span>).<span class=\"title function_\">toBe</span>(buttonText);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够正确渲染默认样式的按钮&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> &gt;</span>默认按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(buttonElement.<span class=\"property\">classList</span>.<span class=\"title function_\">contains</span>(<span class=\"string\">&#x27;dumi-btn&#x27;</span>)).<span class=\"title function_\">toBe</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够正确渲染主要样式的按钮&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span>&gt;</span>主要按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(buttonElement.<span class=\"property\">classList</span>.<span class=\"title function_\">contains</span>(<span class=\"string\">&#x27;dumi-btn-primary&#x27;</span>)).<span class=\"title function_\">toBe</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;能够触发点击事件&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleClick = jest.<span class=\"title function_\">fn</span>();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; getByRole &#125; = <span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleClick&#125;</span>&gt;</span>点击按钮<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> buttonElement = <span class=\"title function_\">getByRole</span>(<span class=\"string\">&#x27;button&#x27;</span>);</span><br><span class=\"line\">    fireEvent.<span class=\"title function_\">click</span>(buttonElement);</span><br><span class=\"line\">    <span class=\"comment\">// 断言函数被调用了一次。</span></span><br><span class=\"line\">    <span class=\"title function_\">expect</span>(handleClick).<span class=\"title function_\">toHaveBeenCalledTimes</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>执行一下单元测试:</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">npx jest</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>项目根目录下会生成测试报告的静态站点<strong>coverage</strong>文件夹，在浏览器打开<code>coverage/lcov-report/index.html</code>文件，即可看到测试报告</li>\n</ul>\n<img src=\"/../../images/dumiNote/image-20230528203012828.png\" alt=\"image-20230528203012828\" style=\"zoom:67%;\">\n\n<h2 id=\"3、二次开发\"><a href=\"#3、二次开发\" class=\"headerlink\" title=\"3、二次开发\"></a>3、二次开发</h2><p>有时候除了从0封装基础组件之外，还会基于antd等组件库进行二次开发，方式和开发基础组件是一样的。</p>\n<h2 id=\"4、函数库开发\"><a href=\"#4、函数库开发\" class=\"headerlink\" title=\"4、函数库开发\"></a>4、函数库开发</h2>"},{"title":"Git踩坑记录","date":"2023-05-28T01:35:17.000Z","swiper_index":1,"top_group_index":2,"cover":"2023/05/28/GitNote/mycover.jpg","ai":true,"typora-root-url":"./..","_content":"# Git踩坑记录\n\n## 前言\n\n记录git报错场景：\n\n我想把本地已经写好的项目上传到git，根据网上的某些教程，我依次进行了如下操作:\n\n参考：[git上传文件基本命令](https://blog.csdn.net/weixin_43682721/article/details/88570397)\n\n在我要上传项目的根目录，鼠标右键`Git bash Here`\t\n\n```shell\ngit init\t#把这个目录变成git可以管理的仓库（ repositories ）\ngit remote add origin https://github.com/XX/XX.git #添加新的git方式的origin, github上创建好的仓库和本地仓库进行关联\ngit pull origin master\t#把远程仓库更新与本地分支合并\n```\n\n此时报错：`fatal: couldn't find remote ref master`，但如果是新建的**仓库（ repositories ）**的话在pull代码的时候，出现这个提示，可以忽略不计。\n\n```shell\ngit add .\t#添加文件夹下的所有文件到缓存区，我执行了两次，第一次有三个warning，感觉没起作用\ngit commit -m \"这里是注释\" \t #提交添加到缓存区的文件\n```\n\n此时报错：`error: pathspec 'commit”' did not match any file(s) known to git`，发现是中文引号，改成英文引号即可（已验证），单引号也会报错！！必须是英文双引号（这是网上说的，我还没验证）\n\n<img src=\"/images/GitNote/image-20230528094312668.png\" alt=\"image-20230528094312668\" style=\"zoom:80%;\" />\n\n```shell\ngit push -u origin master\t#把本地库的所有内容推送到远程仓库（github）上\n```\n\n此时出现报错：`fatal: unable to access 'https://github.com/XX/': Recv failure: Connection was reset`\n\n参考：[git:上传代码时，出现fatal: unable to access ‘XXX‘: Recv failure: Connection was reset 错误解决方法](https://blog.csdn.net/m0_69087087/article/details/128838186)\n\n应该是网络的问题，管理员模式打开cmd，运行下面的命令\n\n```shell\ngit config --global --unset http.proxy\ngit config --global --unset https.proxy\nipconfig/flushdns\n```\n\n成功解决！！！\n\n<img src=\"/images/GitNote/image-20230528095326943.png\" alt=\"image-20230528095326943\" style=\"zoom: 67%;\" />\n\n登录Github，发现多了一个分支`master`,但是当我想要将它与`main`分支合并的时候，出大问题了：\n\n<img src=\"/images/GitNote/image-20230528100012067.png\" alt=\"image-20230528100012067\" style=\"zoom: 33%;\" />\n\n最后参考：[github：master提交项目到远程仓库出现“There isn’t anything to compare.”_](https://blog.csdn.net/Zero_Wong/article/details/123882159)\n\n依次执行下面命令：\n\n```shell\n#1.将代码上传到GitHub的默认main分支（新）\n1.git --version    #查看版本\n2.git config --global init.defaultBranch main   #git在2.28.0上，重新设置git默认分支为main\n\n#2.在执行提交操作即可\n1.git init       //工作空间创建.git文件夹（默认隐藏了该文件夹）\n2.git add .      //添加到暂存区\n3.git commit -m \"你的提交注释注释\"\n4.git remote add origin http://xxxxxxxxx.git   //本地仓库和远程github关联\n5.git pull --rebase origin main  //远程有readme.md，拉一下\n6.git push -u origin main        //代码合并\n```\n\n**成功解决！！！**最后把之前创建的`master`分支删除就可以啦~\n\n\n\n<img src=\"/images/GitNote/image-20230528101552880.png\" alt=\"image-20230528101552880\" style=\"zoom:80%;\" />\n\n在要删除分支旁边，单击下面的图标即可。\n\n![分支列表中某个分支的屏幕截图。 回收站图标以橙色轮廓突出显示。](/images/GitNote/branches-delete.png)\n\n\n\n## 1、工作区与版本库\n\n**工作区：**就是你在电脑上看到的目录，比如目录下testgit里的文件(.git隐藏目录版本库除外)。或者以后需要再新建的目录文件等等都属于工作区范畴。\n**版本库(Repository)**：工作区有一个隐藏目录`.git`,这个不属于工作区，这是版本库。其中版本库里面存了很多东西，其中最重要的就是**stage(暂存区)**，还有Git为我们自动创建了第一个分支**master**,以及指向master的一个指针**HEAD**。\n\n## 2、有两种获取 Git 项目仓库的方式\n\n1. 将尚未进行版本控制的本地目录转换为 Git 仓库；\n2. 从其它服务器 **克隆** 一个已存在的 Git 仓库。\n\n## 3、前端人如何使用Git团队协作\n\n这个博主讲得不错：\n\n[超详细的前端程序员git指北 - 掘金 (juejin.cn)](https://juejin.cn/post/7166426575724871693)\n\n## 4、Git中文版文档\n\n[Git - 获取 Git 仓库 (git-scm.com)](https://git-scm.com/book/zh/v2/Git-基础-获取-Git-仓库)\n","source":"_posts/GitNote.md","raw":"---\ntitle: Git踩坑记录\ndate: 2023-05-28 09:35:17\ntags: Git\nswiper_index: 1\ntop_group_index: 2\ncover: mycover.jpg\nai: true\ntypora-root-url: ./..\n---\n# Git踩坑记录\n\n## 前言\n\n记录git报错场景：\n\n我想把本地已经写好的项目上传到git，根据网上的某些教程，我依次进行了如下操作:\n\n参考：[git上传文件基本命令](https://blog.csdn.net/weixin_43682721/article/details/88570397)\n\n在我要上传项目的根目录，鼠标右键`Git bash Here`\t\n\n```shell\ngit init\t#把这个目录变成git可以管理的仓库（ repositories ）\ngit remote add origin https://github.com/XX/XX.git #添加新的git方式的origin, github上创建好的仓库和本地仓库进行关联\ngit pull origin master\t#把远程仓库更新与本地分支合并\n```\n\n此时报错：`fatal: couldn't find remote ref master`，但如果是新建的**仓库（ repositories ）**的话在pull代码的时候，出现这个提示，可以忽略不计。\n\n```shell\ngit add .\t#添加文件夹下的所有文件到缓存区，我执行了两次，第一次有三个warning，感觉没起作用\ngit commit -m \"这里是注释\" \t #提交添加到缓存区的文件\n```\n\n此时报错：`error: pathspec 'commit”' did not match any file(s) known to git`，发现是中文引号，改成英文引号即可（已验证），单引号也会报错！！必须是英文双引号（这是网上说的，我还没验证）\n\n<img src=\"/images/GitNote/image-20230528094312668.png\" alt=\"image-20230528094312668\" style=\"zoom:80%;\" />\n\n```shell\ngit push -u origin master\t#把本地库的所有内容推送到远程仓库（github）上\n```\n\n此时出现报错：`fatal: unable to access 'https://github.com/XX/': Recv failure: Connection was reset`\n\n参考：[git:上传代码时，出现fatal: unable to access ‘XXX‘: Recv failure: Connection was reset 错误解决方法](https://blog.csdn.net/m0_69087087/article/details/128838186)\n\n应该是网络的问题，管理员模式打开cmd，运行下面的命令\n\n```shell\ngit config --global --unset http.proxy\ngit config --global --unset https.proxy\nipconfig/flushdns\n```\n\n成功解决！！！\n\n<img src=\"/images/GitNote/image-20230528095326943.png\" alt=\"image-20230528095326943\" style=\"zoom: 67%;\" />\n\n登录Github，发现多了一个分支`master`,但是当我想要将它与`main`分支合并的时候，出大问题了：\n\n<img src=\"/images/GitNote/image-20230528100012067.png\" alt=\"image-20230528100012067\" style=\"zoom: 33%;\" />\n\n最后参考：[github：master提交项目到远程仓库出现“There isn’t anything to compare.”_](https://blog.csdn.net/Zero_Wong/article/details/123882159)\n\n依次执行下面命令：\n\n```shell\n#1.将代码上传到GitHub的默认main分支（新）\n1.git --version    #查看版本\n2.git config --global init.defaultBranch main   #git在2.28.0上，重新设置git默认分支为main\n\n#2.在执行提交操作即可\n1.git init       //工作空间创建.git文件夹（默认隐藏了该文件夹）\n2.git add .      //添加到暂存区\n3.git commit -m \"你的提交注释注释\"\n4.git remote add origin http://xxxxxxxxx.git   //本地仓库和远程github关联\n5.git pull --rebase origin main  //远程有readme.md，拉一下\n6.git push -u origin main        //代码合并\n```\n\n**成功解决！！！**最后把之前创建的`master`分支删除就可以啦~\n\n\n\n<img src=\"/images/GitNote/image-20230528101552880.png\" alt=\"image-20230528101552880\" style=\"zoom:80%;\" />\n\n在要删除分支旁边，单击下面的图标即可。\n\n![分支列表中某个分支的屏幕截图。 回收站图标以橙色轮廓突出显示。](/images/GitNote/branches-delete.png)\n\n\n\n## 1、工作区与版本库\n\n**工作区：**就是你在电脑上看到的目录，比如目录下testgit里的文件(.git隐藏目录版本库除外)。或者以后需要再新建的目录文件等等都属于工作区范畴。\n**版本库(Repository)**：工作区有一个隐藏目录`.git`,这个不属于工作区，这是版本库。其中版本库里面存了很多东西，其中最重要的就是**stage(暂存区)**，还有Git为我们自动创建了第一个分支**master**,以及指向master的一个指针**HEAD**。\n\n## 2、有两种获取 Git 项目仓库的方式\n\n1. 将尚未进行版本控制的本地目录转换为 Git 仓库；\n2. 从其它服务器 **克隆** 一个已存在的 Git 仓库。\n\n## 3、前端人如何使用Git团队协作\n\n这个博主讲得不错：\n\n[超详细的前端程序员git指北 - 掘金 (juejin.cn)](https://juejin.cn/post/7166426575724871693)\n\n## 4、Git中文版文档\n\n[Git - 获取 Git 仓库 (git-scm.com)](https://git-scm.com/book/zh/v2/Git-基础-获取-Git-仓库)\n","slug":"GitNote","published":1,"updated":"2023-06-07T09:39:06.126Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47h0007f4ss0w5pbiho","content":"<h1 id=\"Git踩坑记录\"><a href=\"#Git踩坑记录\" class=\"headerlink\" title=\"Git踩坑记录\"></a>Git踩坑记录</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>记录git报错场景：</p>\n<p>我想把本地已经写好的项目上传到git，根据网上的某些教程，我依次进行了如下操作:</p>\n<p>参考：<a href=\"https://blog.csdn.net/weixin_43682721/article/details/88570397\">git上传文件基本命令</a></p>\n<p>在我要上传项目的根目录，鼠标右键<code>Git bash Here</code>\t</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init\t#把这个目录变成git可以管理的仓库（ repositories ）</span><br><span class=\"line\">git remote add origin https://github.com/XX/XX.git #添加新的git方式的origin, github上创建好的仓库和本地仓库进行关联</span><br><span class=\"line\">git pull origin master\t#把远程仓库更新与本地分支合并</span><br></pre></td></tr></table></figure>\n\n<p>此时报错：<code>fatal: couldn&#39;t find remote ref master</code>，但如果是新建的<strong>仓库（ repositories ）</strong>的话在pull代码的时候，出现这个提示，可以忽略不计。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .\t#添加文件夹下的所有文件到缓存区，我执行了两次，第一次有三个warning，感觉没起作用</span><br><span class=\"line\">git commit -m &quot;这里是注释&quot; \t #提交添加到缓存区的文件</span><br></pre></td></tr></table></figure>\n\n<p>此时报错：<code>error: pathspec &#39;commit”&#39; did not match any file(s) known to git</code>，发现是中文引号，改成英文引号即可（已验证），单引号也会报错！！必须是英文双引号（这是网上说的，我还没验证）</p>\n<img src=\"/images/GitNote/image-20230528094312668.png\" alt=\"image-20230528094312668\" style=\"zoom:80%;\">\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push -u origin master\t#把本地库的所有内容推送到远程仓库（github）上</span><br></pre></td></tr></table></figure>\n\n<p>此时出现报错：<code>fatal: unable to access &#39;https://github.com/XX/&#39;: Recv failure: Connection was reset</code></p>\n<p>参考：<a href=\"https://blog.csdn.net/m0_69087087/article/details/128838186\">git:上传代码时，出现fatal: unable to access ‘XXX‘: Recv failure: Connection was reset 错误解决方法</a></p>\n<p>应该是网络的问题，管理员模式打开cmd，运行下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global --unset http.proxy</span><br><span class=\"line\">git config --global --unset https.proxy</span><br><span class=\"line\">ipconfig/flushdns</span><br></pre></td></tr></table></figure>\n\n<p>成功解决！！！</p>\n<img src=\"/images/GitNote/image-20230528095326943.png\" alt=\"image-20230528095326943\" style=\"zoom: 67%;\">\n\n<p>登录Github，发现多了一个分支<code>master</code>,但是当我想要将它与<code>main</code>分支合并的时候，出大问题了：</p>\n<img src=\"/images/GitNote/image-20230528100012067.png\" alt=\"image-20230528100012067\" style=\"zoom: 33%;\">\n\n<p>最后参考：<a href=\"https://blog.csdn.net/Zero_Wong/article/details/123882159\">github：master提交项目到远程仓库出现“There isn’t anything to compare.”_</a></p>\n<p>依次执行下面命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">1.将代码上传到GitHub的默认main分支（新）</span></span><br><span class=\"line\">1.git --version    #查看版本</span><br><span class=\"line\">2.git config --global init.defaultBranch main   #git在2.28.0上，重新设置git默认分支为main</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">2.在执行提交操作即可</span></span><br><span class=\"line\">1.git init       //工作空间创建.git文件夹（默认隐藏了该文件夹）</span><br><span class=\"line\">2.git add .      //添加到暂存区</span><br><span class=\"line\">3.git commit -m &quot;你的提交注释注释&quot;</span><br><span class=\"line\">4.git remote add origin http://xxxxxxxxx.git   //本地仓库和远程github关联</span><br><span class=\"line\">5.git pull --rebase origin main  //远程有readme.md，拉一下</span><br><span class=\"line\">6.git push -u origin main        //代码合并</span><br></pre></td></tr></table></figure>\n\n<p><strong>成功解决！！！</strong>最后把之前创建的<code>master</code>分支删除就可以啦~</p>\n<img src=\"/images/GitNote/image-20230528101552880.png\" alt=\"image-20230528101552880\" style=\"zoom:80%;\">\n\n<p>在要删除分支旁边，单击下面的图标即可。</p>\n<p><img src=\"/images/GitNote/branches-delete.png\" alt=\"分支列表中某个分支的屏幕截图。 回收站图标以橙色轮廓突出显示。\"></p>\n<h2 id=\"1、工作区与版本库\"><a href=\"#1、工作区与版本库\" class=\"headerlink\" title=\"1、工作区与版本库\"></a>1、工作区与版本库</h2><p><strong>工作区：</strong>就是你在电脑上看到的目录，比如目录下testgit里的文件(.git隐藏目录版本库除外)。或者以后需要再新建的目录文件等等都属于工作区范畴。<br><strong>版本库(Repository)<strong>：工作区有一个隐藏目录<code>.git</code>,这个不属于工作区，这是版本库。其中版本库里面存了很多东西，其中最重要的就是</strong>stage(暂存区)<strong>，还有Git为我们自动创建了第一个分支</strong>master</strong>,以及指向master的一个指针<strong>HEAD</strong>。</p>\n<h2 id=\"2、有两种获取-Git-项目仓库的方式\"><a href=\"#2、有两种获取-Git-项目仓库的方式\" class=\"headerlink\" title=\"2、有两种获取 Git 项目仓库的方式\"></a>2、有两种获取 Git 项目仓库的方式</h2><ol>\n<li>将尚未进行版本控制的本地目录转换为 Git 仓库；</li>\n<li>从其它服务器 <strong>克隆</strong> 一个已存在的 Git 仓库。</li>\n</ol>\n<h2 id=\"3、前端人如何使用Git团队协作\"><a href=\"#3、前端人如何使用Git团队协作\" class=\"headerlink\" title=\"3、前端人如何使用Git团队协作\"></a>3、前端人如何使用Git团队协作</h2><p>这个博主讲得不错：</p>\n<p><a href=\"https://juejin.cn/post/7166426575724871693\">超详细的前端程序员git指北 - 掘金 (juejin.cn)</a></p>\n<h2 id=\"4、Git中文版文档\"><a href=\"#4、Git中文版文档\" class=\"headerlink\" title=\"4、Git中文版文档\"></a>4、Git中文版文档</h2><p><a href=\"https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%8E%B7%E5%8F%96-Git-%E4%BB%93%E5%BA%93\">Git - 获取 Git 仓库 (git-scm.com)</a></p>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"Git踩坑记录\"><a href=\"#Git踩坑记录\" class=\"headerlink\" title=\"Git踩坑记录\"></a>Git踩坑记录</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>记录git报错场景：</p>\n<p>我想把本地已经写好的项目上传到git，根据网上的某些教程，我依次进行了如下操作:</p>\n<p>参考：<a href=\"https://blog.csdn.net/weixin_43682721/article/details/88570397\">git上传文件基本命令</a></p>\n<p>在我要上传项目的根目录，鼠标右键<code>Git bash Here</code>\t</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init\t#把这个目录变成git可以管理的仓库（ repositories ）</span><br><span class=\"line\">git remote add origin https://github.com/XX/XX.git #添加新的git方式的origin, github上创建好的仓库和本地仓库进行关联</span><br><span class=\"line\">git pull origin master\t#把远程仓库更新与本地分支合并</span><br></pre></td></tr></table></figure>\n\n<p>此时报错：<code>fatal: couldn&#39;t find remote ref master</code>，但如果是新建的<strong>仓库（ repositories ）</strong>的话在pull代码的时候，出现这个提示，可以忽略不计。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .\t#添加文件夹下的所有文件到缓存区，我执行了两次，第一次有三个warning，感觉没起作用</span><br><span class=\"line\">git commit -m &quot;这里是注释&quot; \t #提交添加到缓存区的文件</span><br></pre></td></tr></table></figure>\n\n<p>此时报错：<code>error: pathspec &#39;commit”&#39; did not match any file(s) known to git</code>，发现是中文引号，改成英文引号即可（已验证），单引号也会报错！！必须是英文双引号（这是网上说的，我还没验证）</p>\n<img src=\"/images/GitNote/image-20230528094312668.png\" alt=\"image-20230528094312668\" style=\"zoom:80%;\">\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push -u origin master\t#把本地库的所有内容推送到远程仓库（github）上</span><br></pre></td></tr></table></figure>\n\n<p>此时出现报错：<code>fatal: unable to access &#39;https://github.com/XX/&#39;: Recv failure: Connection was reset</code></p>\n<p>参考：<a href=\"https://blog.csdn.net/m0_69087087/article/details/128838186\">git:上传代码时，出现fatal: unable to access ‘XXX‘: Recv failure: Connection was reset 错误解决方法</a></p>\n<p>应该是网络的问题，管理员模式打开cmd，运行下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global --unset http.proxy</span><br><span class=\"line\">git config --global --unset https.proxy</span><br><span class=\"line\">ipconfig/flushdns</span><br></pre></td></tr></table></figure>\n\n<p>成功解决！！！</p>\n<img src=\"/images/GitNote/image-20230528095326943.png\" alt=\"image-20230528095326943\" style=\"zoom: 67%;\">\n\n<p>登录Github，发现多了一个分支<code>master</code>,但是当我想要将它与<code>main</code>分支合并的时候，出大问题了：</p>\n<img src=\"/images/GitNote/image-20230528100012067.png\" alt=\"image-20230528100012067\" style=\"zoom: 33%;\">\n\n<p>最后参考：<a href=\"https://blog.csdn.net/Zero_Wong/article/details/123882159\">github：master提交项目到远程仓库出现“There isn’t anything to compare.”_</a></p>\n<p>依次执行下面命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">1.将代码上传到GitHub的默认main分支（新）</span></span><br><span class=\"line\">1.git --version    #查看版本</span><br><span class=\"line\">2.git config --global init.defaultBranch main   #git在2.28.0上，重新设置git默认分支为main</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">2.在执行提交操作即可</span></span><br><span class=\"line\">1.git init       //工作空间创建.git文件夹（默认隐藏了该文件夹）</span><br><span class=\"line\">2.git add .      //添加到暂存区</span><br><span class=\"line\">3.git commit -m &quot;你的提交注释注释&quot;</span><br><span class=\"line\">4.git remote add origin http://xxxxxxxxx.git   //本地仓库和远程github关联</span><br><span class=\"line\">5.git pull --rebase origin main  //远程有readme.md，拉一下</span><br><span class=\"line\">6.git push -u origin main        //代码合并</span><br></pre></td></tr></table></figure>\n\n<p><strong>成功解决！！！</strong>最后把之前创建的<code>master</code>分支删除就可以啦~</p>\n<img src=\"/images/GitNote/image-20230528101552880.png\" alt=\"image-20230528101552880\" style=\"zoom:80%;\">\n\n<p>在要删除分支旁边，单击下面的图标即可。</p>\n<p><img src=\"/images/GitNote/branches-delete.png\" alt=\"分支列表中某个分支的屏幕截图。 回收站图标以橙色轮廓突出显示。\"></p>\n<h2 id=\"1、工作区与版本库\"><a href=\"#1、工作区与版本库\" class=\"headerlink\" title=\"1、工作区与版本库\"></a>1、工作区与版本库</h2><p><strong>工作区：</strong>就是你在电脑上看到的目录，比如目录下testgit里的文件(.git隐藏目录版本库除外)。或者以后需要再新建的目录文件等等都属于工作区范畴。<br><strong>版本库(Repository)<strong>：工作区有一个隐藏目录<code>.git</code>,这个不属于工作区，这是版本库。其中版本库里面存了很多东西，其中最重要的就是</strong>stage(暂存区)<strong>，还有Git为我们自动创建了第一个分支</strong>master</strong>,以及指向master的一个指针<strong>HEAD</strong>。</p>\n<h2 id=\"2、有两种获取-Git-项目仓库的方式\"><a href=\"#2、有两种获取-Git-项目仓库的方式\" class=\"headerlink\" title=\"2、有两种获取 Git 项目仓库的方式\"></a>2、有两种获取 Git 项目仓库的方式</h2><ol>\n<li>将尚未进行版本控制的本地目录转换为 Git 仓库；</li>\n<li>从其它服务器 <strong>克隆</strong> 一个已存在的 Git 仓库。</li>\n</ol>\n<h2 id=\"3、前端人如何使用Git团队协作\"><a href=\"#3、前端人如何使用Git团队协作\" class=\"headerlink\" title=\"3、前端人如何使用Git团队协作\"></a>3、前端人如何使用Git团队协作</h2><p>这个博主讲得不错：</p>\n<p><a href=\"https://juejin.cn/post/7166426575724871693\">超详细的前端程序员git指北 - 掘金 (juejin.cn)</a></p>\n<h2 id=\"4、Git中文版文档\"><a href=\"#4、Git中文版文档\" class=\"headerlink\" title=\"4、Git中文版文档\"></a>4、Git中文版文档</h2><p><a href=\"https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%8E%B7%E5%8F%96-Git-%E4%BB%93%E5%BA%93\">Git - 获取 Git 仓库 (git-scm.com)</a></p>\n"},{"title":"一个校园卡消费充值APP","date":"2023-05-28T04:44:13.000Z","swiper_index":3,"top_group_index":3,"cover":"2023/05/28/CardSpending/mycover.png","ai":true,"typora-root-url":"./..","_content":"\n# CardSpending APP\n\n# 一、主要功能\n\n### 1、用户刷卡登录\n\n- 将卡片靠近读卡器\n- 利用NFC功能读取IC卡中存储的用户ID以及password，再向远程服务器发出HTTP请求，远程服务器发送数据到手机中，最后页面响应变化反应给用户。\n\n<img src=\"/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg\" alt=\"Screenshot_20230114-134725\" style=\"zoom: 15%;\"/><img src=\"/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg\" alt=\"Screenshot_20230114-134731\" style=\"zoom:15%;\" />\n\n\n\n### 2、充值功能\n\n- 输入充值金额或者点击相应的金额按钮使得确认按钮可点击\n- 点击确认按钮，弹出**ReadDialog**,\n- 将卡片贴近读卡器，**向卡片中写入信息**同时**更新服务器中的信息**\n- 将更改的充值信息更新到UI界面上，可以看到下图**账户余额**变为250元\n\n<img src=\"/images/CardSpending/Untitled-1685249374298-15.png\" alt=\"Untitled\" style=\"zoom:50%;\" />\n\n### 3、消费功能\n\n- 输入消费金额或者点击相应的金额按钮使得确认按钮可点击\n- 点击确认按钮，弹出**ReadDialog**,\n- 将卡片贴近读卡器，**向卡片中写入信息**同时**更新服务器中的信息**\n- 将更改的充值信息更新到UI界面上，可以看到下图**账户余额**变为230元\n\n<img src=\"/images/CardSpending/Untitled%201-1685249325027-13.png\" alt=\"Untitled 1\" style=\"zoom:50%;\" />\n\n### 4、历史记录查看功能\n\n- 进入“我的”界面，点击历史记录\n- 跳转到历史记录界面\n- 手机请求服务器数据，并更新到UI界面\n- 可以看到下图出现最新的充值消费记录\n\n<img src=\"/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg\" alt=\"Screenshot_20230114-141614\" style=\"zoom:15%;\" />\n\n# 二、实现方法\n\n## 整体设计\n\n![Untitled 2](/images/CardSpending/Untitled%202-1685249399313-17.png)\n\n## 服务器端\n\n- 使用**Node.js**实现后端逻辑\n- 使用**Apipost**写接口文档\n- 使用**花生壳**做****内网穿透****实现外网可以访问服务器\n\n### 1、用户登录接口\n\n[用户登录 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/bfb37dde95f7dea8/793a161f3c06bbe9?target_id=8533f09a-d158-47f9-8ce5-d747009c5293)\n\n<img src=\"/images/CardSpending/image-20230528133143833.png\" alt=\"image-20230528133143833\" style=\"zoom:50%;\" />\n\n```jsx\n// 登录\nrouter.get('/login', (req, res) => {\n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const password = req.query.passwo\n    const sql = \"select * from StuInfo where Id='\" + Id + \"'\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"登录结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected != 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '登录成功！',\n                Id: result.recordset[0].Id,\n                password: result.recordset[0].password,\n                surplus: result.recordset[0].surplus,\n                electricity: result.recordset[0].electricity,\n                water: result.recordset[0].water,\n                isHelp: result.recordset[0].isHelp,\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 2、余额更新接口\n\n[更新余额 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/a7e5b575ed757db3/49bcb1e57f19c36c?target_id=d24e4644-8478-4315-8d2b-d6800efe48a1)\n\n<img src=\"/images/CardSpending/image-20230528133216623.png\" alt=\"image-20230528133216623\" style=\"zoom:50%;\" />\n\n```jsx\n// 更新surplus\nrouter.get('/update', (req, res) => {\n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const password = req.query.password\n    const surplus = req.query.surplus\n    const sql = \"update StuInfo set surplus='\"+surplus+ \"' where id='\"+Id+\"'\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"更新结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected != 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n\n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '修改成功！',\n                Id: Id,\n                password: password,\n                surplus: surplus,\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 3、查询历史记录接口\n\n[查询历史记录 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/83deb98d1f9881c6/2f37ecca48c2afe8?target_id=ab9700ab-5f9f-4475-8bee-ef39f742f5a2)\n\n<img src=\"/images/CardSpending/image-20230528133239391.png\" alt=\"image-20230528133239391\" style=\"zoom:50%;\" />\n\n```jsx\n// 查询历史记录\nrouter.get('/history', (req, res) => \n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const password = req.query.password\n    const sql = \"select * from History where Id='\"+Id+\"'\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"历史记录查询结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected < 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '查询成功！',\n                Id: Id,\n                password: password,\n                history:result.recordsets[0]\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 4、添加历史记录接口\n\n[添加历史记录接口 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/3948990c824fc8cd/4f01552dd8b40f0f?target_id=d33893d9-192a-4a03-b327-4e0fbc777d97)\n\n<img src=\"/images/CardSpending/image-20230528133300931.png\" alt=\"image-20230528133300931\" style=\"zoom:50%;\" />\n\n```jsx\nrouter.get('/addhistory', (req, res) => \n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const date = req.query.date\n    const money = req.query.money\n    const type = req.query.type\n    //insert into History values('8202201417','2022-1-3 16:18:23','充值记录','5.22')\n    const sql = \"insert into History values('\"+Id+\"','\"+date+\"','\"+type+\"','\"+money+\"')\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"历史记录添加结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected < 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '添加成功！',\n                Id: Id,\n                type: type,\n                date:date,\n                money:money\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 5、Node数据库连接\n\n这里是连接本地数据库\n\n```jsx\n// 导入 mysql 模块\nconst mssql = require('mssql')\n\n// 创建数据库连接对象\nvar db = {};\nvar config = {\n    user: 'sa',\n    password: '123456',\n    server: '127.0.0.1',\n    database: 'dbsqlconnect',\n    port: 1433,\n    options: {\n        encrypt: false // Use this if you're on Windows Azure\n    },\n    pool: {\n        min: 0,\n        max: 10,\n        idleTimeoutMillis: 3000\n    }\n};\n\n//执行sql,返回数据.\ndb.query = function (sql, callBack) {\n    var connection = new mssql.ConnectionPool(config, function (err) {\n        if (err) {\n            console.log(err);\n            return;\n        }\n        var ps = new mssql.PreparedStatement(connection);\n        ps.prepare(sql, function (err) {\n            if (err) {\n                console.log(err);\n                return;\n            }\n            ps.execute('', function (err, result) {\n                if (err) {\n                    console.log(err);\n                    return;\n                }\n\n                ps.unprepare(function (err) {\n                    if (err) {\n                        console.log(err);\n                        callback(err, null);\n                        return;\n                    }\n                    callBack(err, result);\n                });\n            });\n        });\n    });\n};\n\n// 向外共享 db 数据库连接对象\nmodule.exports = db\n```\n\n### 6、数据库设计\n\n一共有两个表格\n\n```sql\nselect * from StuInfo\ndrop table StuInfo\ncreate table StuInfo\n(\n\tId varchar(40),\n\tpassword varchar(40),\n\tsurplus varchar(40),\n\telectricity varchar(20),\n\twater varchar(40),\n\tisHelp varchar(20)\n)\n\ninsert into StuInfo values('8202201417','1234','23.5','56.4','324.3','0')\n\ncreate table History\n(\n\tId varchar(40),\n\tdate varchar(40),\n\ttype varchar(40),\n\tmoney varchar(20),\n)\ndrop table History\n--yyyy-MM-dd HH:mm:ss\ninsert into History values('8202201417','2022-1-3 16:18:23','消费记录','16.4')\ninsert into History values('8202201417','2022-1-3 16:18:23','消费记录','4.4')\ninsert into History values('8202201417','2022-1-3 16:18:23','消费记录','56.4')\ninsert into History values('8202201417','2022-1-3 16:18:23','充值记录','5.22')\nselect * from History where Id='8202201417'\nselect * from History\n```\n\n**数据库：dbsqlconnect**\n\n- **StuInfo**\n\n<img src=\"/images/CardSpending/Untitled%2015-1685252038490-19.png\" alt=\"Untitled 15\" style=\"zoom:67%;\" />\n\n- **History**\n\n<img src=\"/images/CardSpending/Untitled%2016-1685252055780-21.png\" alt=\"Untitled 16\" style=\"zoom:50%;\" />\n\n### 7、花生壳内网穿透\n\n[花生壳管理 - 内网穿透 (oray.com)](https://console.hsk.oray.com/forward)\n\n<img src=\"/images/CardSpending/Untitled%2017-1685252073223-23.png\" alt=\"Untitled 17\" style=\"zoom: 33%;\" />\n\n这里需要注意的是：\n\n**内网的ip地址有可能改变，所以需要在使用之前确认**。\n\n## 客户端\n\n客户端的设计主要分为ui设计，以及一些逻辑实现。其中逻辑部分包括：\n\n- 读卡部分\n- 数据库操作\n- 网络连接\n- 界面数据共享与更新\n\n### 1、读卡部分\n\n```jsx\n/**\n读取NFC内容\n */\npublic static String[] read(Tag tag){\n    String[] s_blocks = new String[20];\n    MifareClassic mif = MifareClassic.get(tag);\n    int ttype = mif.getType();\n    Log.d(TAG, \"MifareClassic tag type: \" + ttype);\n    int tsize = mif.getSize();\n    Log.d(TAG, \"tag size: \" + tsize);\n    int s_len = mif.getSectorCount();\n    Log.d(TAG, \"tag sector count: \" + s_len);\n    int b_len = mif.getBlockCount();\n    Log.d(TAG, \"tag block count: \" + b_len);\n    try {\n        mif.connect();\n        if (mif.isConnected()){\n            for(int i=0; i< s_len; i++){\n                boolean isAuthenticated = false;\n                if (mif.authenticateSectorWithKeyA(i, MifareClassic.KEY_MIFARE_APPLICATION_DIRECTORY)) {\n                    isAuthenticated = true;\n                } else if (mif.authenticateSectorWithKeyA(i, MifareClassic.KEY_DEFAULT)) {\n                    isAuthenticated = true;\n                } else if (mif.authenticateSectorWithKeyA(i,MifareClassic.KEY_NFC_FORUM)) {\n                    isAuthenticated = true;\n                } else {\n                    Log.d(\"TAG\", \"Authorization denied \");\n                }\n\n                if(isAuthenticated) {\n                    int block_index = mif.sectorToBlock(i);\n                    Log.e(TAG, String.valueOf(block_index));\n                    byte[] block = mif.readBlock(block_index);\n                    String s_block = new String(block,\"UTF-8\");\n                    s_blocks[i] = s_block;\n                    Log.d(TAG, s_block);\n                }\n            }\n        }\n        mif.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return s_blocks;\n}\n```\n\n### 2、网络连接\n\n- **用户刷卡登录请求服务器数据**\n\n```jsx\n//构建URL请求并获取内容\n    public Student fetchItems(boolean isUpdate) {\n        mStudent=Student.getStudent();\n        try {\n            String url;\n            if(isUpdate){\n                url = Uri.parse(\"https://6737k8d627.goho.co/api/update\")\n                        .buildUpon()\n                        .appendQueryParameter(\"Id\", mStudent.getId())\n                        .appendQueryParameter(\"password\", mStudent.getPassword())\n                        .appendQueryParameter(\"surplus\", mStudent.getSurplus())\n                        .build().toString();\n            }\n            else{\n                url = Uri.parse(\"https://6737k8d627.goho.co/api/login\")\n                        .buildUpon()\n                        .appendQueryParameter(\"Id\", mStudent.getId())\n                        .appendQueryParameter(\"password\", mStudent.getPassword())\n                        .build().toString();\n            }\n            String jsonString = getUrlString(url);\n            Log.e(TAG, \"Received JSON: \" + jsonString);\n            //将JSON数据解析成相应的Java对象\n            JSONObject jsonBody = new JSONObject(jsonString);\n            String status = jsonBody.getString(\"status\");\n            String message = jsonBody.getString(\"message\");\n            Log.e(TAG,\"status : \"+status);\n            Log.e(TAG,\"message : \"+message);\n            //判断登录状态\n            if(status.equals(\"0\")){ //登录成功\n                mStudent.setId(jsonBody.getString(\"Id\"));\n                mStudent.setPassword(jsonBody.getString(\"password\"));\n                mStudent.setSurplus(jsonBody.getString(\"surplus\"));\n                mStudent.setElectricity(jsonBody.getString(\"electricity\"));\n                mStudent.setWater(jsonBody.getString(\"water\"));\n                mStudent.setIsHelp(jsonBody.getString(\"isHelp\"));\n            }\n            else{                   //登录失败:弹出Dialog提示卡片不正确\n                mStudent.setPassword(\"wrong\");\n            }\n```\n\n- **用户充值消费更改服务器数据**\n\n```jsx\n/**\n*实现AsyncTask工具类\n*/\nprivate class FetchItemsTask extends AsyncTask<Void,Void, Student> {\n    private String mSurplus;\n    private boolean mIsUpdate;\n    public FetchItemsTask(boolean isUpdate) {\n        mIsUpdate = isUpdate;\n    }\n\n    @Override\n    protected Student doInBackground(Void... params) {\n        return new StudentFetcher().fetchItems(mIsUpdate);\n    }\n\n    @Override\n    protected void onPostExecute(Student items) {\n        Log.e(\"mStudent\",items.getId());\n        if(items.getPassword().equals(\"wrong\")){     //登录失败:弹出Dialog提示卡片不正确\n            tipDialog(MainActivity.this,\"您的卡不在系统中\");\n    }else{                                           //登录成功:更新界面\n            setUI();\n        }\n    }\n\n}\n```\n\n```jsx\n/**\n *实现AsyncTask工具类\n */\nprivate class FetchItemsTask extends AsyncTask<Void,Void, HistoryLab> {\n\n    @Override\n    protected HistoryLab doInBackground(Void... params) {\n        String url;\n        SimpleDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n        String dateString = formatter.format(new Date());\n        url = Uri.parse(\"https://6737k8d627.goho.co/api/addhistory\")\n                .buildUpon()\n                .appendQueryParameter(\"Id\", mStudent.getId())\n                .appendQueryParameter(\"type\", \"充值记录\")\n                .appendQueryParameter(\"date\", dateString)\n                .appendQueryParameter(\"money\", mMoney)\n                .build().toString();\n        return new HistoryFetcher().fetchItems(url);\n    }\n\n    @Override\n    protected void onPostExecute(HistoryLab items) {\n    }\n}\n```\n\n- **用户获取历史记录数据**\n\n```jsx\n/**\n *实现AsyncTask工具类\n */\nprivate class FetchItemsTask extends AsyncTask<Void,Void, HistoryLab> {\n\n    @Override\n    protected HistoryLab doInBackground(Void... params) {\n        String url;\n        url = Uri.parse(\"https://6737k8d627.goho.co/api/history\")\n                .buildUpon()\n                .appendQueryParameter(\"Id\", mStudent.getId())\n                .appendQueryParameter(\"password\", mStudent.getPassword())\n                .build().toString();\n        return new HistoryFetcher().fetchItems(url);\n    }\n\n    @Override\n    protected void onPostExecute(HistoryLab items) {\n        mHistoryLab = items;\n        setupAdapter();\n        //updateView();\n    }\n}\n```\n\n### 3、界面数据共享与更新\n\n```jsx\npublic class MeViewModel extends ViewModel {\n\n    private final MutableLiveData<Student> mStudent;\n    private final MutableLiveData<String> mMoney;\n\n    public MeViewModel() {\n        mStudent = new MutableLiveData<>();\n        mMoney= new MutableLiveData<String>();\n    }\n\n    public void setMoney(String money) {\n        mMoney.setValue(money);\n    }\n\n    public LiveData<String> getMoney() {\n        return mMoney;\n    }\n\n    public void setStudent(Student student) {\n        mStudent.setValue(student);\n    }\n\n    public LiveData<Student> getStudent() {\n        return mStudent;\n    }\n}\n```\n","source":"_posts/CardSpending.md","raw":"---\ntitle: 一个校园卡消费充值APP\ndate: 2023-05-28 12:44:13\ntags: Android APP\nswiper_index: 3\ntop_group_index: 3\ncover: mycover.png\nai: true\ntypora-root-url: ./..\n---\n\n# CardSpending APP\n\n# 一、主要功能\n\n### 1、用户刷卡登录\n\n- 将卡片靠近读卡器\n- 利用NFC功能读取IC卡中存储的用户ID以及password，再向远程服务器发出HTTP请求，远程服务器发送数据到手机中，最后页面响应变化反应给用户。\n\n<img src=\"/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg\" alt=\"Screenshot_20230114-134725\" style=\"zoom: 15%;\"/><img src=\"/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg\" alt=\"Screenshot_20230114-134731\" style=\"zoom:15%;\" />\n\n\n\n### 2、充值功能\n\n- 输入充值金额或者点击相应的金额按钮使得确认按钮可点击\n- 点击确认按钮，弹出**ReadDialog**,\n- 将卡片贴近读卡器，**向卡片中写入信息**同时**更新服务器中的信息**\n- 将更改的充值信息更新到UI界面上，可以看到下图**账户余额**变为250元\n\n<img src=\"/images/CardSpending/Untitled-1685249374298-15.png\" alt=\"Untitled\" style=\"zoom:50%;\" />\n\n### 3、消费功能\n\n- 输入消费金额或者点击相应的金额按钮使得确认按钮可点击\n- 点击确认按钮，弹出**ReadDialog**,\n- 将卡片贴近读卡器，**向卡片中写入信息**同时**更新服务器中的信息**\n- 将更改的充值信息更新到UI界面上，可以看到下图**账户余额**变为230元\n\n<img src=\"/images/CardSpending/Untitled%201-1685249325027-13.png\" alt=\"Untitled 1\" style=\"zoom:50%;\" />\n\n### 4、历史记录查看功能\n\n- 进入“我的”界面，点击历史记录\n- 跳转到历史记录界面\n- 手机请求服务器数据，并更新到UI界面\n- 可以看到下图出现最新的充值消费记录\n\n<img src=\"/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg\" alt=\"Screenshot_20230114-141614\" style=\"zoom:15%;\" />\n\n# 二、实现方法\n\n## 整体设计\n\n![Untitled 2](/images/CardSpending/Untitled%202-1685249399313-17.png)\n\n## 服务器端\n\n- 使用**Node.js**实现后端逻辑\n- 使用**Apipost**写接口文档\n- 使用**花生壳**做****内网穿透****实现外网可以访问服务器\n\n### 1、用户登录接口\n\n[用户登录 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/bfb37dde95f7dea8/793a161f3c06bbe9?target_id=8533f09a-d158-47f9-8ce5-d747009c5293)\n\n<img src=\"/images/CardSpending/image-20230528133143833.png\" alt=\"image-20230528133143833\" style=\"zoom:50%;\" />\n\n```jsx\n// 登录\nrouter.get('/login', (req, res) => {\n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const password = req.query.passwo\n    const sql = \"select * from StuInfo where Id='\" + Id + \"'\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"登录结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected != 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '登录成功！',\n                Id: result.recordset[0].Id,\n                password: result.recordset[0].password,\n                surplus: result.recordset[0].surplus,\n                electricity: result.recordset[0].electricity,\n                water: result.recordset[0].water,\n                isHelp: result.recordset[0].isHelp,\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 2、余额更新接口\n\n[更新余额 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/a7e5b575ed757db3/49bcb1e57f19c36c?target_id=d24e4644-8478-4315-8d2b-d6800efe48a1)\n\n<img src=\"/images/CardSpending/image-20230528133216623.png\" alt=\"image-20230528133216623\" style=\"zoom:50%;\" />\n\n```jsx\n// 更新surplus\nrouter.get('/update', (req, res) => {\n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const password = req.query.password\n    const surplus = req.query.surplus\n    const sql = \"update StuInfo set surplus='\"+surplus+ \"' where id='\"+Id+\"'\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"更新结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected != 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n\n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '修改成功！',\n                Id: Id,\n                password: password,\n                surplus: surplus,\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 3、查询历史记录接口\n\n[查询历史记录 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/83deb98d1f9881c6/2f37ecca48c2afe8?target_id=ab9700ab-5f9f-4475-8bee-ef39f742f5a2)\n\n<img src=\"/images/CardSpending/image-20230528133239391.png\" alt=\"image-20230528133239391\" style=\"zoom:50%;\" />\n\n```jsx\n// 查询历史记录\nrouter.get('/history', (req, res) => \n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const password = req.query.password\n    const sql = \"select * from History where Id='\"+Id+\"'\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"历史记录查询结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected < 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '查询成功！',\n                Id: Id,\n                password: password,\n                history:result.recordsets[0]\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 4、添加历史记录接口\n\n[添加历史记录接口 - Powered by Apipost V7](https://console-docs.apipost.cn/preview/3948990c824fc8cd/4f01552dd8b40f0f?target_id=d33893d9-192a-4a03-b327-4e0fbc777d97)\n\n<img src=\"/images/CardSpending/image-20230528133300931.png\" alt=\"image-20230528133300931\" style=\"zoom:50%;\" />\n\n```jsx\nrouter.get('/addhistory', (req, res) => \n    req.query = querystring.parse(url.split('?')[1])\n    //参数\n    const Id = req.query.Id\n    const date = req.query.date\n    const money = req.query.money\n    const type = req.query.type\n    //insert into History values('8202201417','2022-1-3 16:18:23','充值记录','5.22')\n    const sql = \"insert into History values('\"+Id+\"','\"+date+\"','\"+type+\"','\"+money+\"')\"\n    let error = 'null'\n    db.query(sql, function (err, result) {\n        console.log(\"历史记录添加结果：\"+result)\n        if (err) { error = \"执行 SQL 语句失败\" }                    // 执行 SQL 语句失败\n        if (result.rowsAffected < 1) { error = '登录失败！' }   // 执行 SQL 语句成功，但是查询到数据条数不等于 1    \n        console.log(\"用户名存在\")         //用户名存在     \n        res.setHeader(\"Content-type\", \"text/html;charset=utf8\");//如果打开页面乱码, 设置\n        if (error === 'null') {\n            res.send(JSON.stringify({\n                status: 0,\n                message: '添加成功！',\n                Id: Id,\n                type: type,\n                date:date,\n                money:money\n            }))\n        }\n        else {\n            res.send(JSON.stringify({\n                status: 1,\n                message: error\n            }))\n        }\n    })\n})\n```\n\n### 5、Node数据库连接\n\n这里是连接本地数据库\n\n```jsx\n// 导入 mysql 模块\nconst mssql = require('mssql')\n\n// 创建数据库连接对象\nvar db = {};\nvar config = {\n    user: 'sa',\n    password: '123456',\n    server: '127.0.0.1',\n    database: 'dbsqlconnect',\n    port: 1433,\n    options: {\n        encrypt: false // Use this if you're on Windows Azure\n    },\n    pool: {\n        min: 0,\n        max: 10,\n        idleTimeoutMillis: 3000\n    }\n};\n\n//执行sql,返回数据.\ndb.query = function (sql, callBack) {\n    var connection = new mssql.ConnectionPool(config, function (err) {\n        if (err) {\n            console.log(err);\n            return;\n        }\n        var ps = new mssql.PreparedStatement(connection);\n        ps.prepare(sql, function (err) {\n            if (err) {\n                console.log(err);\n                return;\n            }\n            ps.execute('', function (err, result) {\n                if (err) {\n                    console.log(err);\n                    return;\n                }\n\n                ps.unprepare(function (err) {\n                    if (err) {\n                        console.log(err);\n                        callback(err, null);\n                        return;\n                    }\n                    callBack(err, result);\n                });\n            });\n        });\n    });\n};\n\n// 向外共享 db 数据库连接对象\nmodule.exports = db\n```\n\n### 6、数据库设计\n\n一共有两个表格\n\n```sql\nselect * from StuInfo\ndrop table StuInfo\ncreate table StuInfo\n(\n\tId varchar(40),\n\tpassword varchar(40),\n\tsurplus varchar(40),\n\telectricity varchar(20),\n\twater varchar(40),\n\tisHelp varchar(20)\n)\n\ninsert into StuInfo values('8202201417','1234','23.5','56.4','324.3','0')\n\ncreate table History\n(\n\tId varchar(40),\n\tdate varchar(40),\n\ttype varchar(40),\n\tmoney varchar(20),\n)\ndrop table History\n--yyyy-MM-dd HH:mm:ss\ninsert into History values('8202201417','2022-1-3 16:18:23','消费记录','16.4')\ninsert into History values('8202201417','2022-1-3 16:18:23','消费记录','4.4')\ninsert into History values('8202201417','2022-1-3 16:18:23','消费记录','56.4')\ninsert into History values('8202201417','2022-1-3 16:18:23','充值记录','5.22')\nselect * from History where Id='8202201417'\nselect * from History\n```\n\n**数据库：dbsqlconnect**\n\n- **StuInfo**\n\n<img src=\"/images/CardSpending/Untitled%2015-1685252038490-19.png\" alt=\"Untitled 15\" style=\"zoom:67%;\" />\n\n- **History**\n\n<img src=\"/images/CardSpending/Untitled%2016-1685252055780-21.png\" alt=\"Untitled 16\" style=\"zoom:50%;\" />\n\n### 7、花生壳内网穿透\n\n[花生壳管理 - 内网穿透 (oray.com)](https://console.hsk.oray.com/forward)\n\n<img src=\"/images/CardSpending/Untitled%2017-1685252073223-23.png\" alt=\"Untitled 17\" style=\"zoom: 33%;\" />\n\n这里需要注意的是：\n\n**内网的ip地址有可能改变，所以需要在使用之前确认**。\n\n## 客户端\n\n客户端的设计主要分为ui设计，以及一些逻辑实现。其中逻辑部分包括：\n\n- 读卡部分\n- 数据库操作\n- 网络连接\n- 界面数据共享与更新\n\n### 1、读卡部分\n\n```jsx\n/**\n读取NFC内容\n */\npublic static String[] read(Tag tag){\n    String[] s_blocks = new String[20];\n    MifareClassic mif = MifareClassic.get(tag);\n    int ttype = mif.getType();\n    Log.d(TAG, \"MifareClassic tag type: \" + ttype);\n    int tsize = mif.getSize();\n    Log.d(TAG, \"tag size: \" + tsize);\n    int s_len = mif.getSectorCount();\n    Log.d(TAG, \"tag sector count: \" + s_len);\n    int b_len = mif.getBlockCount();\n    Log.d(TAG, \"tag block count: \" + b_len);\n    try {\n        mif.connect();\n        if (mif.isConnected()){\n            for(int i=0; i< s_len; i++){\n                boolean isAuthenticated = false;\n                if (mif.authenticateSectorWithKeyA(i, MifareClassic.KEY_MIFARE_APPLICATION_DIRECTORY)) {\n                    isAuthenticated = true;\n                } else if (mif.authenticateSectorWithKeyA(i, MifareClassic.KEY_DEFAULT)) {\n                    isAuthenticated = true;\n                } else if (mif.authenticateSectorWithKeyA(i,MifareClassic.KEY_NFC_FORUM)) {\n                    isAuthenticated = true;\n                } else {\n                    Log.d(\"TAG\", \"Authorization denied \");\n                }\n\n                if(isAuthenticated) {\n                    int block_index = mif.sectorToBlock(i);\n                    Log.e(TAG, String.valueOf(block_index));\n                    byte[] block = mif.readBlock(block_index);\n                    String s_block = new String(block,\"UTF-8\");\n                    s_blocks[i] = s_block;\n                    Log.d(TAG, s_block);\n                }\n            }\n        }\n        mif.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return s_blocks;\n}\n```\n\n### 2、网络连接\n\n- **用户刷卡登录请求服务器数据**\n\n```jsx\n//构建URL请求并获取内容\n    public Student fetchItems(boolean isUpdate) {\n        mStudent=Student.getStudent();\n        try {\n            String url;\n            if(isUpdate){\n                url = Uri.parse(\"https://6737k8d627.goho.co/api/update\")\n                        .buildUpon()\n                        .appendQueryParameter(\"Id\", mStudent.getId())\n                        .appendQueryParameter(\"password\", mStudent.getPassword())\n                        .appendQueryParameter(\"surplus\", mStudent.getSurplus())\n                        .build().toString();\n            }\n            else{\n                url = Uri.parse(\"https://6737k8d627.goho.co/api/login\")\n                        .buildUpon()\n                        .appendQueryParameter(\"Id\", mStudent.getId())\n                        .appendQueryParameter(\"password\", mStudent.getPassword())\n                        .build().toString();\n            }\n            String jsonString = getUrlString(url);\n            Log.e(TAG, \"Received JSON: \" + jsonString);\n            //将JSON数据解析成相应的Java对象\n            JSONObject jsonBody = new JSONObject(jsonString);\n            String status = jsonBody.getString(\"status\");\n            String message = jsonBody.getString(\"message\");\n            Log.e(TAG,\"status : \"+status);\n            Log.e(TAG,\"message : \"+message);\n            //判断登录状态\n            if(status.equals(\"0\")){ //登录成功\n                mStudent.setId(jsonBody.getString(\"Id\"));\n                mStudent.setPassword(jsonBody.getString(\"password\"));\n                mStudent.setSurplus(jsonBody.getString(\"surplus\"));\n                mStudent.setElectricity(jsonBody.getString(\"electricity\"));\n                mStudent.setWater(jsonBody.getString(\"water\"));\n                mStudent.setIsHelp(jsonBody.getString(\"isHelp\"));\n            }\n            else{                   //登录失败:弹出Dialog提示卡片不正确\n                mStudent.setPassword(\"wrong\");\n            }\n```\n\n- **用户充值消费更改服务器数据**\n\n```jsx\n/**\n*实现AsyncTask工具类\n*/\nprivate class FetchItemsTask extends AsyncTask<Void,Void, Student> {\n    private String mSurplus;\n    private boolean mIsUpdate;\n    public FetchItemsTask(boolean isUpdate) {\n        mIsUpdate = isUpdate;\n    }\n\n    @Override\n    protected Student doInBackground(Void... params) {\n        return new StudentFetcher().fetchItems(mIsUpdate);\n    }\n\n    @Override\n    protected void onPostExecute(Student items) {\n        Log.e(\"mStudent\",items.getId());\n        if(items.getPassword().equals(\"wrong\")){     //登录失败:弹出Dialog提示卡片不正确\n            tipDialog(MainActivity.this,\"您的卡不在系统中\");\n    }else{                                           //登录成功:更新界面\n            setUI();\n        }\n    }\n\n}\n```\n\n```jsx\n/**\n *实现AsyncTask工具类\n */\nprivate class FetchItemsTask extends AsyncTask<Void,Void, HistoryLab> {\n\n    @Override\n    protected HistoryLab doInBackground(Void... params) {\n        String url;\n        SimpleDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n        String dateString = formatter.format(new Date());\n        url = Uri.parse(\"https://6737k8d627.goho.co/api/addhistory\")\n                .buildUpon()\n                .appendQueryParameter(\"Id\", mStudent.getId())\n                .appendQueryParameter(\"type\", \"充值记录\")\n                .appendQueryParameter(\"date\", dateString)\n                .appendQueryParameter(\"money\", mMoney)\n                .build().toString();\n        return new HistoryFetcher().fetchItems(url);\n    }\n\n    @Override\n    protected void onPostExecute(HistoryLab items) {\n    }\n}\n```\n\n- **用户获取历史记录数据**\n\n```jsx\n/**\n *实现AsyncTask工具类\n */\nprivate class FetchItemsTask extends AsyncTask<Void,Void, HistoryLab> {\n\n    @Override\n    protected HistoryLab doInBackground(Void... params) {\n        String url;\n        url = Uri.parse(\"https://6737k8d627.goho.co/api/history\")\n                .buildUpon()\n                .appendQueryParameter(\"Id\", mStudent.getId())\n                .appendQueryParameter(\"password\", mStudent.getPassword())\n                .build().toString();\n        return new HistoryFetcher().fetchItems(url);\n    }\n\n    @Override\n    protected void onPostExecute(HistoryLab items) {\n        mHistoryLab = items;\n        setupAdapter();\n        //updateView();\n    }\n}\n```\n\n### 3、界面数据共享与更新\n\n```jsx\npublic class MeViewModel extends ViewModel {\n\n    private final MutableLiveData<Student> mStudent;\n    private final MutableLiveData<String> mMoney;\n\n    public MeViewModel() {\n        mStudent = new MutableLiveData<>();\n        mMoney= new MutableLiveData<String>();\n    }\n\n    public void setMoney(String money) {\n        mMoney.setValue(money);\n    }\n\n    public LiveData<String> getMoney() {\n        return mMoney;\n    }\n\n    public void setStudent(Student student) {\n        mStudent.setValue(student);\n    }\n\n    public LiveData<Student> getStudent() {\n        return mStudent;\n    }\n}\n```\n","slug":"CardSpending","published":1,"updated":"2023-06-07T09:38:22.455Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47o000if4ssfe5qe9gd","content":"<h1 id=\"CardSpending-APP\"><a href=\"#CardSpending-APP\" class=\"headerlink\" title=\"CardSpending APP\"></a>CardSpending APP</h1><h1 id=\"一、主要功能\"><a href=\"#一、主要功能\" class=\"headerlink\" title=\"一、主要功能\"></a>一、主要功能</h1><h3 id=\"1、用户刷卡登录\"><a href=\"#1、用户刷卡登录\" class=\"headerlink\" title=\"1、用户刷卡登录\"></a>1、用户刷卡登录</h3><ul>\n<li>将卡片靠近读卡器</li>\n<li>利用NFC功能读取IC卡中存储的用户ID以及password，再向远程服务器发出HTTP请求，远程服务器发送数据到手机中，最后页面响应变化反应给用户。</li>\n</ul>\n<p><img src=\"/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg\" alt=\"Screenshot_20230114-134725\" style=\"zoom: 15%;\"><img src=\"/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg\" alt=\"Screenshot_20230114-134731\" style=\"zoom:15%;\"></p>\n<h3 id=\"2、充值功能\"><a href=\"#2、充值功能\" class=\"headerlink\" title=\"2、充值功能\"></a>2、充值功能</h3><ul>\n<li>输入充值金额或者点击相应的金额按钮使得确认按钮可点击</li>\n<li>点击确认按钮，弹出<strong>ReadDialog</strong>,</li>\n<li>将卡片贴近读卡器，<strong>向卡片中写入信息</strong>同时<strong>更新服务器中的信息</strong></li>\n<li>将更改的充值信息更新到UI界面上，可以看到下图<strong>账户余额</strong>变为250元</li>\n</ul>\n<img src=\"/images/CardSpending/Untitled-1685249374298-15.png\" alt=\"Untitled\" style=\"zoom:50%;\">\n\n<h3 id=\"3、消费功能\"><a href=\"#3、消费功能\" class=\"headerlink\" title=\"3、消费功能\"></a>3、消费功能</h3><ul>\n<li>输入消费金额或者点击相应的金额按钮使得确认按钮可点击</li>\n<li>点击确认按钮，弹出<strong>ReadDialog</strong>,</li>\n<li>将卡片贴近读卡器，<strong>向卡片中写入信息</strong>同时<strong>更新服务器中的信息</strong></li>\n<li>将更改的充值信息更新到UI界面上，可以看到下图<strong>账户余额</strong>变为230元</li>\n</ul>\n<img src=\"/images/CardSpending/Untitled%201-1685249325027-13.png\" alt=\"Untitled 1\" style=\"zoom:50%;\">\n\n<h3 id=\"4、历史记录查看功能\"><a href=\"#4、历史记录查看功能\" class=\"headerlink\" title=\"4、历史记录查看功能\"></a>4、历史记录查看功能</h3><ul>\n<li>进入“我的”界面，点击历史记录</li>\n<li>跳转到历史记录界面</li>\n<li>手机请求服务器数据，并更新到UI界面</li>\n<li>可以看到下图出现最新的充值消费记录</li>\n</ul>\n<img src=\"/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg\" alt=\"Screenshot_20230114-141614\" style=\"zoom:15%;\">\n\n<h1 id=\"二、实现方法\"><a href=\"#二、实现方法\" class=\"headerlink\" title=\"二、实现方法\"></a>二、实现方法</h1><h2 id=\"整体设计\"><a href=\"#整体设计\" class=\"headerlink\" title=\"整体设计\"></a>整体设计</h2><p><img src=\"/images/CardSpending/Untitled%202-1685249399313-17.png\" alt=\"Untitled 2\"></p>\n<h2 id=\"服务器端\"><a href=\"#服务器端\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h2><ul>\n<li>使用<strong>Node.js</strong>实现后端逻辑</li>\n<li>使用<strong>Apipost</strong>写接口文档</li>\n<li>使用<strong>花生壳</strong>做<strong><strong>内网穿透</strong></strong>实现外网可以访问服务器</li>\n</ul>\n<h3 id=\"1、用户登录接口\"><a href=\"#1、用户登录接口\" class=\"headerlink\" title=\"1、用户登录接口\"></a>1、用户登录接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/bfb37dde95f7dea8/793a161f3c06bbe9?target_id=8533f09a-d158-47f9-8ce5-d747009c5293\">用户登录 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133143833.png\" alt=\"image-20230528133143833\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 登录</span></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">query</span>.<span class=\"property\">passwo</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;select * from StuInfo where Id=&#x27;&quot;</span> + <span class=\"title class_\">Id</span> + <span class=\"string\">&quot;&#x27;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;登录结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> != <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;登录成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">password</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">password</span>,</span><br><span class=\"line\">                <span class=\"attr\">surplus</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">surplus</span>,</span><br><span class=\"line\">                <span class=\"attr\">electricity</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">electricity</span>,</span><br><span class=\"line\">                <span class=\"attr\">water</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">water</span>,</span><br><span class=\"line\">                <span class=\"attr\">isHelp</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">isHelp</span>,</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、余额更新接口\"><a href=\"#2、余额更新接口\" class=\"headerlink\" title=\"2、余额更新接口\"></a>2、余额更新接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/a7e5b575ed757db3/49bcb1e57f19c36c?target_id=d24e4644-8478-4315-8d2b-d6800efe48a1\">更新余额 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133216623.png\" alt=\"image-20230528133216623\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 更新surplus</span></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/update&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">query</span>.<span class=\"property\">password</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> surplus = req.<span class=\"property\">query</span>.<span class=\"property\">surplus</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;update StuInfo set surplus=&#x27;&quot;</span>+surplus+ <span class=\"string\">&quot;&#x27; where id=&#x27;&quot;</span>+<span class=\"title class_\">Id</span>+<span class=\"string\">&quot;&#x27;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;更新结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> != <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;修改成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: <span class=\"title class_\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">password</span>: password,</span><br><span class=\"line\">                <span class=\"attr\">surplus</span>: surplus,</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、查询历史记录接口\"><a href=\"#3、查询历史记录接口\" class=\"headerlink\" title=\"3、查询历史记录接口\"></a>3、查询历史记录接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/83deb98d1f9881c6/2f37ecca48c2afe8?target_id=ab9700ab-5f9f-4475-8bee-ef39f742f5a2\">查询历史记录 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133239391.png\" alt=\"image-20230528133239391\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 查询历史记录</span></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/history&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> </span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">query</span>.<span class=\"property\">password</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;select * from History where Id=&#x27;&quot;</span>+<span class=\"title class_\">Id</span>+<span class=\"string\">&quot;&#x27;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;历史记录查询结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> &lt; <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;查询成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: <span class=\"title class_\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">password</span>: password,</span><br><span class=\"line\">                <span class=\"attr\">history</span>:result.<span class=\"property\">recordsets</span>[<span class=\"number\">0</span>]</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、添加历史记录接口\"><a href=\"#4、添加历史记录接口\" class=\"headerlink\" title=\"4、添加历史记录接口\"></a>4、添加历史记录接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/3948990c824fc8cd/4f01552dd8b40f0f?target_id=d33893d9-192a-4a03-b327-4e0fbc777d97\">添加历史记录接口 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133300931.png\" alt=\"image-20230528133300931\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/addhistory&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> </span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> date = req.<span class=\"property\">query</span>.<span class=\"property\">date</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> money = req.<span class=\"property\">query</span>.<span class=\"property\">money</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> type = req.<span class=\"property\">query</span>.<span class=\"property\">type</span></span><br><span class=\"line\">    <span class=\"comment\">//insert into History values(&#x27;8202201417&#x27;,&#x27;2022-1-3 16:18:23&#x27;,&#x27;充值记录&#x27;,&#x27;5.22&#x27;)</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;insert into History values(&#x27;&quot;</span>+<span class=\"title class_\">Id</span>+<span class=\"string\">&quot;&#x27;,&#x27;&quot;</span>+date+<span class=\"string\">&quot;&#x27;,&#x27;&quot;</span>+type+<span class=\"string\">&quot;&#x27;,&#x27;&quot;</span>+money+<span class=\"string\">&quot;&#x27;)&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;历史记录添加结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> &lt; <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;添加成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: <span class=\"title class_\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">type</span>: type,</span><br><span class=\"line\">                <span class=\"attr\">date</span>:date,</span><br><span class=\"line\">                <span class=\"attr\">money</span>:money</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、Node数据库连接\"><a href=\"#5、Node数据库连接\" class=\"headerlink\" title=\"5、Node数据库连接\"></a>5、Node数据库连接</h3><p>这里是连接本地数据库</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 导入 mysql 模块</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mssql = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mssql&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建数据库连接对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> config = &#123;</span><br><span class=\"line\">    <span class=\"attr\">user</span>: <span class=\"string\">&#x27;sa&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">password</span>: <span class=\"string\">&#x27;123456&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">server</span>: <span class=\"string\">&#x27;127.0.0.1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">database</span>: <span class=\"string\">&#x27;dbsqlconnect&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">1433</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">encrypt</span>: <span class=\"literal\">false</span> <span class=\"comment\">// Use this if you&#x27;re on Windows Azure</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">pool</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">min</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">max</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">        <span class=\"attr\">idleTimeoutMillis</span>: <span class=\"number\">3000</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//执行sql,返回数据.</span></span><br><span class=\"line\">db.<span class=\"property\">query</span> = <span class=\"keyword\">function</span> (<span class=\"params\">sql, callBack</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> connection = <span class=\"keyword\">new</span> mssql.<span class=\"title class_\">ConnectionPool</span>(config, <span class=\"keyword\">function</span> (<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> ps = <span class=\"keyword\">new</span> mssql.<span class=\"title class_\">PreparedStatement</span>(connection);</span><br><span class=\"line\">        ps.<span class=\"title function_\">prepare</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ps.<span class=\"title function_\">execute</span>(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                ps.<span class=\"title function_\">unprepare</span>(<span class=\"keyword\">function</span> (<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">                        <span class=\"title function_\">callback</span>(err, <span class=\"literal\">null</span>);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"title function_\">callBack</span>(err, result);</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 向外共享 db 数据库连接对象</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = db</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、数据库设计\"><a href=\"#6、数据库设计\" class=\"headerlink\" title=\"6、数据库设计\"></a>6、数据库设计</h3><p>一共有两个表格</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> StuInfo</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> StuInfo</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> StuInfo</span><br><span class=\"line\">(</span><br><span class=\"line\">\tId <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tpassword <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tsurplus <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\telectricity <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\twater <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tisHelp <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> StuInfo <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;1234&#x27;</span>,<span class=\"string\">&#x27;23.5&#x27;</span>,<span class=\"string\">&#x27;56.4&#x27;</span>,<span class=\"string\">&#x27;324.3&#x27;</span>,<span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> History</span><br><span class=\"line\">(</span><br><span class=\"line\">\tId <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\t<span class=\"type\">date</span> <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\ttype <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tmoney <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> History</span><br><span class=\"line\"><span class=\"comment\">--yyyy-MM-dd HH:mm:ss</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;消费记录&#x27;</span>,<span class=\"string\">&#x27;16.4&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;消费记录&#x27;</span>,<span class=\"string\">&#x27;4.4&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;消费记录&#x27;</span>,<span class=\"string\">&#x27;56.4&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;充值记录&#x27;</span>,<span class=\"string\">&#x27;5.22&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> History <span class=\"keyword\">where</span> Id<span class=\"operator\">=</span><span class=\"string\">&#x27;8202201417&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> History</span><br></pre></td></tr></table></figure>\n\n<p><strong>数据库：dbsqlconnect</strong></p>\n<ul>\n<li><strong>StuInfo</strong></li>\n</ul>\n<img src=\"/images/CardSpending/Untitled%2015-1685252038490-19.png\" alt=\"Untitled 15\" style=\"zoom:67%;\">\n\n<ul>\n<li><strong>History</strong></li>\n</ul>\n<img src=\"/images/CardSpending/Untitled%2016-1685252055780-21.png\" alt=\"Untitled 16\" style=\"zoom:50%;\">\n\n<h3 id=\"7、花生壳内网穿透\"><a href=\"#7、花生壳内网穿透\" class=\"headerlink\" title=\"7、花生壳内网穿透\"></a>7、花生壳内网穿透</h3><p><a href=\"https://console.hsk.oray.com/forward\">花生壳管理 - 内网穿透 (oray.com)</a></p>\n<img src=\"/images/CardSpending/Untitled%2017-1685252073223-23.png\" alt=\"Untitled 17\" style=\"zoom: 33%;\">\n\n<p>这里需要注意的是：</p>\n<p><strong>内网的ip地址有可能改变，所以需要在使用之前确认</strong>。</p>\n<h2 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h2><p>客户端的设计主要分为ui设计，以及一些逻辑实现。其中逻辑部分包括：</p>\n<ul>\n<li>读卡部分</li>\n<li>数据库操作</li>\n<li>网络连接</li>\n<li>界面数据共享与更新</li>\n</ul>\n<h3 id=\"1、读卡部分\"><a href=\"#1、读卡部分\" class=\"headerlink\" title=\"1、读卡部分\"></a>1、读卡部分</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">读取NFC内容</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">public <span class=\"keyword\">static</span> <span class=\"title class_\">String</span>[] <span class=\"title function_\">read</span>(<span class=\"params\">Tag tag</span>)&#123;</span><br><span class=\"line\">    <span class=\"title class_\">String</span>[] s_blocks = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[<span class=\"number\">20</span>];</span><br><span class=\"line\">    <span class=\"title class_\">MifareClassic</span> mif = <span class=\"title class_\">MifareClassic</span>.<span class=\"title function_\">get</span>(tag);</span><br><span class=\"line\">    int ttype = mif.<span class=\"title function_\">getType</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;MifareClassic tag type: &quot;</span> + ttype);</span><br><span class=\"line\">    int tsize = mif.<span class=\"title function_\">getSize</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;tag size: &quot;</span> + tsize);</span><br><span class=\"line\">    int s_len = mif.<span class=\"title function_\">getSectorCount</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;tag sector count: &quot;</span> + s_len);</span><br><span class=\"line\">    int b_len = mif.<span class=\"title function_\">getBlockCount</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;tag block count: &quot;</span> + b_len);</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        mif.<span class=\"title function_\">connect</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">isConnected</span>())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=<span class=\"number\">0</span>; i&lt; s_len; i++)&#123;</span><br><span class=\"line\">                boolean isAuthenticated = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">authenticateSectorWithKeyA</span>(i, <span class=\"title class_\">MifareClassic</span>.<span class=\"property\">KEY_MIFARE_APPLICATION_DIRECTORY</span>)) &#123;</span><br><span class=\"line\">                    isAuthenticated = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">authenticateSectorWithKeyA</span>(i, <span class=\"title class_\">MifareClassic</span>.<span class=\"property\">KEY_DEFAULT</span>)) &#123;</span><br><span class=\"line\">                    isAuthenticated = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">authenticateSectorWithKeyA</span>(i,<span class=\"title class_\">MifareClassic</span>.<span class=\"property\">KEY_NFC_FORUM</span>)) &#123;</span><br><span class=\"line\">                    isAuthenticated = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"string\">&quot;TAG&quot;</span>, <span class=\"string\">&quot;Authorization denied &quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(isAuthenticated) &#123;</span><br><span class=\"line\">                    int block_index = mif.<span class=\"title function_\">sectorToBlock</span>(i);</span><br><span class=\"line\">                    <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"title class_\">String</span>.<span class=\"title function_\">valueOf</span>(block_index));</span><br><span class=\"line\">                    byte[] block = mif.<span class=\"title function_\">readBlock</span>(block_index);</span><br><span class=\"line\">                    <span class=\"title class_\">String</span> s_block = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(block,<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                    s_blocks[i] = s_block;</span><br><span class=\"line\">                    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, s_block);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        mif.<span class=\"title function_\">close</span>();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (<span class=\"title class_\">IOException</span> e) &#123;</span><br><span class=\"line\">        e.<span class=\"title function_\">printStackTrace</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> s_blocks;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、网络连接\"><a href=\"#2、网络连接\" class=\"headerlink\" title=\"2、网络连接\"></a>2、网络连接</h3><ul>\n<li><strong>用户刷卡登录请求服务器数据</strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//构建URL请求并获取内容</span></span><br><span class=\"line\">    public <span class=\"title class_\">Student</span> <span class=\"title function_\">fetchItems</span>(<span class=\"params\">boolean isUpdate</span>) &#123;</span><br><span class=\"line\">        mStudent=<span class=\"title class_\">Student</span>.<span class=\"title function_\">getStudent</span>();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"title class_\">String</span> url;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(isUpdate)&#123;</span><br><span class=\"line\">                url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/update&quot;</span>)</span><br><span class=\"line\">                        .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;password&quot;</span>, mStudent.<span class=\"title function_\">getPassword</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;surplus&quot;</span>, mStudent.<span class=\"title function_\">getSurplus</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/login&quot;</span>)</span><br><span class=\"line\">                        .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;password&quot;</span>, mStudent.<span class=\"title function_\">getPassword</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title class_\">String</span> jsonString = <span class=\"title function_\">getUrlString</span>(url);</span><br><span class=\"line\">            <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;Received JSON: &quot;</span> + jsonString);</span><br><span class=\"line\">            <span class=\"comment\">//将JSON数据解析成相应的Java对象</span></span><br><span class=\"line\">            <span class=\"title class_\">JSON</span><span class=\"built_in\">Object</span> jsonBody = <span class=\"keyword\">new</span> <span class=\"title class_\">JSON</span><span class=\"built_in\">Object</span>(jsonString);</span><br><span class=\"line\">            <span class=\"title class_\">String</span> status = jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;status&quot;</span>);</span><br><span class=\"line\">            <span class=\"title class_\">String</span> message = jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;message&quot;</span>);</span><br><span class=\"line\">            <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>,<span class=\"string\">&quot;status : &quot;</span>+status);</span><br><span class=\"line\">            <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>,<span class=\"string\">&quot;message : &quot;</span>+message);</span><br><span class=\"line\">            <span class=\"comment\">//判断登录状态</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(status.<span class=\"title function_\">equals</span>(<span class=\"string\">&quot;0&quot;</span>))&#123; <span class=\"comment\">//登录成功</span></span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setId</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;Id&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setPassword</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;password&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setSurplus</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;surplus&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setElectricity</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;electricity&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setWater</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;water&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setIsHelp</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;isHelp&quot;</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span>&#123;                   <span class=\"comment\">//登录失败:弹出Dialog提示卡片不正确</span></span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setPassword</span>(<span class=\"string\">&quot;wrong&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>用户充值消费更改服务器数据</strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">*实现AsyncTask工具类</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">private <span class=\"keyword\">class</span> <span class=\"title class_\">FetchItemsTask</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">AsyncTask</span>&lt;<span class=\"title class_\">Void</span>,<span class=\"title class_\">Void</span>, <span class=\"title class_\">Student</span>&gt; &#123;</span><br><span class=\"line\">    private <span class=\"title class_\">String</span> mSurplus;</span><br><span class=\"line\">    private boolean mIsUpdate;</span><br><span class=\"line\">    public <span class=\"title class_\">FetchItemsTask</span>(boolean isUpdate) &#123;</span><br><span class=\"line\">        mIsUpdate = isUpdate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"title class_\">Student</span> <span class=\"title function_\">doInBackground</span>(<span class=\"params\">Void... params</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StudentFetcher</span>().<span class=\"title function_\">fetchItems</span>(mIsUpdate);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span>(<span class=\"params\">Student items</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"string\">&quot;mStudent&quot;</span>,items.<span class=\"title function_\">getId</span>());</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(items.<span class=\"title function_\">getPassword</span>().<span class=\"title function_\">equals</span>(<span class=\"string\">&quot;wrong&quot;</span>))&#123;     <span class=\"comment\">//登录失败:弹出Dialog提示卡片不正确</span></span><br><span class=\"line\">            <span class=\"title function_\">tipDialog</span>(<span class=\"title class_\">MainActivity</span>.<span class=\"property\">this</span>,<span class=\"string\">&quot;您的卡不在系统中&quot;</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;                                           <span class=\"comment\">//登录成功:更新界面</span></span><br><span class=\"line\">            <span class=\"title function_\">setUI</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *实现AsyncTask工具类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">private <span class=\"keyword\">class</span> <span class=\"title class_\">FetchItemsTask</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">AsyncTask</span>&lt;<span class=\"title class_\">Void</span>,<span class=\"title class_\">Void</span>, <span class=\"title class_\">HistoryLab</span>&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"title class_\">HistoryLab</span> <span class=\"title function_\">doInBackground</span>(<span class=\"params\">Void... params</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">String</span> url;</span><br><span class=\"line\">        <span class=\"title class_\">SimpleDateFormat</span> formatter = <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class=\"line\">        <span class=\"title class_\">String</span> dateString = formatter.<span class=\"title function_\">format</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/addhistory&quot;</span>)</span><br><span class=\"line\">                .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;type&quot;</span>, <span class=\"string\">&quot;充值记录&quot;</span>)</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;date&quot;</span>, dateString)</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;money&quot;</span>, mMoney)</span><br><span class=\"line\">                .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">HistoryFetcher</span>().<span class=\"title function_\">fetchItems</span>(url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span>(<span class=\"params\">HistoryLab items</span>) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>用户获取历史记录数据</strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *实现AsyncTask工具类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">private <span class=\"keyword\">class</span> <span class=\"title class_\">FetchItemsTask</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">AsyncTask</span>&lt;<span class=\"title class_\">Void</span>,<span class=\"title class_\">Void</span>, <span class=\"title class_\">HistoryLab</span>&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"title class_\">HistoryLab</span> <span class=\"title function_\">doInBackground</span>(<span class=\"params\">Void... params</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">String</span> url;</span><br><span class=\"line\">        url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/history&quot;</span>)</span><br><span class=\"line\">                .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;password&quot;</span>, mStudent.<span class=\"title function_\">getPassword</span>())</span><br><span class=\"line\">                .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">HistoryFetcher</span>().<span class=\"title function_\">fetchItems</span>(url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span>(<span class=\"params\">HistoryLab items</span>) &#123;</span><br><span class=\"line\">        mHistoryLab = items;</span><br><span class=\"line\">        <span class=\"title function_\">setupAdapter</span>();</span><br><span class=\"line\">        <span class=\"comment\">//updateView();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、界面数据共享与更新\"><a href=\"#3、界面数据共享与更新\" class=\"headerlink\" title=\"3、界面数据共享与更新\"></a>3、界面数据共享与更新</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public <span class=\"keyword\">class</span> <span class=\"title class_\">MeViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">ViewModel</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private final <span class=\"title class_\">MutableLiveData</span>&lt;<span class=\"title class_\">Student</span>&gt; mStudent;</span><br><span class=\"line\">    private final <span class=\"title class_\">MutableLiveData</span>&lt;<span class=\"title class_\">String</span>&gt; mMoney;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"title class_\">MeViewModel</span>() &#123;</span><br><span class=\"line\">        mStudent = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;&gt;();</span><br><span class=\"line\">        mMoney= <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;<span class=\"title class_\">String</span>&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"keyword\">void</span> <span class=\"title function_\">setMoney</span>(<span class=\"params\"><span class=\"built_in\">String</span> money</span>) &#123;</span><br><span class=\"line\">        mMoney.<span class=\"title function_\">setValue</span>(money);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"title class_\">LiveData</span>&lt;<span class=\"title class_\">String</span>&gt; <span class=\"title function_\">getMoney</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mMoney;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"keyword\">void</span> <span class=\"title function_\">setStudent</span>(<span class=\"params\">Student student</span>) &#123;</span><br><span class=\"line\">        mStudent.<span class=\"title function_\">setValue</span>(student);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"title class_\">LiveData</span>&lt;<span class=\"title class_\">Student</span>&gt; <span class=\"title function_\">getStudent</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mStudent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"CardSpending-APP\"><a href=\"#CardSpending-APP\" class=\"headerlink\" title=\"CardSpending APP\"></a>CardSpending APP</h1><h1 id=\"一、主要功能\"><a href=\"#一、主要功能\" class=\"headerlink\" title=\"一、主要功能\"></a>一、主要功能</h1><h3 id=\"1、用户刷卡登录\"><a href=\"#1、用户刷卡登录\" class=\"headerlink\" title=\"1、用户刷卡登录\"></a>1、用户刷卡登录</h3><ul>\n<li>将卡片靠近读卡器</li>\n<li>利用NFC功能读取IC卡中存储的用户ID以及password，再向远程服务器发出HTTP请求，远程服务器发送数据到手机中，最后页面响应变化反应给用户。</li>\n</ul>\n<p><img src=\"/images/CardSpending/Screenshot_20230114-134725-1685249167504-7.jpg\" alt=\"Screenshot_20230114-134725\" style=\"zoom: 15%;\"><img src=\"/images/CardSpending/Screenshot_20230114-134731-1685249242012-9.jpg\" alt=\"Screenshot_20230114-134731\" style=\"zoom:15%;\"></p>\n<h3 id=\"2、充值功能\"><a href=\"#2、充值功能\" class=\"headerlink\" title=\"2、充值功能\"></a>2、充值功能</h3><ul>\n<li>输入充值金额或者点击相应的金额按钮使得确认按钮可点击</li>\n<li>点击确认按钮，弹出<strong>ReadDialog</strong>,</li>\n<li>将卡片贴近读卡器，<strong>向卡片中写入信息</strong>同时<strong>更新服务器中的信息</strong></li>\n<li>将更改的充值信息更新到UI界面上，可以看到下图<strong>账户余额</strong>变为250元</li>\n</ul>\n<img src=\"/images/CardSpending/Untitled-1685249374298-15.png\" alt=\"Untitled\" style=\"zoom:50%;\">\n\n<h3 id=\"3、消费功能\"><a href=\"#3、消费功能\" class=\"headerlink\" title=\"3、消费功能\"></a>3、消费功能</h3><ul>\n<li>输入消费金额或者点击相应的金额按钮使得确认按钮可点击</li>\n<li>点击确认按钮，弹出<strong>ReadDialog</strong>,</li>\n<li>将卡片贴近读卡器，<strong>向卡片中写入信息</strong>同时<strong>更新服务器中的信息</strong></li>\n<li>将更改的充值信息更新到UI界面上，可以看到下图<strong>账户余额</strong>变为230元</li>\n</ul>\n<img src=\"/images/CardSpending/Untitled%201-1685249325027-13.png\" alt=\"Untitled 1\" style=\"zoom:50%;\">\n\n<h3 id=\"4、历史记录查看功能\"><a href=\"#4、历史记录查看功能\" class=\"headerlink\" title=\"4、历史记录查看功能\"></a>4、历史记录查看功能</h3><ul>\n<li>进入“我的”界面，点击历史记录</li>\n<li>跳转到历史记录界面</li>\n<li>手机请求服务器数据，并更新到UI界面</li>\n<li>可以看到下图出现最新的充值消费记录</li>\n</ul>\n<img src=\"/images/CardSpending/Screenshot_20230114-141614-1685249291919-11.jpg\" alt=\"Screenshot_20230114-141614\" style=\"zoom:15%;\">\n\n<h1 id=\"二、实现方法\"><a href=\"#二、实现方法\" class=\"headerlink\" title=\"二、实现方法\"></a>二、实现方法</h1><h2 id=\"整体设计\"><a href=\"#整体设计\" class=\"headerlink\" title=\"整体设计\"></a>整体设计</h2><p><img src=\"/images/CardSpending/Untitled%202-1685249399313-17.png\" alt=\"Untitled 2\"></p>\n<h2 id=\"服务器端\"><a href=\"#服务器端\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h2><ul>\n<li>使用<strong>Node.js</strong>实现后端逻辑</li>\n<li>使用<strong>Apipost</strong>写接口文档</li>\n<li>使用<strong>花生壳</strong>做<strong><strong>内网穿透</strong></strong>实现外网可以访问服务器</li>\n</ul>\n<h3 id=\"1、用户登录接口\"><a href=\"#1、用户登录接口\" class=\"headerlink\" title=\"1、用户登录接口\"></a>1、用户登录接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/bfb37dde95f7dea8/793a161f3c06bbe9?target_id=8533f09a-d158-47f9-8ce5-d747009c5293\">用户登录 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133143833.png\" alt=\"image-20230528133143833\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 登录</span></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">query</span>.<span class=\"property\">passwo</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;select * from StuInfo where Id=&#x27;&quot;</span> + <span class=\"title class_\">Id</span> + <span class=\"string\">&quot;&#x27;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;登录结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> != <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;登录成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">password</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">password</span>,</span><br><span class=\"line\">                <span class=\"attr\">surplus</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">surplus</span>,</span><br><span class=\"line\">                <span class=\"attr\">electricity</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">electricity</span>,</span><br><span class=\"line\">                <span class=\"attr\">water</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">water</span>,</span><br><span class=\"line\">                <span class=\"attr\">isHelp</span>: result.<span class=\"property\">recordset</span>[<span class=\"number\">0</span>].<span class=\"property\">isHelp</span>,</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、余额更新接口\"><a href=\"#2、余额更新接口\" class=\"headerlink\" title=\"2、余额更新接口\"></a>2、余额更新接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/a7e5b575ed757db3/49bcb1e57f19c36c?target_id=d24e4644-8478-4315-8d2b-d6800efe48a1\">更新余额 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133216623.png\" alt=\"image-20230528133216623\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 更新surplus</span></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/update&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">query</span>.<span class=\"property\">password</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> surplus = req.<span class=\"property\">query</span>.<span class=\"property\">surplus</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;update StuInfo set surplus=&#x27;&quot;</span>+surplus+ <span class=\"string\">&quot;&#x27; where id=&#x27;&quot;</span>+<span class=\"title class_\">Id</span>+<span class=\"string\">&quot;&#x27;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;更新结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> != <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;修改成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: <span class=\"title class_\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">password</span>: password,</span><br><span class=\"line\">                <span class=\"attr\">surplus</span>: surplus,</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、查询历史记录接口\"><a href=\"#3、查询历史记录接口\" class=\"headerlink\" title=\"3、查询历史记录接口\"></a>3、查询历史记录接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/83deb98d1f9881c6/2f37ecca48c2afe8?target_id=ab9700ab-5f9f-4475-8bee-ef39f742f5a2\">查询历史记录 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133239391.png\" alt=\"image-20230528133239391\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 查询历史记录</span></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/history&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> </span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">query</span>.<span class=\"property\">password</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;select * from History where Id=&#x27;&quot;</span>+<span class=\"title class_\">Id</span>+<span class=\"string\">&quot;&#x27;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;历史记录查询结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> &lt; <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;查询成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: <span class=\"title class_\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">password</span>: password,</span><br><span class=\"line\">                <span class=\"attr\">history</span>:result.<span class=\"property\">recordsets</span>[<span class=\"number\">0</span>]</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、添加历史记录接口\"><a href=\"#4、添加历史记录接口\" class=\"headerlink\" title=\"4、添加历史记录接口\"></a>4、添加历史记录接口</h3><p><a href=\"https://console-docs.apipost.cn/preview/3948990c824fc8cd/4f01552dd8b40f0f?target_id=d33893d9-192a-4a03-b327-4e0fbc777d97\">添加历史记录接口 - Powered by Apipost V7</a></p>\n<img src=\"/images/CardSpending/image-20230528133300931.png\" alt=\"image-20230528133300931\" style=\"zoom:50%;\">\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/addhistory&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> </span><br><span class=\"line\">    req.<span class=\"property\">query</span> = querystring.<span class=\"title function_\">parse</span>(url.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;?&#x27;</span>)[<span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\">//参数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title class_\">Id</span> = req.<span class=\"property\">query</span>.<span class=\"property\">Id</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> date = req.<span class=\"property\">query</span>.<span class=\"property\">date</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> money = req.<span class=\"property\">query</span>.<span class=\"property\">money</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> type = req.<span class=\"property\">query</span>.<span class=\"property\">type</span></span><br><span class=\"line\">    <span class=\"comment\">//insert into History values(&#x27;8202201417&#x27;,&#x27;2022-1-3 16:18:23&#x27;,&#x27;充值记录&#x27;,&#x27;5.22&#x27;)</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> sql = <span class=\"string\">&quot;insert into History values(&#x27;&quot;</span>+<span class=\"title class_\">Id</span>+<span class=\"string\">&quot;&#x27;,&#x27;&quot;</span>+date+<span class=\"string\">&quot;&#x27;,&#x27;&quot;</span>+type+<span class=\"string\">&quot;&#x27;,&#x27;&quot;</span>+money+<span class=\"string\">&quot;&#x27;)&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> error = <span class=\"string\">&#x27;null&#x27;</span></span><br><span class=\"line\">    db.<span class=\"title function_\">query</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;历史记录添加结果：&quot;</span>+result)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123; error = <span class=\"string\">&quot;执行 SQL 语句失败&quot;</span> &#125;                    <span class=\"comment\">// 执行 SQL 语句失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result.<span class=\"property\">rowsAffected</span> &lt; <span class=\"number\">1</span>) &#123; error = <span class=\"string\">&#x27;登录失败！&#x27;</span> &#125;   <span class=\"comment\">// 执行 SQL 语句成功，但是查询到数据条数不等于 1    </span></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;用户名存在&quot;</span>)         <span class=\"comment\">//用户名存在     </span></span><br><span class=\"line\">        res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;text/html;charset=utf8&quot;</span>);<span class=\"comment\">//如果打开页面乱码, 设置</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error === <span class=\"string\">&#x27;null&#x27;</span>) &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: <span class=\"string\">&#x27;添加成功！&#x27;</span>,</span><br><span class=\"line\">                <span class=\"title class_\">Id</span>: <span class=\"title class_\">Id</span>,</span><br><span class=\"line\">                <span class=\"attr\">type</span>: type,</span><br><span class=\"line\">                <span class=\"attr\">date</span>:date,</span><br><span class=\"line\">                <span class=\"attr\">money</span>:money</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.<span class=\"title function_\">send</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">status</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: error</span><br><span class=\"line\">            &#125;))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、Node数据库连接\"><a href=\"#5、Node数据库连接\" class=\"headerlink\" title=\"5、Node数据库连接\"></a>5、Node数据库连接</h3><p>这里是连接本地数据库</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 导入 mysql 模块</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mssql = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mssql&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建数据库连接对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> config = &#123;</span><br><span class=\"line\">    <span class=\"attr\">user</span>: <span class=\"string\">&#x27;sa&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">password</span>: <span class=\"string\">&#x27;123456&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">server</span>: <span class=\"string\">&#x27;127.0.0.1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">database</span>: <span class=\"string\">&#x27;dbsqlconnect&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">1433</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">encrypt</span>: <span class=\"literal\">false</span> <span class=\"comment\">// Use this if you&#x27;re on Windows Azure</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">pool</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">min</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">max</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">        <span class=\"attr\">idleTimeoutMillis</span>: <span class=\"number\">3000</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//执行sql,返回数据.</span></span><br><span class=\"line\">db.<span class=\"property\">query</span> = <span class=\"keyword\">function</span> (<span class=\"params\">sql, callBack</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> connection = <span class=\"keyword\">new</span> mssql.<span class=\"title class_\">ConnectionPool</span>(config, <span class=\"keyword\">function</span> (<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> ps = <span class=\"keyword\">new</span> mssql.<span class=\"title class_\">PreparedStatement</span>(connection);</span><br><span class=\"line\">        ps.<span class=\"title function_\">prepare</span>(sql, <span class=\"keyword\">function</span> (<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ps.<span class=\"title function_\">execute</span>(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                ps.<span class=\"title function_\">unprepare</span>(<span class=\"keyword\">function</span> (<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err);</span><br><span class=\"line\">                        <span class=\"title function_\">callback</span>(err, <span class=\"literal\">null</span>);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"title function_\">callBack</span>(err, result);</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 向外共享 db 数据库连接对象</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = db</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、数据库设计\"><a href=\"#6、数据库设计\" class=\"headerlink\" title=\"6、数据库设计\"></a>6、数据库设计</h3><p>一共有两个表格</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> StuInfo</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> StuInfo</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> StuInfo</span><br><span class=\"line\">(</span><br><span class=\"line\">\tId <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tpassword <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tsurplus <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\telectricity <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\twater <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tisHelp <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> StuInfo <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;1234&#x27;</span>,<span class=\"string\">&#x27;23.5&#x27;</span>,<span class=\"string\">&#x27;56.4&#x27;</span>,<span class=\"string\">&#x27;324.3&#x27;</span>,<span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> History</span><br><span class=\"line\">(</span><br><span class=\"line\">\tId <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\t<span class=\"type\">date</span> <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\ttype <span class=\"type\">varchar</span>(<span class=\"number\">40</span>),</span><br><span class=\"line\">\tmoney <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> History</span><br><span class=\"line\"><span class=\"comment\">--yyyy-MM-dd HH:mm:ss</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;消费记录&#x27;</span>,<span class=\"string\">&#x27;16.4&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;消费记录&#x27;</span>,<span class=\"string\">&#x27;4.4&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;消费记录&#x27;</span>,<span class=\"string\">&#x27;56.4&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> History <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;8202201417&#x27;</span>,<span class=\"string\">&#x27;2022-1-3 16:18:23&#x27;</span>,<span class=\"string\">&#x27;充值记录&#x27;</span>,<span class=\"string\">&#x27;5.22&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> History <span class=\"keyword\">where</span> Id<span class=\"operator\">=</span><span class=\"string\">&#x27;8202201417&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> History</span><br></pre></td></tr></table></figure>\n\n<p><strong>数据库：dbsqlconnect</strong></p>\n<ul>\n<li><strong>StuInfo</strong></li>\n</ul>\n<img src=\"/images/CardSpending/Untitled%2015-1685252038490-19.png\" alt=\"Untitled 15\" style=\"zoom:67%;\">\n\n<ul>\n<li><strong>History</strong></li>\n</ul>\n<img src=\"/images/CardSpending/Untitled%2016-1685252055780-21.png\" alt=\"Untitled 16\" style=\"zoom:50%;\">\n\n<h3 id=\"7、花生壳内网穿透\"><a href=\"#7、花生壳内网穿透\" class=\"headerlink\" title=\"7、花生壳内网穿透\"></a>7、花生壳内网穿透</h3><p><a href=\"https://console.hsk.oray.com/forward\">花生壳管理 - 内网穿透 (oray.com)</a></p>\n<img src=\"/images/CardSpending/Untitled%2017-1685252073223-23.png\" alt=\"Untitled 17\" style=\"zoom: 33%;\">\n\n<p>这里需要注意的是：</p>\n<p><strong>内网的ip地址有可能改变，所以需要在使用之前确认</strong>。</p>\n<h2 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h2><p>客户端的设计主要分为ui设计，以及一些逻辑实现。其中逻辑部分包括：</p>\n<ul>\n<li>读卡部分</li>\n<li>数据库操作</li>\n<li>网络连接</li>\n<li>界面数据共享与更新</li>\n</ul>\n<h3 id=\"1、读卡部分\"><a href=\"#1、读卡部分\" class=\"headerlink\" title=\"1、读卡部分\"></a>1、读卡部分</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">读取NFC内容</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">public <span class=\"keyword\">static</span> <span class=\"title class_\">String</span>[] <span class=\"title function_\">read</span>(<span class=\"params\">Tag tag</span>)&#123;</span><br><span class=\"line\">    <span class=\"title class_\">String</span>[] s_blocks = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[<span class=\"number\">20</span>];</span><br><span class=\"line\">    <span class=\"title class_\">MifareClassic</span> mif = <span class=\"title class_\">MifareClassic</span>.<span class=\"title function_\">get</span>(tag);</span><br><span class=\"line\">    int ttype = mif.<span class=\"title function_\">getType</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;MifareClassic tag type: &quot;</span> + ttype);</span><br><span class=\"line\">    int tsize = mif.<span class=\"title function_\">getSize</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;tag size: &quot;</span> + tsize);</span><br><span class=\"line\">    int s_len = mif.<span class=\"title function_\">getSectorCount</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;tag sector count: &quot;</span> + s_len);</span><br><span class=\"line\">    int b_len = mif.<span class=\"title function_\">getBlockCount</span>();</span><br><span class=\"line\">    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;tag block count: &quot;</span> + b_len);</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        mif.<span class=\"title function_\">connect</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">isConnected</span>())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=<span class=\"number\">0</span>; i&lt; s_len; i++)&#123;</span><br><span class=\"line\">                boolean isAuthenticated = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">authenticateSectorWithKeyA</span>(i, <span class=\"title class_\">MifareClassic</span>.<span class=\"property\">KEY_MIFARE_APPLICATION_DIRECTORY</span>)) &#123;</span><br><span class=\"line\">                    isAuthenticated = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">authenticateSectorWithKeyA</span>(i, <span class=\"title class_\">MifareClassic</span>.<span class=\"property\">KEY_DEFAULT</span>)) &#123;</span><br><span class=\"line\">                    isAuthenticated = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (mif.<span class=\"title function_\">authenticateSectorWithKeyA</span>(i,<span class=\"title class_\">MifareClassic</span>.<span class=\"property\">KEY_NFC_FORUM</span>)) &#123;</span><br><span class=\"line\">                    isAuthenticated = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"string\">&quot;TAG&quot;</span>, <span class=\"string\">&quot;Authorization denied &quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(isAuthenticated) &#123;</span><br><span class=\"line\">                    int block_index = mif.<span class=\"title function_\">sectorToBlock</span>(i);</span><br><span class=\"line\">                    <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"title class_\">String</span>.<span class=\"title function_\">valueOf</span>(block_index));</span><br><span class=\"line\">                    byte[] block = mif.<span class=\"title function_\">readBlock</span>(block_index);</span><br><span class=\"line\">                    <span class=\"title class_\">String</span> s_block = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(block,<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                    s_blocks[i] = s_block;</span><br><span class=\"line\">                    <span class=\"title class_\">Log</span>.<span class=\"title function_\">d</span>(<span class=\"variable constant_\">TAG</span>, s_block);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        mif.<span class=\"title function_\">close</span>();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (<span class=\"title class_\">IOException</span> e) &#123;</span><br><span class=\"line\">        e.<span class=\"title function_\">printStackTrace</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> s_blocks;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、网络连接\"><a href=\"#2、网络连接\" class=\"headerlink\" title=\"2、网络连接\"></a>2、网络连接</h3><ul>\n<li><strong>用户刷卡登录请求服务器数据</strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//构建URL请求并获取内容</span></span><br><span class=\"line\">    public <span class=\"title class_\">Student</span> <span class=\"title function_\">fetchItems</span>(<span class=\"params\">boolean isUpdate</span>) &#123;</span><br><span class=\"line\">        mStudent=<span class=\"title class_\">Student</span>.<span class=\"title function_\">getStudent</span>();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"title class_\">String</span> url;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(isUpdate)&#123;</span><br><span class=\"line\">                url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/update&quot;</span>)</span><br><span class=\"line\">                        .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;password&quot;</span>, mStudent.<span class=\"title function_\">getPassword</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;surplus&quot;</span>, mStudent.<span class=\"title function_\">getSurplus</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/login&quot;</span>)</span><br><span class=\"line\">                        .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;password&quot;</span>, mStudent.<span class=\"title function_\">getPassword</span>())</span><br><span class=\"line\">                        .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title class_\">String</span> jsonString = <span class=\"title function_\">getUrlString</span>(url);</span><br><span class=\"line\">            <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>, <span class=\"string\">&quot;Received JSON: &quot;</span> + jsonString);</span><br><span class=\"line\">            <span class=\"comment\">//将JSON数据解析成相应的Java对象</span></span><br><span class=\"line\">            <span class=\"title class_\">JSON</span><span class=\"built_in\">Object</span> jsonBody = <span class=\"keyword\">new</span> <span class=\"title class_\">JSON</span><span class=\"built_in\">Object</span>(jsonString);</span><br><span class=\"line\">            <span class=\"title class_\">String</span> status = jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;status&quot;</span>);</span><br><span class=\"line\">            <span class=\"title class_\">String</span> message = jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;message&quot;</span>);</span><br><span class=\"line\">            <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>,<span class=\"string\">&quot;status : &quot;</span>+status);</span><br><span class=\"line\">            <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"variable constant_\">TAG</span>,<span class=\"string\">&quot;message : &quot;</span>+message);</span><br><span class=\"line\">            <span class=\"comment\">//判断登录状态</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(status.<span class=\"title function_\">equals</span>(<span class=\"string\">&quot;0&quot;</span>))&#123; <span class=\"comment\">//登录成功</span></span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setId</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;Id&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setPassword</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;password&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setSurplus</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;surplus&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setElectricity</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;electricity&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setWater</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;water&quot;</span>));</span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setIsHelp</span>(jsonBody.<span class=\"title function_\">getString</span>(<span class=\"string\">&quot;isHelp&quot;</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span>&#123;                   <span class=\"comment\">//登录失败:弹出Dialog提示卡片不正确</span></span><br><span class=\"line\">                mStudent.<span class=\"title function_\">setPassword</span>(<span class=\"string\">&quot;wrong&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>用户充值消费更改服务器数据</strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">*实现AsyncTask工具类</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">private <span class=\"keyword\">class</span> <span class=\"title class_\">FetchItemsTask</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">AsyncTask</span>&lt;<span class=\"title class_\">Void</span>,<span class=\"title class_\">Void</span>, <span class=\"title class_\">Student</span>&gt; &#123;</span><br><span class=\"line\">    private <span class=\"title class_\">String</span> mSurplus;</span><br><span class=\"line\">    private boolean mIsUpdate;</span><br><span class=\"line\">    public <span class=\"title class_\">FetchItemsTask</span>(boolean isUpdate) &#123;</span><br><span class=\"line\">        mIsUpdate = isUpdate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"title class_\">Student</span> <span class=\"title function_\">doInBackground</span>(<span class=\"params\">Void... params</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StudentFetcher</span>().<span class=\"title function_\">fetchItems</span>(mIsUpdate);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span>(<span class=\"params\">Student items</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">Log</span>.<span class=\"title function_\">e</span>(<span class=\"string\">&quot;mStudent&quot;</span>,items.<span class=\"title function_\">getId</span>());</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(items.<span class=\"title function_\">getPassword</span>().<span class=\"title function_\">equals</span>(<span class=\"string\">&quot;wrong&quot;</span>))&#123;     <span class=\"comment\">//登录失败:弹出Dialog提示卡片不正确</span></span><br><span class=\"line\">            <span class=\"title function_\">tipDialog</span>(<span class=\"title class_\">MainActivity</span>.<span class=\"property\">this</span>,<span class=\"string\">&quot;您的卡不在系统中&quot;</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;                                           <span class=\"comment\">//登录成功:更新界面</span></span><br><span class=\"line\">            <span class=\"title function_\">setUI</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *实现AsyncTask工具类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">private <span class=\"keyword\">class</span> <span class=\"title class_\">FetchItemsTask</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">AsyncTask</span>&lt;<span class=\"title class_\">Void</span>,<span class=\"title class_\">Void</span>, <span class=\"title class_\">HistoryLab</span>&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"title class_\">HistoryLab</span> <span class=\"title function_\">doInBackground</span>(<span class=\"params\">Void... params</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">String</span> url;</span><br><span class=\"line\">        <span class=\"title class_\">SimpleDateFormat</span> formatter = <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class=\"line\">        <span class=\"title class_\">String</span> dateString = formatter.<span class=\"title function_\">format</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/addhistory&quot;</span>)</span><br><span class=\"line\">                .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;type&quot;</span>, <span class=\"string\">&quot;充值记录&quot;</span>)</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;date&quot;</span>, dateString)</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;money&quot;</span>, mMoney)</span><br><span class=\"line\">                .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">HistoryFetcher</span>().<span class=\"title function_\">fetchItems</span>(url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span>(<span class=\"params\">HistoryLab items</span>) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>用户获取历史记录数据</strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *实现AsyncTask工具类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">private <span class=\"keyword\">class</span> <span class=\"title class_\">FetchItemsTask</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">AsyncTask</span>&lt;<span class=\"title class_\">Void</span>,<span class=\"title class_\">Void</span>, <span class=\"title class_\">HistoryLab</span>&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"title class_\">HistoryLab</span> <span class=\"title function_\">doInBackground</span>(<span class=\"params\">Void... params</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">String</span> url;</span><br><span class=\"line\">        url = <span class=\"title class_\">Uri</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&quot;https://6737k8d627.goho.co/api/history&quot;</span>)</span><br><span class=\"line\">                .<span class=\"title function_\">buildUpon</span>()</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;Id&quot;</span>, mStudent.<span class=\"title function_\">getId</span>())</span><br><span class=\"line\">                .<span class=\"title function_\">appendQueryParameter</span>(<span class=\"string\">&quot;password&quot;</span>, mStudent.<span class=\"title function_\">getPassword</span>())</span><br><span class=\"line\">                .<span class=\"title function_\">build</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">HistoryFetcher</span>().<span class=\"title function_\">fetchItems</span>(url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    protected <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span>(<span class=\"params\">HistoryLab items</span>) &#123;</span><br><span class=\"line\">        mHistoryLab = items;</span><br><span class=\"line\">        <span class=\"title function_\">setupAdapter</span>();</span><br><span class=\"line\">        <span class=\"comment\">//updateView();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、界面数据共享与更新\"><a href=\"#3、界面数据共享与更新\" class=\"headerlink\" title=\"3、界面数据共享与更新\"></a>3、界面数据共享与更新</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public <span class=\"keyword\">class</span> <span class=\"title class_\">MeViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">ViewModel</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private final <span class=\"title class_\">MutableLiveData</span>&lt;<span class=\"title class_\">Student</span>&gt; mStudent;</span><br><span class=\"line\">    private final <span class=\"title class_\">MutableLiveData</span>&lt;<span class=\"title class_\">String</span>&gt; mMoney;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"title class_\">MeViewModel</span>() &#123;</span><br><span class=\"line\">        mStudent = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;&gt;();</span><br><span class=\"line\">        mMoney= <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;<span class=\"title class_\">String</span>&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"keyword\">void</span> <span class=\"title function_\">setMoney</span>(<span class=\"params\"><span class=\"built_in\">String</span> money</span>) &#123;</span><br><span class=\"line\">        mMoney.<span class=\"title function_\">setValue</span>(money);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"title class_\">LiveData</span>&lt;<span class=\"title class_\">String</span>&gt; <span class=\"title function_\">getMoney</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mMoney;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"keyword\">void</span> <span class=\"title function_\">setStudent</span>(<span class=\"params\">Student student</span>) &#123;</span><br><span class=\"line\">        mStudent.<span class=\"title function_\">setValue</span>(student);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"title class_\">LiveData</span>&lt;<span class=\"title class_\">Student</span>&gt; <span class=\"title function_\">getStudent</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mStudent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"一个天气预报APP","date":"2023-05-28T03:07:30.000Z","swiper_index":2,"top_group_index":2,"cover":"2023/05/28/WeatherBroadcast/mycover.png","ai":true,"typora-root-url":"./..","_content":"\n# Weather Broadcast APP\n\nCreated: December 3, 2022 12:43 AM\n\n# 视频展示\n<video  controls=\"\" preload=\"\" height=\"400px\" > \n    <source  src=\"/images/WeatherBroadcast/23-05-28-11-33-28.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n\n\n# 一、主要功能\n\n## 1、**主视图**和**细节视图**\n\n在手机中包含**主视图**和**细节视图**，**主视图**显示连续多天的天气预报简讯，如图表 1所示，用户在主视图中点击某一天的天气简讯以后，跳出**细节视图**，显示用户选定当天天气的详细信息。\n\n<img src=\"/images/WeatherBroadcast/image-20230528112048700.png\" alt=\"image-20230528112048700\" style=\"zoom:33%;\" />\n\n## 2、 支持平板显示\n\n在**平板**中使用**Master-detail**视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息，如图表 3所示。\n\n<img src=\"/images/WeatherBroadcast/image-20230528112110529.png\" alt=\"image-20230528112110529\" style=\"zoom:33%;\" />\n\n## 3、主视图菜单栏功能实现\n\n- 主视图中包含**Map Location**和**setting**选项，通过**”Map location”** 选项，可以调用手机中安装的地图应用显示当前天气预报所对应的位置，如图表 4所示，用户可以通过**setting**选项可以修改天气预报的位置，温度的单位（华氏度、摄氏度）以及是否开启天气通知，如图表 5所示。如果setting选项中的**天气通知选项**打开，会**定期发送通知消息**，其中显示当天的天气简讯，如图表 6所示。\n\n  <img src=\"/images/WeatherBroadcast/image-20230528112239798.png\" alt=\"image-20230528112239798\" style=\"zoom:33%;\" />\n\n## 4、细节视图菜单栏功能实现\n\n细节视图菜单中包含**分享**和**setting选项**，用户可以通过分享选项通过其他应用（邮件、短信等）将天气详细信息分享给别人。如图表 2所示。\n\n<img src=\"/images/WeatherBroadcast/image-20230528112305880.png\" alt=\"image-20230528112305880\" style=\"zoom:57%;\" />\n\n## 5、SQLite对天气预报数据进行持久化保存\n\n利用SQLite对天气预报数据进行持久化保存，如果网络不可用的情况下，从SQLite中提取天气预报数据。\n\n## 6、调用Web API获取天气预报数据\n\nheweather：[https://www.heweather.com/documents/api/s6/weather-forecast](https://www.heweather.com/documents/api/s6/weather-forecast)\n\n# 二、开发细节\n\n## 1、UI设设计\n\n<img src=\"/images/WeatherBroadcast/image-20230528112329509.png\" alt=\"image-20230528112329509\" style=\"zoom:50%;\" />\n\n## 2、MainActivity+平板功能实现\n\n### **功能**\n\n- 判断设备是`phone`/`paid`并托管到不同的`layout`文件中\n\n- 平板功能实现：在**平板**中使用**Master-detail**视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息。\n\n  - **实现方式一：**`MainFragment.WeatherHolder`中的`onClick()`中将`DetailFragment`添加到`detailFragmentContainer`中。\n\n    缺点：破坏fragment的封装\n\n  - **实现方式二：**在`fragment`中定义回调接口，委托托管`activity`来完成那些不应该由`fragment`处理的任务。\n\n### 知识点\n\n- **别名资源**指向了不同的资源文件\n\n<img src=\"/images/WeatherBroadcast/image-20230528112408350.png\" alt=\"image-20230528112408350\" style=\"zoom: 33%;\" />\n\n- **Fragment回调接口**\n\n### **Fragment回调接口的实现**\n\n- `MainFragment`添加回调接口\n\n```java\nprivate Callbacks mCallbacks;   //回调接口\n\n//回调接口:需要托管activity实现\n    public interface Callbacks{\n        void onWeatherSelected(Weather weather);\n    }\n\n    //在fragment附加给activity时调用\n    @Override\n    public void onAttach(Activity activity) {\n        super.onAttach(activity);\n        mCallbacks = (Callbacks) activity;\n    }\n\n    //清空变量\n    @Override\n    public void onDetach() {\n        super.onDetach();\n        mCallbacks = null;\n    }\n```\n\n- **在`Mainactivity`中实现**\n\n```java\n/*\n        实现其托管fragment的回调接口\n            1、如果是Phone：启动新的PagerActivity\n            2、如果是paid：将DetailFragment放入detailFragmentContainer中\n     */\n    @Override\n    public void onWeatherSelected(Weather weather) {\n        if (findViewById(R.id.detailFragmentContainer) == null) {   //Phone\n           Intent intent = PagerActivity.newIntent(this,weather.getId());\n           startActivity(intent);\n        }\n        else                                                        //Paid\n        {\n            Fragment newDetail = DetailFragment.newInstance(weather.getId());\n            getSupportFragmentManager().beginTransaction().replace(R.id.detailFragmentContainer,newDetail).commit();\n        }\n    **}\n```\n\n- 在`MainFragment`中调用\n\n```java\n@Override\n        public void onClick(View v) {\n            //跳转到细节视图\n//            Intent intent = PagerActivity.newIntent(getActivity(), mWeather.getId());\n//            startActivity(intent);\n            //使用回调方法\n            mCallbacks.onWeatherSelected(mWeather);\n```\n\n## 3、MainFragment\n\n### 功能\n\n- 实例化单例\n- 实例化数据库\n- 实例化`RecyclerView`\n- 监听用户点击，并跳转到`DetialActivity`\n- 从网上获取数据，并显示在组件中\n- 监听`Menu`的点击事件\n\n### 知识点\n\n- `RecyclerView`实例化及其逻辑实现\n- `Menu`实例化，并实现监听\n- 启动后台线程`AsyncTask`，实现数据获取\n- `Fragment`跳转到Activity并传递数据\n- `notification`实现消息推送\n- `SQLlite`实现数据持久化\n\n### 要点\n\n**1、从`Fragment`跳转到`Activity`并传递数据**\n\n**`MainFragment`**\n\n```java\n//调用Fragment.startActivity(Itent)\nIntent intent = DetailActivity.newIntent(getActivity(), mWeather.getId());\nstartActivity(intent);\n```\n\n**`DetailActivity`**\n\n```java\nprivate static final String EXTRA_WEATHER_ID = \"com/example/weatherbroadcast.weather_id\";\n//启动DetailActivity并传递参数\npublic static Intent newIntent(Context packageContext, UUID weathereId) {\n    Intent intent = new Intent(packageContext, DetailActivity.class);\n    intent.putExtra(EXTRA_WEATHER_ID, weathereId);\n    return intent;\n}\n```\n\n## 4、DetailActivity\n\n### **功能**\n\n- 托管DetailFragment\n- 传递数据WeatherID\n\n### 知识点：`FragmentAugment`实现\n\n`**DetailActivity`获取数据并传递给其托管的Fragment的两种方法**\n\n- **直接获取数据，直接传递——由Activity获取数据**\n\n`UUID`是`Serializable`对象\n\n```java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_detail);\n\n    //获取intent传入的信息\n    weatherId = (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);\n\t\t//绑定Fragment\n    FragmentManager fm = getSupportFragmentManager();\n    Fragment fragment = fm.findFragmentById(R.id.fragment_container3);\n    if (fragment == null) {\n        fragment = createFragment();\n        fm.beginTransaction()\n                .add(R.id.fragment_container3, fragment)\n                .commit();\n    }\n}\n    //创建Fragment\n    private Fragment createFragment() {\n\t\t\t\t//直接传递数据\n        return DetailFragment.newInstance(weatherId);\n    }\n}\n```\n\n**缺点：**\n\n破坏了**`CrimeFragment`**的封装，**`CrimeFragment`**不再是可以复用的单元。\n\n- **使用`fragmentargument`——由Fragment获取数据**\n\n**augment：参数**\n\n将`weatherID`存储到`Fragment`的某个地方而不是`Activity`中。\n\n每个`Fragment`实例都有一个**`Bundle`**对象，**`Bundle`**对象包含键值对，可以将参数添加到`**Bundle**`对象中\n\n```java\n//附加augmentbundle给Fragment\nFragment.setArguments(Bundle)\n//Bundle添加argument\nBundle.putSerializable(Key,Value)\n```\n\n## 5、PagerActivity\n\n### **功能**\n\n- 实现左右滑动屏幕\n\n### 知识点：`ViewPager`实现\n\n**步骤：**\n\n- 创建`PagerActivity`类，以`VeiwPager`为根视图\n- 定义包含`ViewPager`的视图层级结构\n- 在`PagerActivity`类中关联使用`ViewPager`及其`Adapter`\n\n### Bug\n\n只能显示6天的Pager\n\nBug修复：我把数据库课WetherLab封装在一起了\n\n### 代码\n\n```java\npublic class PagerActivity extends AppCompatActivity {\n\n    private static final String EXTRA_WEATHER_ID = \"com/example/weatherbroadcast/DetailActivity.java.weather_id\";\n    private ViewPager mViewPager;\n    private List<Weather> mWeathers;\n\n    //启动PagerActivity并传递参数\n    public static Intent newIntent(Context packageContext, UUID weathereId) {\n        Intent intent = new Intent(packageContext, PagerActivity.class);\n        intent.putExtra(EXTRA_WEATHER_ID, weathereId);\n        return intent;\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_pager);\n\n        mViewPager = (ViewPager) findViewById(R.id.view_pager);\n        mWeathers = WeatherLab.get(this).getWeathers();\n\n        //获取intent传入的信息\n        UUID weatherId = (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);\n\n        //设置点击之后显示的界面\n        for (int i = 0; i < mWeathers.size(); i++) {\n            if (mWeathers.get(i).getId().equals(weatherId)) {\n                mViewPager.setCurrentItem(i);\n                break;\n            }\n\n            //创建Adapter\n            FragmentManager fragmentManager = getSupportFragmentManager();\n            mViewPager.setAdapter(new FragmentStatePagerAdapter(fragmentManager) {\n                @NonNull\n                @Override\n                public Fragment getItem(int position) {\n                    Weather weather = mWeathers.get(position);\n                    //实例化DetailFragment\n                    return DetailFragment.newInstance(weather.getId());\n                }\n\n                @Override\n                public int getCount() {\n                    Log.e(\"mWeathers.size : \", String.valueOf(mWeathers.size()));\n                    return mWeathers.size();\n                }\n            });\n        }\n    }\n}\n```\n\n## 6、SQLlite+WeatherLab单例封装\n\n### **功能**\n\n- **实现数据持久化**\n\n### 知识点\n\n- **单例如何实例化？**\n\n**在类中声明为静态变量并且实例化。**\n\n```java\npublic class WeatherLab {\n    private static WeatherLab sWeatherLab;\n    private SQLiteDatabase mDatabase;\n    private Context mContext;\n\n    //单例的意思：在类里已经实例化了\n    public static WeatherLab get(Context context) {\n        if (sWeatherLab == null) {\n            sWeatherLab = new WeatherLab(context);\n        }\n        return sWeatherLab;\n    }\n```\n\n- **这里将数据库也实现单例**\n\n```java\npublic static Context getContext(){\n        return sWeatherLab.mContext;\n    }\n\n    private WeatherLab(Context context) {\n        mContext = context.getApplicationContext();\n        //打开数据库，如果不存在就先调用DataBaseHelper.onCreate()创建\n        mDatabase = new DatabaseHelper(mContext).getWritableDatabase();\n    }\n```\n\n- **实现数据库`Schema`类：定义描述数据表元素的String常量**\n\n```java\npublic class DbSchema {\n    public static final class WeatherTable {\n        public static final String NAME = \"WeatherTab\";\n\n        public static final class Cols {\n            public static final String UUID = \"uuid\";\n            public static final String TITLE = \"title\";\n            public static final String DATE = \"date\";\n            public static final String SOLVED = \"solved\";\n        }\n    }\n}\n```\n\n- **DataBaseHelper类**\n\n```java\npublic class DatabaseHelper extends SQLiteOpenHelper {\n    private static final int VERSION = 1;\n    private static final String DBNAME=\"User.db\";   //  创建数据库名叫 Users\n\n    public DatabaseHelper(Context context){\n        super(context,DBNAME,null,VERSION);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        //db.execSQL(\"create table WeatherTable (_id INTEGER PRIMARY KEY AUTOINCREMENT,date text,max_temp text,min_temp text,weather text,humidity text,pressure text,wind text,icon text)\");\n        db.execSQL(\"create table \"+ NAME+\"(\"+\n                    \"_id INTEGER PRIMARY KEY AUTOINCREMENT,\"+\n                    DbSchema.Cols.UUID+\" text, \"+\n                    DbSchema.Cols.DATE+\" text,\"+\n                    DbSchema.Cols.MAX_TEMP+\" text,\"+\n                    DbSchema.Cols.MIN_TEMP+\" text,\"+\n                    DbSchema.Cols.WEATHER+\" text,\"+\n                    DbSchema.Cols.HUMIDITY+\" text,\"+\n                    DbSchema.Cols.PRESSURE+\" text,\"+\n                    DbSchema.Cols.WIND+\" text,\"+\n                    DbSchema.Cols.ICON+\" text\"+\n                    \")\");\n    }\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        //TODO\n    }\n```\n\n- **修改WeatherLab：改用数据库存储数据**\n\n  - **实现`CursorWrapper`子类帮助查询数据库**\n\n  ```java\n  //创建Cursor子类用于查询\n      public class WeatherCursorWrapper extends CursorWrapper {\n  \n          public WeatherCursorWrapper(Cursor cursor) {\n              super(cursor);\n          }\n  \n          public Weather getWeather() {\n              String UUID = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.UUID));\n              String DATE = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.DATE));\n              String MAX_TEMP = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MAX_TEMP));\n              String MIN_TEMP = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MIN_TEMP));\n              String WEATHER = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WEATHER));\n              String HUMIDITY = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.HUMIDITY));\n              String PRESSURE = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.PRESSURE));\n              String WIND = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WIND));\n              String ICON = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.ICON));\n  \n              Weather weather = new Weather();\n              weather.setId(java.util.UUID.fromString(UUID));\n              weather.setDate(DATE);\n              weather.setMaxTemperature(MAX_TEMP);\n              weather.setMinTemperature(MIN_TEMP);\n              weather.setWeather(WEATHER);\n              weather.setHumidity(HUMIDITY);\n              weather.setPressure(PRESSURE);\n              weather.setWind(WIND);\n              weather.setIconUrl(ICON);\n  \n              return weather;\n          }\n      }\n  ```\n\n  ```java\n  //实例化WeatherCursorWrapper \n  WeatherCursorWrapper cursor = queryWeathers(null, null);\n  ```\n\n  - `**ContentValues`:键值储存类，只能处理SQLite数据**\n\n  ```java\n  //ContentValues:键值储存类，只能处理SQLite数据\n      private static ContentValues getContentValues(Weather weather) {\n          ContentValues values = new ContentValues();\n          values.put(DatabaseHelper.DbSchema.Cols.UUID, weather.getId().toString());\n          values.put(DatabaseHelper.DbSchema.Cols.DATE, weather.getDate());\n          values.put(DatabaseHelper.DbSchema.Cols.MAX_TEMP, weather.getMaxTemperature());\n          values.put(DatabaseHelper.DbSchema.Cols.MIN_TEMP, weather.getMinTemperature());\n          values.put(DatabaseHelper.DbSchema.Cols.WEATHER, weather.getWeather());\n          values.put(DatabaseHelper.DbSchema.Cols.HUMIDITY, weather.getHumidity());\n          values.put(DatabaseHelper.DbSchema.Cols.PRESSURE, weather.getPressure());\n          values.put(DatabaseHelper.DbSchema.Cols.WIND, weather.getWind());\n          values.put(DatabaseHelper.DbSchema.Cols.ICON, weather.getIconUrl());\n          return values;\n      }\n  ```\n\n  - **删除数据库之后记得立马要`create`一个，不然`quary`报错**\n\n  ```java\n  //判断数据库是否为空\n      public boolean isEmpty(){\n          WeatherCursorWrapper cursor = queryWeathers(null, null);\n          return cursor.getCount()==0||cursor==null;\n      }\n  //如果数据库不为空\n          if(!sWeatherLab.isEmpty()){\n              mDatabase.execSQL(\"drop table \"+DatabaseHelper.DbSchema.NAME);\n              mDatabase.execSQL(\"create table \"+ NAME+\"(\"+\n                      \"_id INTEGER PRIMARY KEY AUTOINCREMENT,\"+\n                      DatabaseHelper.DbSchema.Cols.UUID+\" text, \"+\n                      DatabaseHelper.DbSchema.Cols.DATE+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.MAX_TEMP+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.MIN_TEMP+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.WEATHER+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.HUMIDITY+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.PRESSURE+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.WIND+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.ICON+\" text\"+\n                      \")\");\n          }\n  ```\n\n### 报错 **table WeatherTab has no column named min_temp**\n\n![image-20230528112458417](/images/WeatherBroadcast/image-20230528112458417.png)\n\n**table WeatherTab has no column named min_temp in \"INSERT INTO WeatherTab(min_temp,pressure,date,icon,uuid,wind,max_temp,humidity,weather) VALUES (?,?,?,?,?,?,?,?,?)”**\n\n**原因：数据表创建语句中字段前没有空格**\n\n[table xxx has no column named id (code 1)？表中插入数据找不到字段？_奋斗的IT小民工的博客-CSDN博客](https://blog.csdn.net/u013040819/article/details/81489137)\n\n## 7、Share功能\n\n### **功能**\n\n- **点击Menu分享键分享天气**\n\n### **知识点**\n\n- **隐式Intent的组成**\n  - 要执行的操作\n  - 待访问数据的位置\n  - 操作涉及的数据类型\n  - 可选类别\n\n### 代码\n\n```java\ncase R.id.share:\n                //Intent.ACTION_SEND:要执行的操作\n                Intent i = new Intent(Intent.ACTION_SEND);\n                //操作涉及的数据类型\n                i.setType(\"text/plain\");\n                //待访问数据的位置\n                i.putExtra(Intent.EXTRA_TEXT,createMessage());\n                startActivity(i);\n                return true;\n```\n\n## 8、Notification——**IntentService的子类**\n\n### **功能**\n\n- 定期发送通知给用户，显示在状态栏中\n- 保证用户在使用应用时不出现新结果通知\n\n### **知识点**\n\n- **后台服务：IntentService**\n\n- **SharedPreferences：保存数据（location、unit）**\n\n- **AlarmManager延迟运行**\n\n- **通知消息：Notification**\n\n- **Broadcast Intent**\n\n  ![image-20230528112524704](/images/WeatherBroadcast/image-20230528112524704.png)\n\n### **后台服务：IntentService**\n\n- 创建**`IntentService`**类继承`IntentService`\n- `manifest`中配置`<service android:name=\".Notification\"></service>`\n\n注意构造函数不能带参数\n\n- 在`MainFragment`的`onCreate()`中添加服务启动代码\n\n```java\n//启动Notification服务\n        Intent i = Notification.newIntent(getActivity());\n        getActivity().startService(i);\n```\n\n![image-20230528112547986](/images/WeatherBroadcast/image-20230528112547986.png)\n\n- **IntentService**在没有`activity`运行的情况下为**在后台运行的服务**，需要想个办法启动它。\n\n  使用**`AlarmManager`：可以发送intent的系统服务**\n\n  使用`PendingIntent`打包一个`intent`:”我想启动Notification服务”\n\n  在`PendingIntent`中实现一个启停定时器的`setServiceAlarm()`\n\n  - **添加定时方法**\n\n  ```java\n  //设置时间间隔是1分钟\n      private static final long NOTI_INTERVAL_MS = TimeUnit.MINUTES.toMillis(1);\n      public static void setServiceAlarm(Context context,boolean isOn){\n          Intent i = Notification.newIntent(context);\n          //创建一个用来启动Notification服务的PendingIntent\n          PendingIntent pendingIntent = PendingIntent.getService(context,0,i,FLAG_MUTABLE);\n          //设置定时器\n          AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n          if(isOn){\n              alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(),NOTI_INTERVAL_MS,pendingIntent);\n          }\n          else{\n              alarmManager.cancel(pendingIntent);\n              pendingIntent.cancel();\n          }\n      }\n  ```\n\n  - 使用`PendingIntent`管理定时器\n\n  ```java\n  public static boolean isServiceAlarmOn(Context context){\n          Intent intent = NotificationService.newIntent(context);\n          PendingIntent pendingIntent = PendingIntent.getService(context,0,intent,PendingIntent.FLAG_NO_CREATE);\n          return pendingIntent!=null;\n      }\n  ```\n\n  - 在`MainFragment`中设置定时开/闭\n\n  ```java\n  public void onResume() {\n    super.onResume();\n    SharedPreferences pref = getActivity().getSharedPreferences(\"set\", MODE_PRIVATE);\n    String send = pref.getString(\"send\",\"是\");\n    if (send==\"是\"){\n        //开启后台服务，启动定时器，发送通知消息\n        NotificationService.setServiceAlarm(getActivity(),true);\n    }else{\n        NotificationService.setServiceAlarm(getActivity(),false);\n    }\n  }\n  ```\n\n### Notification\n\n- 创建`Notification`对象\n\n完整的`notification`包括：\n\n- 首次显示通知消息时，在状态栏上显示ticker text、图标\n- 在Lollipop之后状态栏上不显示ticker text、图标\n- 是通知抽屉的一个视图\n- 待触发的`PendingIntent`，用户点击抽屉中的通知消息触发\n\n```java\n@Override\n    protected void onHandleIntent(@Nullable Intent intent) {\n        Log.e(TAG,\"接收一个intent：\"+intent);\n    /*\n    设置通知消息\n     */\n        Resources resources = getResources();\n        Intent i = MainActivity.newIntent(this);\n\t\t\t\t//不可变的PendingIntent\n        PendingIntent pendingIntent = PendingIntent.getActivity(this,0,i,FLAG_IMMUTABLE);\n        Notification notification = null;\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\n                .setTicker(resources.getString(R.string.new_weather_title))\n                .setSmallIcon(android.R.drawable.ic_menu_report_image)\n                .setContentTitle(resources.getString(R.string.new_weather_title))\n                .setContentText(resources.getString(R.string.new_weather_text))\n                .setContentIntent(pendingIntent)\n                .setAutoCancel(true);\n        NotificationManager notificationManager =(NotificationManager) getSystemService(NOTIFICATION_SERVICE);\n\n        //一定要设置channel\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(\"to-do\"\n                    , \"待办消息\",\n                    NotificationManager.IMPORTANCE_HIGH);\n            channel.enableVibration(true);\n            channel.setVibrationPattern(new long[]{500});\n            notificationManager.createNotificationChannel(channel);\n            builder.setChannelId(\"to-do\");\n            notification = builder.build();\n        } else {\n            notification = builder.build();\n        }\n\n        notificationManager.notify(0,notification);\n        System.out.println(notification);\n```\n\n[浅谈通知频道NotificationChannel](https://www.jianshu.com/p/4c51c071aa94)\n\n从Android8.0开始，应用显示通知时，必须为通知指定一个`Channel`。\n\n`NotificationChannel`构造方法需要三个参数，\n\n- `ChannelId`是自定义的字符串\n- 第二个参数是频道的名称\n- 第三个是优先级。\n\n创建完`NotificationChannel`之后，还需要使用`createNotificationChannels`方法注册到系统中。\n\n### **Broadcast Intent（待实现）**\n\n## 9、Map功能\n\n### **功能**\n\n- **点击MapLocation启动手机中的Map**\n\n### **知识点**\n\n- **隐式Intent的组成**\n\n```java\nIntent intent = new Intent(Intent.ACTION_VIEW);\nUri geoLocation = Uri.parse(\"geo:28.156198193290255,112.93207570910455?z=11\");\nintent.setData(geoLocation);\nif (intent.resolveActivity(getContext().getPackageManager()) != null) {\n    startActivity(intent);\n}\n```\n\n### Bug\n\nMapApp无法显示定位\n","source":"_posts/WeatherBroadcast.md","raw":"---\ntitle: 一个天气预报APP\ndate: 2023-05-28 11:07:30\ntags: Android APP\nswiper_index: 2\ntop_group_index: 2\ncover: mycover.png\nai: true\ntypora-root-url: ./..\n---\n\n# Weather Broadcast APP\n\nCreated: December 3, 2022 12:43 AM\n\n# 视频展示\n<video  controls=\"\" preload=\"\" height=\"400px\" > \n    <source  src=\"/images/WeatherBroadcast/23-05-28-11-33-28.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n\n\n# 一、主要功能\n\n## 1、**主视图**和**细节视图**\n\n在手机中包含**主视图**和**细节视图**，**主视图**显示连续多天的天气预报简讯，如图表 1所示，用户在主视图中点击某一天的天气简讯以后，跳出**细节视图**，显示用户选定当天天气的详细信息。\n\n<img src=\"/images/WeatherBroadcast/image-20230528112048700.png\" alt=\"image-20230528112048700\" style=\"zoom:33%;\" />\n\n## 2、 支持平板显示\n\n在**平板**中使用**Master-detail**视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息，如图表 3所示。\n\n<img src=\"/images/WeatherBroadcast/image-20230528112110529.png\" alt=\"image-20230528112110529\" style=\"zoom:33%;\" />\n\n## 3、主视图菜单栏功能实现\n\n- 主视图中包含**Map Location**和**setting**选项，通过**”Map location”** 选项，可以调用手机中安装的地图应用显示当前天气预报所对应的位置，如图表 4所示，用户可以通过**setting**选项可以修改天气预报的位置，温度的单位（华氏度、摄氏度）以及是否开启天气通知，如图表 5所示。如果setting选项中的**天气通知选项**打开，会**定期发送通知消息**，其中显示当天的天气简讯，如图表 6所示。\n\n  <img src=\"/images/WeatherBroadcast/image-20230528112239798.png\" alt=\"image-20230528112239798\" style=\"zoom:33%;\" />\n\n## 4、细节视图菜单栏功能实现\n\n细节视图菜单中包含**分享**和**setting选项**，用户可以通过分享选项通过其他应用（邮件、短信等）将天气详细信息分享给别人。如图表 2所示。\n\n<img src=\"/images/WeatherBroadcast/image-20230528112305880.png\" alt=\"image-20230528112305880\" style=\"zoom:57%;\" />\n\n## 5、SQLite对天气预报数据进行持久化保存\n\n利用SQLite对天气预报数据进行持久化保存，如果网络不可用的情况下，从SQLite中提取天气预报数据。\n\n## 6、调用Web API获取天气预报数据\n\nheweather：[https://www.heweather.com/documents/api/s6/weather-forecast](https://www.heweather.com/documents/api/s6/weather-forecast)\n\n# 二、开发细节\n\n## 1、UI设设计\n\n<img src=\"/images/WeatherBroadcast/image-20230528112329509.png\" alt=\"image-20230528112329509\" style=\"zoom:50%;\" />\n\n## 2、MainActivity+平板功能实现\n\n### **功能**\n\n- 判断设备是`phone`/`paid`并托管到不同的`layout`文件中\n\n- 平板功能实现：在**平板**中使用**Master-detail**视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息。\n\n  - **实现方式一：**`MainFragment.WeatherHolder`中的`onClick()`中将`DetailFragment`添加到`detailFragmentContainer`中。\n\n    缺点：破坏fragment的封装\n\n  - **实现方式二：**在`fragment`中定义回调接口，委托托管`activity`来完成那些不应该由`fragment`处理的任务。\n\n### 知识点\n\n- **别名资源**指向了不同的资源文件\n\n<img src=\"/images/WeatherBroadcast/image-20230528112408350.png\" alt=\"image-20230528112408350\" style=\"zoom: 33%;\" />\n\n- **Fragment回调接口**\n\n### **Fragment回调接口的实现**\n\n- `MainFragment`添加回调接口\n\n```java\nprivate Callbacks mCallbacks;   //回调接口\n\n//回调接口:需要托管activity实现\n    public interface Callbacks{\n        void onWeatherSelected(Weather weather);\n    }\n\n    //在fragment附加给activity时调用\n    @Override\n    public void onAttach(Activity activity) {\n        super.onAttach(activity);\n        mCallbacks = (Callbacks) activity;\n    }\n\n    //清空变量\n    @Override\n    public void onDetach() {\n        super.onDetach();\n        mCallbacks = null;\n    }\n```\n\n- **在`Mainactivity`中实现**\n\n```java\n/*\n        实现其托管fragment的回调接口\n            1、如果是Phone：启动新的PagerActivity\n            2、如果是paid：将DetailFragment放入detailFragmentContainer中\n     */\n    @Override\n    public void onWeatherSelected(Weather weather) {\n        if (findViewById(R.id.detailFragmentContainer) == null) {   //Phone\n           Intent intent = PagerActivity.newIntent(this,weather.getId());\n           startActivity(intent);\n        }\n        else                                                        //Paid\n        {\n            Fragment newDetail = DetailFragment.newInstance(weather.getId());\n            getSupportFragmentManager().beginTransaction().replace(R.id.detailFragmentContainer,newDetail).commit();\n        }\n    **}\n```\n\n- 在`MainFragment`中调用\n\n```java\n@Override\n        public void onClick(View v) {\n            //跳转到细节视图\n//            Intent intent = PagerActivity.newIntent(getActivity(), mWeather.getId());\n//            startActivity(intent);\n            //使用回调方法\n            mCallbacks.onWeatherSelected(mWeather);\n```\n\n## 3、MainFragment\n\n### 功能\n\n- 实例化单例\n- 实例化数据库\n- 实例化`RecyclerView`\n- 监听用户点击，并跳转到`DetialActivity`\n- 从网上获取数据，并显示在组件中\n- 监听`Menu`的点击事件\n\n### 知识点\n\n- `RecyclerView`实例化及其逻辑实现\n- `Menu`实例化，并实现监听\n- 启动后台线程`AsyncTask`，实现数据获取\n- `Fragment`跳转到Activity并传递数据\n- `notification`实现消息推送\n- `SQLlite`实现数据持久化\n\n### 要点\n\n**1、从`Fragment`跳转到`Activity`并传递数据**\n\n**`MainFragment`**\n\n```java\n//调用Fragment.startActivity(Itent)\nIntent intent = DetailActivity.newIntent(getActivity(), mWeather.getId());\nstartActivity(intent);\n```\n\n**`DetailActivity`**\n\n```java\nprivate static final String EXTRA_WEATHER_ID = \"com/example/weatherbroadcast.weather_id\";\n//启动DetailActivity并传递参数\npublic static Intent newIntent(Context packageContext, UUID weathereId) {\n    Intent intent = new Intent(packageContext, DetailActivity.class);\n    intent.putExtra(EXTRA_WEATHER_ID, weathereId);\n    return intent;\n}\n```\n\n## 4、DetailActivity\n\n### **功能**\n\n- 托管DetailFragment\n- 传递数据WeatherID\n\n### 知识点：`FragmentAugment`实现\n\n`**DetailActivity`获取数据并传递给其托管的Fragment的两种方法**\n\n- **直接获取数据，直接传递——由Activity获取数据**\n\n`UUID`是`Serializable`对象\n\n```java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_detail);\n\n    //获取intent传入的信息\n    weatherId = (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);\n\t\t//绑定Fragment\n    FragmentManager fm = getSupportFragmentManager();\n    Fragment fragment = fm.findFragmentById(R.id.fragment_container3);\n    if (fragment == null) {\n        fragment = createFragment();\n        fm.beginTransaction()\n                .add(R.id.fragment_container3, fragment)\n                .commit();\n    }\n}\n    //创建Fragment\n    private Fragment createFragment() {\n\t\t\t\t//直接传递数据\n        return DetailFragment.newInstance(weatherId);\n    }\n}\n```\n\n**缺点：**\n\n破坏了**`CrimeFragment`**的封装，**`CrimeFragment`**不再是可以复用的单元。\n\n- **使用`fragmentargument`——由Fragment获取数据**\n\n**augment：参数**\n\n将`weatherID`存储到`Fragment`的某个地方而不是`Activity`中。\n\n每个`Fragment`实例都有一个**`Bundle`**对象，**`Bundle`**对象包含键值对，可以将参数添加到`**Bundle**`对象中\n\n```java\n//附加augmentbundle给Fragment\nFragment.setArguments(Bundle)\n//Bundle添加argument\nBundle.putSerializable(Key,Value)\n```\n\n## 5、PagerActivity\n\n### **功能**\n\n- 实现左右滑动屏幕\n\n### 知识点：`ViewPager`实现\n\n**步骤：**\n\n- 创建`PagerActivity`类，以`VeiwPager`为根视图\n- 定义包含`ViewPager`的视图层级结构\n- 在`PagerActivity`类中关联使用`ViewPager`及其`Adapter`\n\n### Bug\n\n只能显示6天的Pager\n\nBug修复：我把数据库课WetherLab封装在一起了\n\n### 代码\n\n```java\npublic class PagerActivity extends AppCompatActivity {\n\n    private static final String EXTRA_WEATHER_ID = \"com/example/weatherbroadcast/DetailActivity.java.weather_id\";\n    private ViewPager mViewPager;\n    private List<Weather> mWeathers;\n\n    //启动PagerActivity并传递参数\n    public static Intent newIntent(Context packageContext, UUID weathereId) {\n        Intent intent = new Intent(packageContext, PagerActivity.class);\n        intent.putExtra(EXTRA_WEATHER_ID, weathereId);\n        return intent;\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_pager);\n\n        mViewPager = (ViewPager) findViewById(R.id.view_pager);\n        mWeathers = WeatherLab.get(this).getWeathers();\n\n        //获取intent传入的信息\n        UUID weatherId = (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);\n\n        //设置点击之后显示的界面\n        for (int i = 0; i < mWeathers.size(); i++) {\n            if (mWeathers.get(i).getId().equals(weatherId)) {\n                mViewPager.setCurrentItem(i);\n                break;\n            }\n\n            //创建Adapter\n            FragmentManager fragmentManager = getSupportFragmentManager();\n            mViewPager.setAdapter(new FragmentStatePagerAdapter(fragmentManager) {\n                @NonNull\n                @Override\n                public Fragment getItem(int position) {\n                    Weather weather = mWeathers.get(position);\n                    //实例化DetailFragment\n                    return DetailFragment.newInstance(weather.getId());\n                }\n\n                @Override\n                public int getCount() {\n                    Log.e(\"mWeathers.size : \", String.valueOf(mWeathers.size()));\n                    return mWeathers.size();\n                }\n            });\n        }\n    }\n}\n```\n\n## 6、SQLlite+WeatherLab单例封装\n\n### **功能**\n\n- **实现数据持久化**\n\n### 知识点\n\n- **单例如何实例化？**\n\n**在类中声明为静态变量并且实例化。**\n\n```java\npublic class WeatherLab {\n    private static WeatherLab sWeatherLab;\n    private SQLiteDatabase mDatabase;\n    private Context mContext;\n\n    //单例的意思：在类里已经实例化了\n    public static WeatherLab get(Context context) {\n        if (sWeatherLab == null) {\n            sWeatherLab = new WeatherLab(context);\n        }\n        return sWeatherLab;\n    }\n```\n\n- **这里将数据库也实现单例**\n\n```java\npublic static Context getContext(){\n        return sWeatherLab.mContext;\n    }\n\n    private WeatherLab(Context context) {\n        mContext = context.getApplicationContext();\n        //打开数据库，如果不存在就先调用DataBaseHelper.onCreate()创建\n        mDatabase = new DatabaseHelper(mContext).getWritableDatabase();\n    }\n```\n\n- **实现数据库`Schema`类：定义描述数据表元素的String常量**\n\n```java\npublic class DbSchema {\n    public static final class WeatherTable {\n        public static final String NAME = \"WeatherTab\";\n\n        public static final class Cols {\n            public static final String UUID = \"uuid\";\n            public static final String TITLE = \"title\";\n            public static final String DATE = \"date\";\n            public static final String SOLVED = \"solved\";\n        }\n    }\n}\n```\n\n- **DataBaseHelper类**\n\n```java\npublic class DatabaseHelper extends SQLiteOpenHelper {\n    private static final int VERSION = 1;\n    private static final String DBNAME=\"User.db\";   //  创建数据库名叫 Users\n\n    public DatabaseHelper(Context context){\n        super(context,DBNAME,null,VERSION);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        //db.execSQL(\"create table WeatherTable (_id INTEGER PRIMARY KEY AUTOINCREMENT,date text,max_temp text,min_temp text,weather text,humidity text,pressure text,wind text,icon text)\");\n        db.execSQL(\"create table \"+ NAME+\"(\"+\n                    \"_id INTEGER PRIMARY KEY AUTOINCREMENT,\"+\n                    DbSchema.Cols.UUID+\" text, \"+\n                    DbSchema.Cols.DATE+\" text,\"+\n                    DbSchema.Cols.MAX_TEMP+\" text,\"+\n                    DbSchema.Cols.MIN_TEMP+\" text,\"+\n                    DbSchema.Cols.WEATHER+\" text,\"+\n                    DbSchema.Cols.HUMIDITY+\" text,\"+\n                    DbSchema.Cols.PRESSURE+\" text,\"+\n                    DbSchema.Cols.WIND+\" text,\"+\n                    DbSchema.Cols.ICON+\" text\"+\n                    \")\");\n    }\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        //TODO\n    }\n```\n\n- **修改WeatherLab：改用数据库存储数据**\n\n  - **实现`CursorWrapper`子类帮助查询数据库**\n\n  ```java\n  //创建Cursor子类用于查询\n      public class WeatherCursorWrapper extends CursorWrapper {\n  \n          public WeatherCursorWrapper(Cursor cursor) {\n              super(cursor);\n          }\n  \n          public Weather getWeather() {\n              String UUID = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.UUID));\n              String DATE = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.DATE));\n              String MAX_TEMP = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MAX_TEMP));\n              String MIN_TEMP = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MIN_TEMP));\n              String WEATHER = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WEATHER));\n              String HUMIDITY = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.HUMIDITY));\n              String PRESSURE = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.PRESSURE));\n              String WIND = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WIND));\n              String ICON = getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.ICON));\n  \n              Weather weather = new Weather();\n              weather.setId(java.util.UUID.fromString(UUID));\n              weather.setDate(DATE);\n              weather.setMaxTemperature(MAX_TEMP);\n              weather.setMinTemperature(MIN_TEMP);\n              weather.setWeather(WEATHER);\n              weather.setHumidity(HUMIDITY);\n              weather.setPressure(PRESSURE);\n              weather.setWind(WIND);\n              weather.setIconUrl(ICON);\n  \n              return weather;\n          }\n      }\n  ```\n\n  ```java\n  //实例化WeatherCursorWrapper \n  WeatherCursorWrapper cursor = queryWeathers(null, null);\n  ```\n\n  - `**ContentValues`:键值储存类，只能处理SQLite数据**\n\n  ```java\n  //ContentValues:键值储存类，只能处理SQLite数据\n      private static ContentValues getContentValues(Weather weather) {\n          ContentValues values = new ContentValues();\n          values.put(DatabaseHelper.DbSchema.Cols.UUID, weather.getId().toString());\n          values.put(DatabaseHelper.DbSchema.Cols.DATE, weather.getDate());\n          values.put(DatabaseHelper.DbSchema.Cols.MAX_TEMP, weather.getMaxTemperature());\n          values.put(DatabaseHelper.DbSchema.Cols.MIN_TEMP, weather.getMinTemperature());\n          values.put(DatabaseHelper.DbSchema.Cols.WEATHER, weather.getWeather());\n          values.put(DatabaseHelper.DbSchema.Cols.HUMIDITY, weather.getHumidity());\n          values.put(DatabaseHelper.DbSchema.Cols.PRESSURE, weather.getPressure());\n          values.put(DatabaseHelper.DbSchema.Cols.WIND, weather.getWind());\n          values.put(DatabaseHelper.DbSchema.Cols.ICON, weather.getIconUrl());\n          return values;\n      }\n  ```\n\n  - **删除数据库之后记得立马要`create`一个，不然`quary`报错**\n\n  ```java\n  //判断数据库是否为空\n      public boolean isEmpty(){\n          WeatherCursorWrapper cursor = queryWeathers(null, null);\n          return cursor.getCount()==0||cursor==null;\n      }\n  //如果数据库不为空\n          if(!sWeatherLab.isEmpty()){\n              mDatabase.execSQL(\"drop table \"+DatabaseHelper.DbSchema.NAME);\n              mDatabase.execSQL(\"create table \"+ NAME+\"(\"+\n                      \"_id INTEGER PRIMARY KEY AUTOINCREMENT,\"+\n                      DatabaseHelper.DbSchema.Cols.UUID+\" text, \"+\n                      DatabaseHelper.DbSchema.Cols.DATE+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.MAX_TEMP+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.MIN_TEMP+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.WEATHER+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.HUMIDITY+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.PRESSURE+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.WIND+\" text,\"+\n                      DatabaseHelper.DbSchema.Cols.ICON+\" text\"+\n                      \")\");\n          }\n  ```\n\n### 报错 **table WeatherTab has no column named min_temp**\n\n![image-20230528112458417](/images/WeatherBroadcast/image-20230528112458417.png)\n\n**table WeatherTab has no column named min_temp in \"INSERT INTO WeatherTab(min_temp,pressure,date,icon,uuid,wind,max_temp,humidity,weather) VALUES (?,?,?,?,?,?,?,?,?)”**\n\n**原因：数据表创建语句中字段前没有空格**\n\n[table xxx has no column named id (code 1)？表中插入数据找不到字段？_奋斗的IT小民工的博客-CSDN博客](https://blog.csdn.net/u013040819/article/details/81489137)\n\n## 7、Share功能\n\n### **功能**\n\n- **点击Menu分享键分享天气**\n\n### **知识点**\n\n- **隐式Intent的组成**\n  - 要执行的操作\n  - 待访问数据的位置\n  - 操作涉及的数据类型\n  - 可选类别\n\n### 代码\n\n```java\ncase R.id.share:\n                //Intent.ACTION_SEND:要执行的操作\n                Intent i = new Intent(Intent.ACTION_SEND);\n                //操作涉及的数据类型\n                i.setType(\"text/plain\");\n                //待访问数据的位置\n                i.putExtra(Intent.EXTRA_TEXT,createMessage());\n                startActivity(i);\n                return true;\n```\n\n## 8、Notification——**IntentService的子类**\n\n### **功能**\n\n- 定期发送通知给用户，显示在状态栏中\n- 保证用户在使用应用时不出现新结果通知\n\n### **知识点**\n\n- **后台服务：IntentService**\n\n- **SharedPreferences：保存数据（location、unit）**\n\n- **AlarmManager延迟运行**\n\n- **通知消息：Notification**\n\n- **Broadcast Intent**\n\n  ![image-20230528112524704](/images/WeatherBroadcast/image-20230528112524704.png)\n\n### **后台服务：IntentService**\n\n- 创建**`IntentService`**类继承`IntentService`\n- `manifest`中配置`<service android:name=\".Notification\"></service>`\n\n注意构造函数不能带参数\n\n- 在`MainFragment`的`onCreate()`中添加服务启动代码\n\n```java\n//启动Notification服务\n        Intent i = Notification.newIntent(getActivity());\n        getActivity().startService(i);\n```\n\n![image-20230528112547986](/images/WeatherBroadcast/image-20230528112547986.png)\n\n- **IntentService**在没有`activity`运行的情况下为**在后台运行的服务**，需要想个办法启动它。\n\n  使用**`AlarmManager`：可以发送intent的系统服务**\n\n  使用`PendingIntent`打包一个`intent`:”我想启动Notification服务”\n\n  在`PendingIntent`中实现一个启停定时器的`setServiceAlarm()`\n\n  - **添加定时方法**\n\n  ```java\n  //设置时间间隔是1分钟\n      private static final long NOTI_INTERVAL_MS = TimeUnit.MINUTES.toMillis(1);\n      public static void setServiceAlarm(Context context,boolean isOn){\n          Intent i = Notification.newIntent(context);\n          //创建一个用来启动Notification服务的PendingIntent\n          PendingIntent pendingIntent = PendingIntent.getService(context,0,i,FLAG_MUTABLE);\n          //设置定时器\n          AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n          if(isOn){\n              alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(),NOTI_INTERVAL_MS,pendingIntent);\n          }\n          else{\n              alarmManager.cancel(pendingIntent);\n              pendingIntent.cancel();\n          }\n      }\n  ```\n\n  - 使用`PendingIntent`管理定时器\n\n  ```java\n  public static boolean isServiceAlarmOn(Context context){\n          Intent intent = NotificationService.newIntent(context);\n          PendingIntent pendingIntent = PendingIntent.getService(context,0,intent,PendingIntent.FLAG_NO_CREATE);\n          return pendingIntent!=null;\n      }\n  ```\n\n  - 在`MainFragment`中设置定时开/闭\n\n  ```java\n  public void onResume() {\n    super.onResume();\n    SharedPreferences pref = getActivity().getSharedPreferences(\"set\", MODE_PRIVATE);\n    String send = pref.getString(\"send\",\"是\");\n    if (send==\"是\"){\n        //开启后台服务，启动定时器，发送通知消息\n        NotificationService.setServiceAlarm(getActivity(),true);\n    }else{\n        NotificationService.setServiceAlarm(getActivity(),false);\n    }\n  }\n  ```\n\n### Notification\n\n- 创建`Notification`对象\n\n完整的`notification`包括：\n\n- 首次显示通知消息时，在状态栏上显示ticker text、图标\n- 在Lollipop之后状态栏上不显示ticker text、图标\n- 是通知抽屉的一个视图\n- 待触发的`PendingIntent`，用户点击抽屉中的通知消息触发\n\n```java\n@Override\n    protected void onHandleIntent(@Nullable Intent intent) {\n        Log.e(TAG,\"接收一个intent：\"+intent);\n    /*\n    设置通知消息\n     */\n        Resources resources = getResources();\n        Intent i = MainActivity.newIntent(this);\n\t\t\t\t//不可变的PendingIntent\n        PendingIntent pendingIntent = PendingIntent.getActivity(this,0,i,FLAG_IMMUTABLE);\n        Notification notification = null;\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\n                .setTicker(resources.getString(R.string.new_weather_title))\n                .setSmallIcon(android.R.drawable.ic_menu_report_image)\n                .setContentTitle(resources.getString(R.string.new_weather_title))\n                .setContentText(resources.getString(R.string.new_weather_text))\n                .setContentIntent(pendingIntent)\n                .setAutoCancel(true);\n        NotificationManager notificationManager =(NotificationManager) getSystemService(NOTIFICATION_SERVICE);\n\n        //一定要设置channel\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(\"to-do\"\n                    , \"待办消息\",\n                    NotificationManager.IMPORTANCE_HIGH);\n            channel.enableVibration(true);\n            channel.setVibrationPattern(new long[]{500});\n            notificationManager.createNotificationChannel(channel);\n            builder.setChannelId(\"to-do\");\n            notification = builder.build();\n        } else {\n            notification = builder.build();\n        }\n\n        notificationManager.notify(0,notification);\n        System.out.println(notification);\n```\n\n[浅谈通知频道NotificationChannel](https://www.jianshu.com/p/4c51c071aa94)\n\n从Android8.0开始，应用显示通知时，必须为通知指定一个`Channel`。\n\n`NotificationChannel`构造方法需要三个参数，\n\n- `ChannelId`是自定义的字符串\n- 第二个参数是频道的名称\n- 第三个是优先级。\n\n创建完`NotificationChannel`之后，还需要使用`createNotificationChannels`方法注册到系统中。\n\n### **Broadcast Intent（待实现）**\n\n## 9、Map功能\n\n### **功能**\n\n- **点击MapLocation启动手机中的Map**\n\n### **知识点**\n\n- **隐式Intent的组成**\n\n```java\nIntent intent = new Intent(Intent.ACTION_VIEW);\nUri geoLocation = Uri.parse(\"geo:28.156198193290255,112.93207570910455?z=11\");\nintent.setData(geoLocation);\nif (intent.resolveActivity(getContext().getPackageManager()) != null) {\n    startActivity(intent);\n}\n```\n\n### Bug\n\nMapApp无法显示定位\n","slug":"WeatherBroadcast","published":1,"updated":"2023-06-07T09:39:57.036Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47p000jf4ssfchpdzbf","content":"<h1 id=\"Weather-Broadcast-APP\"><a href=\"#Weather-Broadcast-APP\" class=\"headerlink\" title=\"Weather Broadcast APP\"></a>Weather Broadcast APP</h1><p>Created: December 3, 2022 12:43 AM</p>\n<h1 id=\"视频展示\"><a href=\"#视频展示\" class=\"headerlink\" title=\"视频展示\"></a>视频展示</h1><video controls preload height=\"400px\"> \n    <source src=\"/images/WeatherBroadcast/23-05-28-11-33-28.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n\n\n<h1 id=\"一、主要功能\"><a href=\"#一、主要功能\" class=\"headerlink\" title=\"一、主要功能\"></a>一、主要功能</h1><h2 id=\"1、主视图和细节视图\"><a href=\"#1、主视图和细节视图\" class=\"headerlink\" title=\"1、主视图和细节视图\"></a>1、<strong>主视图</strong>和<strong>细节视图</strong></h2><p>在手机中包含<strong>主视图</strong>和<strong>细节视图</strong>，<strong>主视图</strong>显示连续多天的天气预报简讯，如图表 1所示，用户在主视图中点击某一天的天气简讯以后，跳出<strong>细节视图</strong>，显示用户选定当天天气的详细信息。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112048700.png\" alt=\"image-20230528112048700\" style=\"zoom:33%;\">\n\n<h2 id=\"2、-支持平板显示\"><a href=\"#2、-支持平板显示\" class=\"headerlink\" title=\"2、 支持平板显示\"></a>2、 支持平板显示</h2><p>在<strong>平板</strong>中使用<strong>Master-detail</strong>视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息，如图表 3所示。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112110529.png\" alt=\"image-20230528112110529\" style=\"zoom:33%;\">\n\n<h2 id=\"3、主视图菜单栏功能实现\"><a href=\"#3、主视图菜单栏功能实现\" class=\"headerlink\" title=\"3、主视图菜单栏功能实现\"></a>3、主视图菜单栏功能实现</h2><ul>\n<li><p>主视图中包含<strong>Map Location</strong>和<strong>setting</strong>选项，通过<strong>”Map location”</strong> 选项，可以调用手机中安装的地图应用显示当前天气预报所对应的位置，如图表 4所示，用户可以通过<strong>setting</strong>选项可以修改天气预报的位置，温度的单位（华氏度、摄氏度）以及是否开启天气通知，如图表 5所示。如果setting选项中的<strong>天气通知选项</strong>打开，会<strong>定期发送通知消息</strong>，其中显示当天的天气简讯，如图表 6所示。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112239798.png\" alt=\"image-20230528112239798\" style=\"zoom:33%;\"></li>\n</ul>\n<h2 id=\"4、细节视图菜单栏功能实现\"><a href=\"#4、细节视图菜单栏功能实现\" class=\"headerlink\" title=\"4、细节视图菜单栏功能实现\"></a>4、细节视图菜单栏功能实现</h2><p>细节视图菜单中包含<strong>分享</strong>和<strong>setting选项</strong>，用户可以通过分享选项通过其他应用（邮件、短信等）将天气详细信息分享给别人。如图表 2所示。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112305880.png\" alt=\"image-20230528112305880\" style=\"zoom:57%;\">\n\n<h2 id=\"5、SQLite对天气预报数据进行持久化保存\"><a href=\"#5、SQLite对天气预报数据进行持久化保存\" class=\"headerlink\" title=\"5、SQLite对天气预报数据进行持久化保存\"></a>5、SQLite对天气预报数据进行持久化保存</h2><p>利用SQLite对天气预报数据进行持久化保存，如果网络不可用的情况下，从SQLite中提取天气预报数据。</p>\n<h2 id=\"6、调用Web-API获取天气预报数据\"><a href=\"#6、调用Web-API获取天气预报数据\" class=\"headerlink\" title=\"6、调用Web API获取天气预报数据\"></a>6、调用Web API获取天气预报数据</h2><p>heweather：<a href=\"https://www.heweather.com/documents/api/s6/weather-forecast\">https://www.heweather.com/documents/api/s6/weather-forecast</a></p>\n<h1 id=\"二、开发细节\"><a href=\"#二、开发细节\" class=\"headerlink\" title=\"二、开发细节\"></a>二、开发细节</h1><h2 id=\"1、UI设设计\"><a href=\"#1、UI设设计\" class=\"headerlink\" title=\"1、UI设设计\"></a>1、UI设设计</h2><img src=\"/images/WeatherBroadcast/image-20230528112329509.png\" alt=\"image-20230528112329509\" style=\"zoom:50%;\">\n\n<h2 id=\"2、MainActivity-平板功能实现\"><a href=\"#2、MainActivity-平板功能实现\" class=\"headerlink\" title=\"2、MainActivity+平板功能实现\"></a>2、MainActivity+平板功能实现</h2><h3 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><p>判断设备是<code>phone</code>&#x2F;<code>paid</code>并托管到不同的<code>layout</code>文件中</p>\n</li>\n<li><p>平板功能实现：在<strong>平板</strong>中使用<strong>Master-detail</strong>视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息。</p>\n<ul>\n<li><p><strong>实现方式一：</strong><code>MainFragment.WeatherHolder</code>中的<code>onClick()</code>中将<code>DetailFragment</code>添加到<code>detailFragmentContainer</code>中。</p>\n<p>缺点：破坏fragment的封装</p>\n</li>\n<li><p><strong>实现方式二：</strong>在<code>fragment</code>中定义回调接口，委托托管<code>activity</code>来完成那些不应该由<code>fragment</code>处理的任务。</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"知识点\"><a href=\"#知识点\" class=\"headerlink\" title=\"知识点\"></a>知识点</h3><ul>\n<li><strong>别名资源</strong>指向了不同的资源文件</li>\n</ul>\n<img src=\"/images/WeatherBroadcast/image-20230528112408350.png\" alt=\"image-20230528112408350\" style=\"zoom: 33%;\">\n\n<ul>\n<li><strong>Fragment回调接口</strong></li>\n</ul>\n<h3 id=\"Fragment回调接口的实现\"><a href=\"#Fragment回调接口的实现\" class=\"headerlink\" title=\"Fragment回调接口的实现\"></a><strong>Fragment回调接口的实现</strong></h3><ul>\n<li><code>MainFragment</code>添加回调接口</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Callbacks mCallbacks;   <span class=\"comment\">//回调接口</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//回调接口:需要托管activity实现</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">Callbacks</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">void</span> <span class=\"title function_\">onWeatherSelected</span><span class=\"params\">(Weather weather)</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//在fragment附加给activity时调用</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onAttach</span><span class=\"params\">(Activity activity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onAttach(activity);</span><br><span class=\"line\">        mCallbacks = (Callbacks) activity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//清空变量</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onDetach</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onDetach();</span><br><span class=\"line\">        mCallbacks = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>在<code>Mainactivity</code>中实现</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        实现其托管fragment的回调接口</span></span><br><span class=\"line\"><span class=\"comment\">            1、如果是Phone：启动新的PagerActivity</span></span><br><span class=\"line\"><span class=\"comment\">            2、如果是paid：将DetailFragment放入detailFragmentContainer中</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onWeatherSelected</span><span class=\"params\">(Weather weather)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (findViewById(R.id.detailFragmentContainer) == <span class=\"literal\">null</span>) &#123;   <span class=\"comment\">//Phone</span></span><br><span class=\"line\">           <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> PagerActivity.newIntent(<span class=\"built_in\">this</span>,weather.getId());</span><br><span class=\"line\">           startActivity(intent);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>                                                        <span class=\"comment\">//Paid</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">Fragment</span> <span class=\"variable\">newDetail</span> <span class=\"operator\">=</span> DetailFragment.newInstance(weather.getId());</span><br><span class=\"line\">            getSupportFragmentManager().beginTransaction().replace(R.id.detailFragmentContainer,newDetail).commit();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    **&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在<code>MainFragment</code>中调用</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onClick</span><span class=\"params\">(View v)</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//跳转到细节视图</span></span><br><span class=\"line\"><span class=\"comment\">//            Intent intent = PagerActivity.newIntent(getActivity(), mWeather.getId());</span></span><br><span class=\"line\"><span class=\"comment\">//            startActivity(intent);</span></span><br><span class=\"line\">            <span class=\"comment\">//使用回调方法</span></span><br><span class=\"line\">            mCallbacks.onWeatherSelected(mWeather);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3、MainFragment\"><a href=\"#3、MainFragment\" class=\"headerlink\" title=\"3、MainFragment\"></a>3、MainFragment</h2><h3 id=\"功能-1\"><a href=\"#功能-1\" class=\"headerlink\" title=\"功能\"></a>功能</h3><ul>\n<li>实例化单例</li>\n<li>实例化数据库</li>\n<li>实例化<code>RecyclerView</code></li>\n<li>监听用户点击，并跳转到<code>DetialActivity</code></li>\n<li>从网上获取数据，并显示在组件中</li>\n<li>监听<code>Menu</code>的点击事件</li>\n</ul>\n<h3 id=\"知识点-1\"><a href=\"#知识点-1\" class=\"headerlink\" title=\"知识点\"></a>知识点</h3><ul>\n<li><code>RecyclerView</code>实例化及其逻辑实现</li>\n<li><code>Menu</code>实例化，并实现监听</li>\n<li>启动后台线程<code>AsyncTask</code>，实现数据获取</li>\n<li><code>Fragment</code>跳转到Activity并传递数据</li>\n<li><code>notification</code>实现消息推送</li>\n<li><code>SQLlite</code>实现数据持久化</li>\n</ul>\n<h3 id=\"要点\"><a href=\"#要点\" class=\"headerlink\" title=\"要点\"></a>要点</h3><p><strong>1、从<code>Fragment</code>跳转到<code>Activity</code>并传递数据</strong></p>\n<p><strong><code>MainFragment</code></strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//调用Fragment.startActivity(Itent)</span></span><br><span class=\"line\"><span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> DetailActivity.newIntent(getActivity(), mWeather.getId());</span><br><span class=\"line\">startActivity(intent);</span><br></pre></td></tr></table></figure>\n\n<p><strong><code>DetailActivity</code></strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">EXTRA_WEATHER_ID</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;com/example/weatherbroadcast.weather_id&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//启动DetailActivity并传递参数</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Intent <span class=\"title function_\">newIntent</span><span class=\"params\">(Context packageContext, UUID weathereId)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(packageContext, DetailActivity.class);</span><br><span class=\"line\">    intent.putExtra(EXTRA_WEATHER_ID, weathereId);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> intent;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、DetailActivity\"><a href=\"#4、DetailActivity\" class=\"headerlink\" title=\"4、DetailActivity\"></a>4、DetailActivity</h2><h3 id=\"功能-2\"><a href=\"#功能-2\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li>托管DetailFragment</li>\n<li>传递数据WeatherID</li>\n</ul>\n<h3 id=\"知识点：FragmentAugment实现\"><a href=\"#知识点：FragmentAugment实现\" class=\"headerlink\" title=\"知识点：FragmentAugment实现\"></a>知识点：<code>FragmentAugment</code>实现</h3><p><code>**DetailActivity</code>获取数据并传递给其托管的Fragment的两种方法**</p>\n<ul>\n<li><strong>直接获取数据，直接传递——由Activity获取数据</strong></li>\n</ul>\n<p><code>UUID</code>是<code>Serializable</code>对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">    setContentView(R.layout.activity_detail);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取intent传入的信息</span></span><br><span class=\"line\">    weatherId = (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);</span><br><span class=\"line\">\t\t<span class=\"comment\">//绑定Fragment</span></span><br><span class=\"line\">    <span class=\"type\">FragmentManager</span> <span class=\"variable\">fm</span> <span class=\"operator\">=</span> getSupportFragmentManager();</span><br><span class=\"line\">    <span class=\"type\">Fragment</span> <span class=\"variable\">fragment</span> <span class=\"operator\">=</span> fm.findFragmentById(R.id.fragment_container3);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fragment == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        fragment = createFragment();</span><br><span class=\"line\">        fm.beginTransaction()</span><br><span class=\"line\">                .add(R.id.fragment_container3, fragment)</span><br><span class=\"line\">                .commit();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    <span class=\"comment\">//创建Fragment</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Fragment <span class=\"title function_\">createFragment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//直接传递数据</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> DetailFragment.newInstance(weatherId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>缺点：</strong></p>\n<p>破坏了**<code>CrimeFragment</code><strong>的封装，</strong><code>CrimeFragment</code>**不再是可以复用的单元。</p>\n<ul>\n<li><strong>使用<code>fragmentargument</code>——由Fragment获取数据</strong></li>\n</ul>\n<p><strong>augment：参数</strong></p>\n<p>将<code>weatherID</code>存储到<code>Fragment</code>的某个地方而不是<code>Activity</code>中。</p>\n<p>每个<code>Fragment</code>实例都有一个**<code>Bundle</code><strong>对象，</strong><code>Bundle</code>**对象包含键值对，可以将参数添加到<code>**Bundle**</code>对象中</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//附加augmentbundle给Fragment</span></span><br><span class=\"line\">Fragment.setArguments(Bundle)</span><br><span class=\"line\"><span class=\"comment\">//Bundle添加argument</span></span><br><span class=\"line\">Bundle.putSerializable(Key,Value)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5、PagerActivity\"><a href=\"#5、PagerActivity\" class=\"headerlink\" title=\"5、PagerActivity\"></a>5、PagerActivity</h2><h3 id=\"功能-3\"><a href=\"#功能-3\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li>实现左右滑动屏幕</li>\n</ul>\n<h3 id=\"知识点：ViewPager实现\"><a href=\"#知识点：ViewPager实现\" class=\"headerlink\" title=\"知识点：ViewPager实现\"></a>知识点：<code>ViewPager</code>实现</h3><p><strong>步骤：</strong></p>\n<ul>\n<li>创建<code>PagerActivity</code>类，以<code>VeiwPager</code>为根视图</li>\n<li>定义包含<code>ViewPager</code>的视图层级结构</li>\n<li>在<code>PagerActivity</code>类中关联使用<code>ViewPager</code>及其<code>Adapter</code></li>\n</ul>\n<h3 id=\"Bug\"><a href=\"#Bug\" class=\"headerlink\" title=\"Bug\"></a>Bug</h3><p>只能显示6天的Pager</p>\n<p>Bug修复：我把数据库课WetherLab封装在一起了</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PagerActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">EXTRA_WEATHER_ID</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;com/example/weatherbroadcast/DetailActivity.java.weather_id&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ViewPager mViewPager;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Weather&gt; mWeathers;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//启动PagerActivity并传递参数</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Intent <span class=\"title function_\">newIntent</span><span class=\"params\">(Context packageContext, UUID weathereId)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(packageContext, PagerActivity.class);</span><br><span class=\"line\">        intent.putExtra(EXTRA_WEATHER_ID, weathereId);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> intent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_pager);</span><br><span class=\"line\"></span><br><span class=\"line\">        mViewPager = (ViewPager) findViewById(R.id.view_pager);</span><br><span class=\"line\">        mWeathers = WeatherLab.get(<span class=\"built_in\">this</span>).getWeathers();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//获取intent传入的信息</span></span><br><span class=\"line\">        <span class=\"type\">UUID</span> <span class=\"variable\">weatherId</span> <span class=\"operator\">=</span> (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//设置点击之后显示的界面</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; mWeathers.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mWeathers.get(i).getId().equals(weatherId)) &#123;</span><br><span class=\"line\">                mViewPager.setCurrentItem(i);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//创建Adapter</span></span><br><span class=\"line\">            <span class=\"type\">FragmentManager</span> <span class=\"variable\">fragmentManager</span> <span class=\"operator\">=</span> getSupportFragmentManager();</span><br><span class=\"line\">            mViewPager.setAdapter(<span class=\"keyword\">new</span> <span class=\"title class_\">FragmentStatePagerAdapter</span>(fragmentManager) &#123;</span><br><span class=\"line\">                <span class=\"meta\">@NonNull</span></span><br><span class=\"line\">                <span class=\"meta\">@Override</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span> Fragment <span class=\"title function_\">getItem</span><span class=\"params\">(<span class=\"type\">int</span> position)</span> &#123;</span><br><span class=\"line\">                    <span class=\"type\">Weather</span> <span class=\"variable\">weather</span> <span class=\"operator\">=</span> mWeathers.get(position);</span><br><span class=\"line\">                    <span class=\"comment\">//实例化DetailFragment</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> DetailFragment.newInstance(weather.getId());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"meta\">@Override</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getCount</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">                    Log.e(<span class=\"string\">&quot;mWeathers.size : &quot;</span>, String.valueOf(mWeathers.size()));</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> mWeathers.size();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6、SQLlite-WeatherLab单例封装\"><a href=\"#6、SQLlite-WeatherLab单例封装\" class=\"headerlink\" title=\"6、SQLlite+WeatherLab单例封装\"></a>6、SQLlite+WeatherLab单例封装</h2><h3 id=\"功能-4\"><a href=\"#功能-4\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><strong>实现数据持久化</strong></li>\n</ul>\n<h3 id=\"知识点-2\"><a href=\"#知识点-2\" class=\"headerlink\" title=\"知识点\"></a>知识点</h3><ul>\n<li><strong>单例如何实例化？</strong></li>\n</ul>\n<p><strong>在类中声明为静态变量并且实例化。</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeatherLab</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> WeatherLab sWeatherLab;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> SQLiteDatabase mDatabase;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Context mContext;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//单例的意思：在类里已经实例化了</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> WeatherLab <span class=\"title function_\">get</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sWeatherLab == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            sWeatherLab = <span class=\"keyword\">new</span> <span class=\"title class_\">WeatherLab</span>(context);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sWeatherLab;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>这里将数据库也实现单例</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Context <span class=\"title function_\">getContext</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sWeatherLab.mContext;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">WeatherLab</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        mContext = context.getApplicationContext();</span><br><span class=\"line\">        <span class=\"comment\">//打开数据库，如果不存在就先调用DataBaseHelper.onCreate()创建</span></span><br><span class=\"line\">        mDatabase = <span class=\"keyword\">new</span> <span class=\"title class_\">DatabaseHelper</span>(mContext).getWritableDatabase();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>实现数据库<code>Schema</code>类：定义描述数据表元素的String常量</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DbSchema</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeatherTable</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">NAME</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;WeatherTab&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Cols</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">UUID</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;uuid&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">TITLE</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;title&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">DATE</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;date&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">SOLVED</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;solved&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>DataBaseHelper类</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DatabaseHelper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">SQLiteOpenHelper</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">VERSION</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DBNAME=<span class=\"string\">&quot;User.db&quot;</span>;   <span class=\"comment\">//  创建数据库名叫 Users</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">DatabaseHelper</span><span class=\"params\">(Context context)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(context,DBNAME,<span class=\"literal\">null</span>,VERSION);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(SQLiteDatabase db)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//db.execSQL(&quot;create table WeatherTable (_id INTEGER PRIMARY KEY AUTOINCREMENT,date text,max_temp text,min_temp text,weather text,humidity text,pressure text,wind text,icon text)&quot;);</span></span><br><span class=\"line\">        db.execSQL(<span class=\"string\">&quot;create table &quot;</span>+ NAME+<span class=\"string\">&quot;(&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;_id INTEGER PRIMARY KEY AUTOINCREMENT,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.UUID+<span class=\"string\">&quot; text, &quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.DATE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.MAX_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.MIN_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.WEATHER+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.HUMIDITY+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.PRESSURE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.WIND+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.ICON+<span class=\"string\">&quot; text&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;)&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onUpgrade</span><span class=\"params\">(SQLiteDatabase db, <span class=\"type\">int</span> oldVersion, <span class=\"type\">int</span> newVersion)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//TODO</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong>修改WeatherLab：改用数据库存储数据</strong></p>\n<ul>\n<li><strong>实现<code>CursorWrapper</code>子类帮助查询数据库</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建Cursor子类用于查询</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeatherCursorWrapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">CursorWrapper</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"title function_\">WeatherCursorWrapper</span><span class=\"params\">(Cursor cursor)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">super</span>(cursor);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> Weather <span class=\"title function_\">getWeather</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">UUID</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.UUID));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">DATE</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.DATE));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">MAX_TEMP</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MAX_TEMP));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">MIN_TEMP</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MIN_TEMP));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">WEATHER</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WEATHER));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">HUMIDITY</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.HUMIDITY));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">PRESSURE</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.PRESSURE));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">WIND</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WIND));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">ICON</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.ICON));</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">Weather</span> <span class=\"variable\">weather</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Weather</span>();</span><br><span class=\"line\">            weather.setId(java.util.UUID.fromString(UUID));</span><br><span class=\"line\">            weather.setDate(DATE);</span><br><span class=\"line\">            weather.setMaxTemperature(MAX_TEMP);</span><br><span class=\"line\">            weather.setMinTemperature(MIN_TEMP);</span><br><span class=\"line\">            weather.setWeather(WEATHER);</span><br><span class=\"line\">            weather.setHumidity(HUMIDITY);</span><br><span class=\"line\">            weather.setPressure(PRESSURE);</span><br><span class=\"line\">            weather.setWind(WIND);</span><br><span class=\"line\">            weather.setIconUrl(ICON);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">return</span> weather;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//实例化WeatherCursorWrapper </span></span><br><span class=\"line\"><span class=\"type\">WeatherCursorWrapper</span> <span class=\"variable\">cursor</span> <span class=\"operator\">=</span> queryWeathers(<span class=\"literal\">null</span>, <span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>**ContentValues</code>:键值储存类，只能处理SQLite数据**</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ContentValues:键值储存类，只能处理SQLite数据</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ContentValues <span class=\"title function_\">getContentValues</span><span class=\"params\">(Weather weather)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ContentValues</span> <span class=\"variable\">values</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ContentValues</span>();</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.UUID, weather.getId().toString());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.DATE, weather.getDate());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.MAX_TEMP, weather.getMaxTemperature());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.MIN_TEMP, weather.getMinTemperature());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.WEATHER, weather.getWeather());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.HUMIDITY, weather.getHumidity());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.PRESSURE, weather.getPressure());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.WIND, weather.getWind());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.ICON, weather.getIconUrl());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> values;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除数据库之后记得立马要<code>create</code>一个，不然<code>quary</code>报错</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//判断数据库是否为空</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isEmpty</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">WeatherCursorWrapper</span> <span class=\"variable\">cursor</span> <span class=\"operator\">=</span> queryWeathers(<span class=\"literal\">null</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cursor.getCount()==<span class=\"number\">0</span>||cursor==<span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"comment\">//如果数据库不为空</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!sWeatherLab.isEmpty())&#123;</span><br><span class=\"line\">            mDatabase.execSQL(<span class=\"string\">&quot;drop table &quot;</span>+DatabaseHelper.DbSchema.NAME);</span><br><span class=\"line\">            mDatabase.execSQL(<span class=\"string\">&quot;create table &quot;</span>+ NAME+<span class=\"string\">&quot;(&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;_id INTEGER PRIMARY KEY AUTOINCREMENT,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.UUID+<span class=\"string\">&quot; text, &quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.DATE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.MAX_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.MIN_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.WEATHER+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.HUMIDITY+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.PRESSURE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.WIND+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.ICON+<span class=\"string\">&quot; text&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;)&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"报错-table-WeatherTab-has-no-column-named-min-temp\"><a href=\"#报错-table-WeatherTab-has-no-column-named-min-temp\" class=\"headerlink\" title=\"报错 table WeatherTab has no column named min_temp\"></a>报错 <strong>table WeatherTab has no column named min_temp</strong></h3><p><img src=\"/images/WeatherBroadcast/image-20230528112458417.png\" alt=\"image-20230528112458417\"></p>\n<p><strong>table WeatherTab has no column named min_temp in “INSERT INTO WeatherTab(min_temp,pressure,date,icon,uuid,wind,max_temp,humidity,weather) VALUES (?,?,?,?,?,?,?,?,?)”</strong></p>\n<p><strong>原因：数据表创建语句中字段前没有空格</strong></p>\n<p><a href=\"https://blog.csdn.net/u013040819/article/details/81489137\">table xxx has no column named id (code 1)？表中插入数据找不到字段？_奋斗的IT小民工的博客-CSDN博客</a></p>\n<h2 id=\"7、Share功能\"><a href=\"#7、Share功能\" class=\"headerlink\" title=\"7、Share功能\"></a>7、Share功能</h2><h3 id=\"功能-5\"><a href=\"#功能-5\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><strong>点击Menu分享键分享天气</strong></li>\n</ul>\n<h3 id=\"知识点-3\"><a href=\"#知识点-3\" class=\"headerlink\" title=\"知识点\"></a><strong>知识点</strong></h3><ul>\n<li><strong>隐式Intent的组成</strong><ul>\n<li>要执行的操作</li>\n<li>待访问数据的位置</li>\n<li>操作涉及的数据类型</li>\n<li>可选类别</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"代码-1\"><a href=\"#代码-1\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">case</span> R.id.share:</span><br><span class=\"line\">                <span class=\"comment\">//Intent.ACTION_SEND:要执行的操作</span></span><br><span class=\"line\">                <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(Intent.ACTION_SEND);</span><br><span class=\"line\">                <span class=\"comment\">//操作涉及的数据类型</span></span><br><span class=\"line\">                i.setType(<span class=\"string\">&quot;text/plain&quot;</span>);</span><br><span class=\"line\">                <span class=\"comment\">//待访问数据的位置</span></span><br><span class=\"line\">                i.putExtra(Intent.EXTRA_TEXT,createMessage());</span><br><span class=\"line\">                startActivity(i);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8、Notification——IntentService的子类\"><a href=\"#8、Notification——IntentService的子类\" class=\"headerlink\" title=\"8、Notification——IntentService的子类\"></a>8、Notification——<strong>IntentService的子类</strong></h2><h3 id=\"功能-6\"><a href=\"#功能-6\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li>定期发送通知给用户，显示在状态栏中</li>\n<li>保证用户在使用应用时不出现新结果通知</li>\n</ul>\n<h3 id=\"知识点-4\"><a href=\"#知识点-4\" class=\"headerlink\" title=\"知识点\"></a><strong>知识点</strong></h3><ul>\n<li><p><strong>后台服务：IntentService</strong></p>\n</li>\n<li><p><strong>SharedPreferences：保存数据（location、unit）</strong></p>\n</li>\n<li><p><strong>AlarmManager延迟运行</strong></p>\n</li>\n<li><p><strong>通知消息：Notification</strong></p>\n</li>\n<li><p><strong>Broadcast Intent</strong></p>\n<p><img src=\"/images/WeatherBroadcast/image-20230528112524704.png\" alt=\"image-20230528112524704\"></p>\n</li>\n</ul>\n<h3 id=\"后台服务：IntentService\"><a href=\"#后台服务：IntentService\" class=\"headerlink\" title=\"后台服务：IntentService\"></a><strong>后台服务：IntentService</strong></h3><ul>\n<li>创建**<code>IntentService</code>**类继承<code>IntentService</code></li>\n<li><code>manifest</code>中配置<code>&lt;service android:name=&quot;.Notification&quot;&gt;&lt;/service&gt;</code></li>\n</ul>\n<p>注意构造函数不能带参数</p>\n<ul>\n<li>在<code>MainFragment</code>的<code>onCreate()</code>中添加服务启动代码</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//启动Notification服务</span></span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> Notification.newIntent(getActivity());</span><br><span class=\"line\">        getActivity().startService(i);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/WeatherBroadcast/image-20230528112547986.png\" alt=\"image-20230528112547986\"></p>\n<ul>\n<li><p><strong>IntentService</strong>在没有<code>activity</code>运行的情况下为<strong>在后台运行的服务</strong>，需要想个办法启动它。</p>\n<p>使用**<code>AlarmManager</code>：可以发送intent的系统服务**</p>\n<p>使用<code>PendingIntent</code>打包一个<code>intent</code>:”我想启动Notification服务”</p>\n<p>在<code>PendingIntent</code>中实现一个启停定时器的<code>setServiceAlarm()</code></p>\n<ul>\n<li><strong>添加定时方法</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//设置时间间隔是1分钟</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">NOTI_INTERVAL_MS</span> <span class=\"operator\">=</span> TimeUnit.MINUTES.toMillis(<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setServiceAlarm</span><span class=\"params\">(Context context,<span class=\"type\">boolean</span> isOn)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> Notification.newIntent(context);</span><br><span class=\"line\">        <span class=\"comment\">//创建一个用来启动Notification服务的PendingIntent</span></span><br><span class=\"line\">        <span class=\"type\">PendingIntent</span> <span class=\"variable\">pendingIntent</span> <span class=\"operator\">=</span> PendingIntent.getService(context,<span class=\"number\">0</span>,i,FLAG_MUTABLE);</span><br><span class=\"line\">        <span class=\"comment\">//设置定时器</span></span><br><span class=\"line\">        <span class=\"type\">AlarmManager</span> <span class=\"variable\">alarmManager</span> <span class=\"operator\">=</span> (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isOn)&#123;</span><br><span class=\"line\">            alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(),NOTI_INTERVAL_MS,pendingIntent);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            alarmManager.cancel(pendingIntent);</span><br><span class=\"line\">            pendingIntent.cancel();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>使用<code>PendingIntent</code>管理定时器</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isServiceAlarmOn</span><span class=\"params\">(Context context)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> NotificationService.newIntent(context);</span><br><span class=\"line\">        <span class=\"type\">PendingIntent</span> <span class=\"variable\">pendingIntent</span> <span class=\"operator\">=</span> PendingIntent.getService(context,<span class=\"number\">0</span>,intent,PendingIntent.FLAG_NO_CREATE);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pendingIntent!=<span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在<code>MainFragment</code>中设置定时开&#x2F;闭</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResume</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">super</span>.onResume();</span><br><span class=\"line\">  <span class=\"type\">SharedPreferences</span> <span class=\"variable\">pref</span> <span class=\"operator\">=</span> getActivity().getSharedPreferences(<span class=\"string\">&quot;set&quot;</span>, MODE_PRIVATE);</span><br><span class=\"line\">  <span class=\"type\">String</span> <span class=\"variable\">send</span> <span class=\"operator\">=</span> pref.getString(<span class=\"string\">&quot;send&quot;</span>,<span class=\"string\">&quot;是&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (send==<span class=\"string\">&quot;是&quot;</span>)&#123;</span><br><span class=\"line\">      <span class=\"comment\">//开启后台服务，启动定时器，发送通知消息</span></span><br><span class=\"line\">      NotificationService.setServiceAlarm(getActivity(),<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">      NotificationService.setServiceAlarm(getActivity(),<span class=\"literal\">false</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Notification\"><a href=\"#Notification\" class=\"headerlink\" title=\"Notification\"></a>Notification</h3><ul>\n<li>创建<code>Notification</code>对象</li>\n</ul>\n<p>完整的<code>notification</code>包括：</p>\n<ul>\n<li>首次显示通知消息时，在状态栏上显示ticker text、图标</li>\n<li>在Lollipop之后状态栏上不显示ticker text、图标</li>\n<li>是通知抽屉的一个视图</li>\n<li>待触发的<code>PendingIntent</code>，用户点击抽屉中的通知消息触发</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onHandleIntent</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Intent intent)</span> &#123;</span><br><span class=\"line\">        Log.e(TAG,<span class=\"string\">&quot;接收一个intent：&quot;</span>+intent);</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    设置通知消息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">        <span class=\"type\">Resources</span> <span class=\"variable\">resources</span> <span class=\"operator\">=</span> getResources();</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> MainActivity.newIntent(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//不可变的PendingIntent</span></span><br><span class=\"line\">        <span class=\"type\">PendingIntent</span> <span class=\"variable\">pendingIntent</span> <span class=\"operator\">=</span> PendingIntent.getActivity(<span class=\"built_in\">this</span>,<span class=\"number\">0</span>,i,FLAG_IMMUTABLE);</span><br><span class=\"line\">        <span class=\"type\">Notification</span> <span class=\"variable\">notification</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        NotificationCompat.<span class=\"type\">Builder</span> <span class=\"variable\">builder</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NotificationCompat</span>.Builder(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">                .setTicker(resources.getString(R.string.new_weather_title))</span><br><span class=\"line\">                .setSmallIcon(android.R.drawable.ic_menu_report_image)</span><br><span class=\"line\">                .setContentTitle(resources.getString(R.string.new_weather_title))</span><br><span class=\"line\">                .setContentText(resources.getString(R.string.new_weather_text))</span><br><span class=\"line\">                .setContentIntent(pendingIntent)</span><br><span class=\"line\">                .setAutoCancel(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"type\">NotificationManager</span> <span class=\"variable\">notificationManager</span> <span class=\"operator\">=</span>(NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//一定要设置channel</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class=\"line\">            <span class=\"type\">NotificationChannel</span> <span class=\"variable\">channel</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NotificationChannel</span>(<span class=\"string\">&quot;to-do&quot;</span></span><br><span class=\"line\">                    , <span class=\"string\">&quot;待办消息&quot;</span>,</span><br><span class=\"line\">                    NotificationManager.IMPORTANCE_HIGH);</span><br><span class=\"line\">            channel.enableVibration(<span class=\"literal\">true</span>);</span><br><span class=\"line\">            channel.setVibrationPattern(<span class=\"keyword\">new</span> <span class=\"title class_\">long</span>[]&#123;<span class=\"number\">500</span>&#125;);</span><br><span class=\"line\">            notificationManager.createNotificationChannel(channel);</span><br><span class=\"line\">            builder.setChannelId(<span class=\"string\">&quot;to-do&quot;</span>);</span><br><span class=\"line\">            notification = builder.build();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            notification = builder.build();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        notificationManager.notify(<span class=\"number\">0</span>,notification);</span><br><span class=\"line\">        System.out.println(notification);</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.jianshu.com/p/4c51c071aa94\">浅谈通知频道NotificationChannel</a></p>\n<p>从Android8.0开始，应用显示通知时，必须为通知指定一个<code>Channel</code>。</p>\n<p><code>NotificationChannel</code>构造方法需要三个参数，</p>\n<ul>\n<li><code>ChannelId</code>是自定义的字符串</li>\n<li>第二个参数是频道的名称</li>\n<li>第三个是优先级。</li>\n</ul>\n<p>创建完<code>NotificationChannel</code>之后，还需要使用<code>createNotificationChannels</code>方法注册到系统中。</p>\n<h3 id=\"Broadcast-Intent（待实现）\"><a href=\"#Broadcast-Intent（待实现）\" class=\"headerlink\" title=\"Broadcast Intent（待实现）\"></a><strong>Broadcast Intent（待实现）</strong></h3><h2 id=\"9、Map功能\"><a href=\"#9、Map功能\" class=\"headerlink\" title=\"9、Map功能\"></a>9、Map功能</h2><h3 id=\"功能-7\"><a href=\"#功能-7\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><strong>点击MapLocation启动手机中的Map</strong></li>\n</ul>\n<h3 id=\"知识点-5\"><a href=\"#知识点-5\" class=\"headerlink\" title=\"知识点\"></a><strong>知识点</strong></h3><ul>\n<li><strong>隐式Intent的组成</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(Intent.ACTION_VIEW);</span><br><span class=\"line\"><span class=\"type\">Uri</span> <span class=\"variable\">geoLocation</span> <span class=\"operator\">=</span> Uri.parse(<span class=\"string\">&quot;geo:28.156198193290255,112.93207570910455?z=11&quot;</span>);</span><br><span class=\"line\">intent.setData(geoLocation);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (intent.resolveActivity(getContext().getPackageManager()) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    startActivity(intent);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Bug-1\"><a href=\"#Bug-1\" class=\"headerlink\" title=\"Bug\"></a>Bug</h3><p>MapApp无法显示定位</p>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"Weather-Broadcast-APP\"><a href=\"#Weather-Broadcast-APP\" class=\"headerlink\" title=\"Weather Broadcast APP\"></a>Weather Broadcast APP</h1><p>Created: December 3, 2022 12:43 AM</p>\n<h1 id=\"视频展示\"><a href=\"#视频展示\" class=\"headerlink\" title=\"视频展示\"></a>视频展示</h1><video controls preload height=\"400px\"> \n    <source src=\"/images/WeatherBroadcast/23-05-28-11-33-28.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n\n\n<h1 id=\"一、主要功能\"><a href=\"#一、主要功能\" class=\"headerlink\" title=\"一、主要功能\"></a>一、主要功能</h1><h2 id=\"1、主视图和细节视图\"><a href=\"#1、主视图和细节视图\" class=\"headerlink\" title=\"1、主视图和细节视图\"></a>1、<strong>主视图</strong>和<strong>细节视图</strong></h2><p>在手机中包含<strong>主视图</strong>和<strong>细节视图</strong>，<strong>主视图</strong>显示连续多天的天气预报简讯，如图表 1所示，用户在主视图中点击某一天的天气简讯以后，跳出<strong>细节视图</strong>，显示用户选定当天天气的详细信息。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112048700.png\" alt=\"image-20230528112048700\" style=\"zoom:33%;\">\n\n<h2 id=\"2、-支持平板显示\"><a href=\"#2、-支持平板显示\" class=\"headerlink\" title=\"2、 支持平板显示\"></a>2、 支持平板显示</h2><p>在<strong>平板</strong>中使用<strong>Master-detail</strong>视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息，如图表 3所示。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112110529.png\" alt=\"image-20230528112110529\" style=\"zoom:33%;\">\n\n<h2 id=\"3、主视图菜单栏功能实现\"><a href=\"#3、主视图菜单栏功能实现\" class=\"headerlink\" title=\"3、主视图菜单栏功能实现\"></a>3、主视图菜单栏功能实现</h2><ul>\n<li><p>主视图中包含<strong>Map Location</strong>和<strong>setting</strong>选项，通过<strong>”Map location”</strong> 选项，可以调用手机中安装的地图应用显示当前天气预报所对应的位置，如图表 4所示，用户可以通过<strong>setting</strong>选项可以修改天气预报的位置，温度的单位（华氏度、摄氏度）以及是否开启天气通知，如图表 5所示。如果setting选项中的<strong>天气通知选项</strong>打开，会<strong>定期发送通知消息</strong>，其中显示当天的天气简讯，如图表 6所示。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112239798.png\" alt=\"image-20230528112239798\" style=\"zoom:33%;\"></li>\n</ul>\n<h2 id=\"4、细节视图菜单栏功能实现\"><a href=\"#4、细节视图菜单栏功能实现\" class=\"headerlink\" title=\"4、细节视图菜单栏功能实现\"></a>4、细节视图菜单栏功能实现</h2><p>细节视图菜单中包含<strong>分享</strong>和<strong>setting选项</strong>，用户可以通过分享选项通过其他应用（邮件、短信等）将天气详细信息分享给别人。如图表 2所示。</p>\n<img src=\"/images/WeatherBroadcast/image-20230528112305880.png\" alt=\"image-20230528112305880\" style=\"zoom:57%;\">\n\n<h2 id=\"5、SQLite对天气预报数据进行持久化保存\"><a href=\"#5、SQLite对天气预报数据进行持久化保存\" class=\"headerlink\" title=\"5、SQLite对天气预报数据进行持久化保存\"></a>5、SQLite对天气预报数据进行持久化保存</h2><p>利用SQLite对天气预报数据进行持久化保存，如果网络不可用的情况下，从SQLite中提取天气预报数据。</p>\n<h2 id=\"6、调用Web-API获取天气预报数据\"><a href=\"#6、调用Web-API获取天气预报数据\" class=\"headerlink\" title=\"6、调用Web API获取天气预报数据\"></a>6、调用Web API获取天气预报数据</h2><p>heweather：<a href=\"https://www.heweather.com/documents/api/s6/weather-forecast\">https://www.heweather.com/documents/api/s6/weather-forecast</a></p>\n<h1 id=\"二、开发细节\"><a href=\"#二、开发细节\" class=\"headerlink\" title=\"二、开发细节\"></a>二、开发细节</h1><h2 id=\"1、UI设设计\"><a href=\"#1、UI设设计\" class=\"headerlink\" title=\"1、UI设设计\"></a>1、UI设设计</h2><img src=\"/images/WeatherBroadcast/image-20230528112329509.png\" alt=\"image-20230528112329509\" style=\"zoom:50%;\">\n\n<h2 id=\"2、MainActivity-平板功能实现\"><a href=\"#2、MainActivity-平板功能实现\" class=\"headerlink\" title=\"2、MainActivity+平板功能实现\"></a>2、MainActivity+平板功能实现</h2><h3 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><p>判断设备是<code>phone</code>&#x2F;<code>paid</code>并托管到不同的<code>layout</code>文件中</p>\n</li>\n<li><p>平板功能实现：在<strong>平板</strong>中使用<strong>Master-detail</strong>视图，当用户点击某一天的天气预览以后，直接在界面右边显示当天天气的详细信息。</p>\n<ul>\n<li><p><strong>实现方式一：</strong><code>MainFragment.WeatherHolder</code>中的<code>onClick()</code>中将<code>DetailFragment</code>添加到<code>detailFragmentContainer</code>中。</p>\n<p>缺点：破坏fragment的封装</p>\n</li>\n<li><p><strong>实现方式二：</strong>在<code>fragment</code>中定义回调接口，委托托管<code>activity</code>来完成那些不应该由<code>fragment</code>处理的任务。</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"知识点\"><a href=\"#知识点\" class=\"headerlink\" title=\"知识点\"></a>知识点</h3><ul>\n<li><strong>别名资源</strong>指向了不同的资源文件</li>\n</ul>\n<img src=\"/images/WeatherBroadcast/image-20230528112408350.png\" alt=\"image-20230528112408350\" style=\"zoom: 33%;\">\n\n<ul>\n<li><strong>Fragment回调接口</strong></li>\n</ul>\n<h3 id=\"Fragment回调接口的实现\"><a href=\"#Fragment回调接口的实现\" class=\"headerlink\" title=\"Fragment回调接口的实现\"></a><strong>Fragment回调接口的实现</strong></h3><ul>\n<li><code>MainFragment</code>添加回调接口</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Callbacks mCallbacks;   <span class=\"comment\">//回调接口</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//回调接口:需要托管activity实现</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">Callbacks</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">void</span> <span class=\"title function_\">onWeatherSelected</span><span class=\"params\">(Weather weather)</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//在fragment附加给activity时调用</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onAttach</span><span class=\"params\">(Activity activity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onAttach(activity);</span><br><span class=\"line\">        mCallbacks = (Callbacks) activity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//清空变量</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onDetach</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onDetach();</span><br><span class=\"line\">        mCallbacks = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>在<code>Mainactivity</code>中实现</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        实现其托管fragment的回调接口</span></span><br><span class=\"line\"><span class=\"comment\">            1、如果是Phone：启动新的PagerActivity</span></span><br><span class=\"line\"><span class=\"comment\">            2、如果是paid：将DetailFragment放入detailFragmentContainer中</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onWeatherSelected</span><span class=\"params\">(Weather weather)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (findViewById(R.id.detailFragmentContainer) == <span class=\"literal\">null</span>) &#123;   <span class=\"comment\">//Phone</span></span><br><span class=\"line\">           <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> PagerActivity.newIntent(<span class=\"built_in\">this</span>,weather.getId());</span><br><span class=\"line\">           startActivity(intent);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>                                                        <span class=\"comment\">//Paid</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">Fragment</span> <span class=\"variable\">newDetail</span> <span class=\"operator\">=</span> DetailFragment.newInstance(weather.getId());</span><br><span class=\"line\">            getSupportFragmentManager().beginTransaction().replace(R.id.detailFragmentContainer,newDetail).commit();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    **&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在<code>MainFragment</code>中调用</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onClick</span><span class=\"params\">(View v)</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//跳转到细节视图</span></span><br><span class=\"line\"><span class=\"comment\">//            Intent intent = PagerActivity.newIntent(getActivity(), mWeather.getId());</span></span><br><span class=\"line\"><span class=\"comment\">//            startActivity(intent);</span></span><br><span class=\"line\">            <span class=\"comment\">//使用回调方法</span></span><br><span class=\"line\">            mCallbacks.onWeatherSelected(mWeather);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3、MainFragment\"><a href=\"#3、MainFragment\" class=\"headerlink\" title=\"3、MainFragment\"></a>3、MainFragment</h2><h3 id=\"功能-1\"><a href=\"#功能-1\" class=\"headerlink\" title=\"功能\"></a>功能</h3><ul>\n<li>实例化单例</li>\n<li>实例化数据库</li>\n<li>实例化<code>RecyclerView</code></li>\n<li>监听用户点击，并跳转到<code>DetialActivity</code></li>\n<li>从网上获取数据，并显示在组件中</li>\n<li>监听<code>Menu</code>的点击事件</li>\n</ul>\n<h3 id=\"知识点-1\"><a href=\"#知识点-1\" class=\"headerlink\" title=\"知识点\"></a>知识点</h3><ul>\n<li><code>RecyclerView</code>实例化及其逻辑实现</li>\n<li><code>Menu</code>实例化，并实现监听</li>\n<li>启动后台线程<code>AsyncTask</code>，实现数据获取</li>\n<li><code>Fragment</code>跳转到Activity并传递数据</li>\n<li><code>notification</code>实现消息推送</li>\n<li><code>SQLlite</code>实现数据持久化</li>\n</ul>\n<h3 id=\"要点\"><a href=\"#要点\" class=\"headerlink\" title=\"要点\"></a>要点</h3><p><strong>1、从<code>Fragment</code>跳转到<code>Activity</code>并传递数据</strong></p>\n<p><strong><code>MainFragment</code></strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//调用Fragment.startActivity(Itent)</span></span><br><span class=\"line\"><span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> DetailActivity.newIntent(getActivity(), mWeather.getId());</span><br><span class=\"line\">startActivity(intent);</span><br></pre></td></tr></table></figure>\n\n<p><strong><code>DetailActivity</code></strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">EXTRA_WEATHER_ID</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;com/example/weatherbroadcast.weather_id&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//启动DetailActivity并传递参数</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Intent <span class=\"title function_\">newIntent</span><span class=\"params\">(Context packageContext, UUID weathereId)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(packageContext, DetailActivity.class);</span><br><span class=\"line\">    intent.putExtra(EXTRA_WEATHER_ID, weathereId);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> intent;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、DetailActivity\"><a href=\"#4、DetailActivity\" class=\"headerlink\" title=\"4、DetailActivity\"></a>4、DetailActivity</h2><h3 id=\"功能-2\"><a href=\"#功能-2\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li>托管DetailFragment</li>\n<li>传递数据WeatherID</li>\n</ul>\n<h3 id=\"知识点：FragmentAugment实现\"><a href=\"#知识点：FragmentAugment实现\" class=\"headerlink\" title=\"知识点：FragmentAugment实现\"></a>知识点：<code>FragmentAugment</code>实现</h3><p><code>**DetailActivity</code>获取数据并传递给其托管的Fragment的两种方法**</p>\n<ul>\n<li><strong>直接获取数据，直接传递——由Activity获取数据</strong></li>\n</ul>\n<p><code>UUID</code>是<code>Serializable</code>对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">    setContentView(R.layout.activity_detail);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取intent传入的信息</span></span><br><span class=\"line\">    weatherId = (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);</span><br><span class=\"line\">\t\t<span class=\"comment\">//绑定Fragment</span></span><br><span class=\"line\">    <span class=\"type\">FragmentManager</span> <span class=\"variable\">fm</span> <span class=\"operator\">=</span> getSupportFragmentManager();</span><br><span class=\"line\">    <span class=\"type\">Fragment</span> <span class=\"variable\">fragment</span> <span class=\"operator\">=</span> fm.findFragmentById(R.id.fragment_container3);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fragment == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        fragment = createFragment();</span><br><span class=\"line\">        fm.beginTransaction()</span><br><span class=\"line\">                .add(R.id.fragment_container3, fragment)</span><br><span class=\"line\">                .commit();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    <span class=\"comment\">//创建Fragment</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Fragment <span class=\"title function_\">createFragment</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//直接传递数据</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> DetailFragment.newInstance(weatherId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>缺点：</strong></p>\n<p>破坏了**<code>CrimeFragment</code><strong>的封装，</strong><code>CrimeFragment</code>**不再是可以复用的单元。</p>\n<ul>\n<li><strong>使用<code>fragmentargument</code>——由Fragment获取数据</strong></li>\n</ul>\n<p><strong>augment：参数</strong></p>\n<p>将<code>weatherID</code>存储到<code>Fragment</code>的某个地方而不是<code>Activity</code>中。</p>\n<p>每个<code>Fragment</code>实例都有一个**<code>Bundle</code><strong>对象，</strong><code>Bundle</code>**对象包含键值对，可以将参数添加到<code>**Bundle**</code>对象中</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//附加augmentbundle给Fragment</span></span><br><span class=\"line\">Fragment.setArguments(Bundle)</span><br><span class=\"line\"><span class=\"comment\">//Bundle添加argument</span></span><br><span class=\"line\">Bundle.putSerializable(Key,Value)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5、PagerActivity\"><a href=\"#5、PagerActivity\" class=\"headerlink\" title=\"5、PagerActivity\"></a>5、PagerActivity</h2><h3 id=\"功能-3\"><a href=\"#功能-3\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li>实现左右滑动屏幕</li>\n</ul>\n<h3 id=\"知识点：ViewPager实现\"><a href=\"#知识点：ViewPager实现\" class=\"headerlink\" title=\"知识点：ViewPager实现\"></a>知识点：<code>ViewPager</code>实现</h3><p><strong>步骤：</strong></p>\n<ul>\n<li>创建<code>PagerActivity</code>类，以<code>VeiwPager</code>为根视图</li>\n<li>定义包含<code>ViewPager</code>的视图层级结构</li>\n<li>在<code>PagerActivity</code>类中关联使用<code>ViewPager</code>及其<code>Adapter</code></li>\n</ul>\n<h3 id=\"Bug\"><a href=\"#Bug\" class=\"headerlink\" title=\"Bug\"></a>Bug</h3><p>只能显示6天的Pager</p>\n<p>Bug修复：我把数据库课WetherLab封装在一起了</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PagerActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">EXTRA_WEATHER_ID</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;com/example/weatherbroadcast/DetailActivity.java.weather_id&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ViewPager mViewPager;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Weather&gt; mWeathers;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//启动PagerActivity并传递参数</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Intent <span class=\"title function_\">newIntent</span><span class=\"params\">(Context packageContext, UUID weathereId)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(packageContext, PagerActivity.class);</span><br><span class=\"line\">        intent.putExtra(EXTRA_WEATHER_ID, weathereId);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> intent;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_pager);</span><br><span class=\"line\"></span><br><span class=\"line\">        mViewPager = (ViewPager) findViewById(R.id.view_pager);</span><br><span class=\"line\">        mWeathers = WeatherLab.get(<span class=\"built_in\">this</span>).getWeathers();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//获取intent传入的信息</span></span><br><span class=\"line\">        <span class=\"type\">UUID</span> <span class=\"variable\">weatherId</span> <span class=\"operator\">=</span> (UUID) getIntent().getSerializableExtra(EXTRA_WEATHER_ID);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//设置点击之后显示的界面</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; mWeathers.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mWeathers.get(i).getId().equals(weatherId)) &#123;</span><br><span class=\"line\">                mViewPager.setCurrentItem(i);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//创建Adapter</span></span><br><span class=\"line\">            <span class=\"type\">FragmentManager</span> <span class=\"variable\">fragmentManager</span> <span class=\"operator\">=</span> getSupportFragmentManager();</span><br><span class=\"line\">            mViewPager.setAdapter(<span class=\"keyword\">new</span> <span class=\"title class_\">FragmentStatePagerAdapter</span>(fragmentManager) &#123;</span><br><span class=\"line\">                <span class=\"meta\">@NonNull</span></span><br><span class=\"line\">                <span class=\"meta\">@Override</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span> Fragment <span class=\"title function_\">getItem</span><span class=\"params\">(<span class=\"type\">int</span> position)</span> &#123;</span><br><span class=\"line\">                    <span class=\"type\">Weather</span> <span class=\"variable\">weather</span> <span class=\"operator\">=</span> mWeathers.get(position);</span><br><span class=\"line\">                    <span class=\"comment\">//实例化DetailFragment</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> DetailFragment.newInstance(weather.getId());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"meta\">@Override</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getCount</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">                    Log.e(<span class=\"string\">&quot;mWeathers.size : &quot;</span>, String.valueOf(mWeathers.size()));</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> mWeathers.size();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6、SQLlite-WeatherLab单例封装\"><a href=\"#6、SQLlite-WeatherLab单例封装\" class=\"headerlink\" title=\"6、SQLlite+WeatherLab单例封装\"></a>6、SQLlite+WeatherLab单例封装</h2><h3 id=\"功能-4\"><a href=\"#功能-4\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><strong>实现数据持久化</strong></li>\n</ul>\n<h3 id=\"知识点-2\"><a href=\"#知识点-2\" class=\"headerlink\" title=\"知识点\"></a>知识点</h3><ul>\n<li><strong>单例如何实例化？</strong></li>\n</ul>\n<p><strong>在类中声明为静态变量并且实例化。</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeatherLab</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> WeatherLab sWeatherLab;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> SQLiteDatabase mDatabase;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Context mContext;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//单例的意思：在类里已经实例化了</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> WeatherLab <span class=\"title function_\">get</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sWeatherLab == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            sWeatherLab = <span class=\"keyword\">new</span> <span class=\"title class_\">WeatherLab</span>(context);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sWeatherLab;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>这里将数据库也实现单例</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Context <span class=\"title function_\">getContext</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sWeatherLab.mContext;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">WeatherLab</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        mContext = context.getApplicationContext();</span><br><span class=\"line\">        <span class=\"comment\">//打开数据库，如果不存在就先调用DataBaseHelper.onCreate()创建</span></span><br><span class=\"line\">        mDatabase = <span class=\"keyword\">new</span> <span class=\"title class_\">DatabaseHelper</span>(mContext).getWritableDatabase();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>实现数据库<code>Schema</code>类：定义描述数据表元素的String常量</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DbSchema</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeatherTable</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">NAME</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;WeatherTab&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Cols</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">UUID</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;uuid&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">TITLE</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;title&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">DATE</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;date&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">SOLVED</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;solved&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>DataBaseHelper类</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DatabaseHelper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">SQLiteOpenHelper</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">VERSION</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DBNAME=<span class=\"string\">&quot;User.db&quot;</span>;   <span class=\"comment\">//  创建数据库名叫 Users</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">DatabaseHelper</span><span class=\"params\">(Context context)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(context,DBNAME,<span class=\"literal\">null</span>,VERSION);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(SQLiteDatabase db)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//db.execSQL(&quot;create table WeatherTable (_id INTEGER PRIMARY KEY AUTOINCREMENT,date text,max_temp text,min_temp text,weather text,humidity text,pressure text,wind text,icon text)&quot;);</span></span><br><span class=\"line\">        db.execSQL(<span class=\"string\">&quot;create table &quot;</span>+ NAME+<span class=\"string\">&quot;(&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;_id INTEGER PRIMARY KEY AUTOINCREMENT,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.UUID+<span class=\"string\">&quot; text, &quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.DATE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.MAX_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.MIN_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.WEATHER+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.HUMIDITY+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.PRESSURE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.WIND+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DbSchema.Cols.ICON+<span class=\"string\">&quot; text&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;)&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onUpgrade</span><span class=\"params\">(SQLiteDatabase db, <span class=\"type\">int</span> oldVersion, <span class=\"type\">int</span> newVersion)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//TODO</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong>修改WeatherLab：改用数据库存储数据</strong></p>\n<ul>\n<li><strong>实现<code>CursorWrapper</code>子类帮助查询数据库</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建Cursor子类用于查询</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WeatherCursorWrapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">CursorWrapper</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"title function_\">WeatherCursorWrapper</span><span class=\"params\">(Cursor cursor)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">super</span>(cursor);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> Weather <span class=\"title function_\">getWeather</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">UUID</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.UUID));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">DATE</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.DATE));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">MAX_TEMP</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MAX_TEMP));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">MIN_TEMP</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.MIN_TEMP));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">WEATHER</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WEATHER));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">HUMIDITY</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.HUMIDITY));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">PRESSURE</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.PRESSURE));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">WIND</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.WIND));</span><br><span class=\"line\">            <span class=\"type\">String</span> <span class=\"variable\">ICON</span> <span class=\"operator\">=</span> getString(getColumnIndex(DatabaseHelper.DbSchema.Cols.ICON));</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">Weather</span> <span class=\"variable\">weather</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Weather</span>();</span><br><span class=\"line\">            weather.setId(java.util.UUID.fromString(UUID));</span><br><span class=\"line\">            weather.setDate(DATE);</span><br><span class=\"line\">            weather.setMaxTemperature(MAX_TEMP);</span><br><span class=\"line\">            weather.setMinTemperature(MIN_TEMP);</span><br><span class=\"line\">            weather.setWeather(WEATHER);</span><br><span class=\"line\">            weather.setHumidity(HUMIDITY);</span><br><span class=\"line\">            weather.setPressure(PRESSURE);</span><br><span class=\"line\">            weather.setWind(WIND);</span><br><span class=\"line\">            weather.setIconUrl(ICON);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">return</span> weather;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//实例化WeatherCursorWrapper </span></span><br><span class=\"line\"><span class=\"type\">WeatherCursorWrapper</span> <span class=\"variable\">cursor</span> <span class=\"operator\">=</span> queryWeathers(<span class=\"literal\">null</span>, <span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>**ContentValues</code>:键值储存类，只能处理SQLite数据**</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ContentValues:键值储存类，只能处理SQLite数据</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ContentValues <span class=\"title function_\">getContentValues</span><span class=\"params\">(Weather weather)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ContentValues</span> <span class=\"variable\">values</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ContentValues</span>();</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.UUID, weather.getId().toString());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.DATE, weather.getDate());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.MAX_TEMP, weather.getMaxTemperature());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.MIN_TEMP, weather.getMinTemperature());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.WEATHER, weather.getWeather());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.HUMIDITY, weather.getHumidity());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.PRESSURE, weather.getPressure());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.WIND, weather.getWind());</span><br><span class=\"line\">        values.put(DatabaseHelper.DbSchema.Cols.ICON, weather.getIconUrl());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> values;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除数据库之后记得立马要<code>create</code>一个，不然<code>quary</code>报错</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//判断数据库是否为空</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isEmpty</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">WeatherCursorWrapper</span> <span class=\"variable\">cursor</span> <span class=\"operator\">=</span> queryWeathers(<span class=\"literal\">null</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cursor.getCount()==<span class=\"number\">0</span>||cursor==<span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"comment\">//如果数据库不为空</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!sWeatherLab.isEmpty())&#123;</span><br><span class=\"line\">            mDatabase.execSQL(<span class=\"string\">&quot;drop table &quot;</span>+DatabaseHelper.DbSchema.NAME);</span><br><span class=\"line\">            mDatabase.execSQL(<span class=\"string\">&quot;create table &quot;</span>+ NAME+<span class=\"string\">&quot;(&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;_id INTEGER PRIMARY KEY AUTOINCREMENT,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.UUID+<span class=\"string\">&quot; text, &quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.DATE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.MAX_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.MIN_TEMP+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.WEATHER+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.HUMIDITY+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.PRESSURE+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.WIND+<span class=\"string\">&quot; text,&quot;</span>+</span><br><span class=\"line\">                    DatabaseHelper.DbSchema.Cols.ICON+<span class=\"string\">&quot; text&quot;</span>+</span><br><span class=\"line\">                    <span class=\"string\">&quot;)&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"报错-table-WeatherTab-has-no-column-named-min-temp\"><a href=\"#报错-table-WeatherTab-has-no-column-named-min-temp\" class=\"headerlink\" title=\"报错 table WeatherTab has no column named min_temp\"></a>报错 <strong>table WeatherTab has no column named min_temp</strong></h3><p><img src=\"/images/WeatherBroadcast/image-20230528112458417.png\" alt=\"image-20230528112458417\"></p>\n<p><strong>table WeatherTab has no column named min_temp in “INSERT INTO WeatherTab(min_temp,pressure,date,icon,uuid,wind,max_temp,humidity,weather) VALUES (?,?,?,?,?,?,?,?,?)”</strong></p>\n<p><strong>原因：数据表创建语句中字段前没有空格</strong></p>\n<p><a href=\"https://blog.csdn.net/u013040819/article/details/81489137\">table xxx has no column named id (code 1)？表中插入数据找不到字段？_奋斗的IT小民工的博客-CSDN博客</a></p>\n<h2 id=\"7、Share功能\"><a href=\"#7、Share功能\" class=\"headerlink\" title=\"7、Share功能\"></a>7、Share功能</h2><h3 id=\"功能-5\"><a href=\"#功能-5\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><strong>点击Menu分享键分享天气</strong></li>\n</ul>\n<h3 id=\"知识点-3\"><a href=\"#知识点-3\" class=\"headerlink\" title=\"知识点\"></a><strong>知识点</strong></h3><ul>\n<li><strong>隐式Intent的组成</strong><ul>\n<li>要执行的操作</li>\n<li>待访问数据的位置</li>\n<li>操作涉及的数据类型</li>\n<li>可选类别</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"代码-1\"><a href=\"#代码-1\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">case</span> R.id.share:</span><br><span class=\"line\">                <span class=\"comment\">//Intent.ACTION_SEND:要执行的操作</span></span><br><span class=\"line\">                <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(Intent.ACTION_SEND);</span><br><span class=\"line\">                <span class=\"comment\">//操作涉及的数据类型</span></span><br><span class=\"line\">                i.setType(<span class=\"string\">&quot;text/plain&quot;</span>);</span><br><span class=\"line\">                <span class=\"comment\">//待访问数据的位置</span></span><br><span class=\"line\">                i.putExtra(Intent.EXTRA_TEXT,createMessage());</span><br><span class=\"line\">                startActivity(i);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8、Notification——IntentService的子类\"><a href=\"#8、Notification——IntentService的子类\" class=\"headerlink\" title=\"8、Notification——IntentService的子类\"></a>8、Notification——<strong>IntentService的子类</strong></h2><h3 id=\"功能-6\"><a href=\"#功能-6\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li>定期发送通知给用户，显示在状态栏中</li>\n<li>保证用户在使用应用时不出现新结果通知</li>\n</ul>\n<h3 id=\"知识点-4\"><a href=\"#知识点-4\" class=\"headerlink\" title=\"知识点\"></a><strong>知识点</strong></h3><ul>\n<li><p><strong>后台服务：IntentService</strong></p>\n</li>\n<li><p><strong>SharedPreferences：保存数据（location、unit）</strong></p>\n</li>\n<li><p><strong>AlarmManager延迟运行</strong></p>\n</li>\n<li><p><strong>通知消息：Notification</strong></p>\n</li>\n<li><p><strong>Broadcast Intent</strong></p>\n<p><img src=\"/images/WeatherBroadcast/image-20230528112524704.png\" alt=\"image-20230528112524704\"></p>\n</li>\n</ul>\n<h3 id=\"后台服务：IntentService\"><a href=\"#后台服务：IntentService\" class=\"headerlink\" title=\"后台服务：IntentService\"></a><strong>后台服务：IntentService</strong></h3><ul>\n<li>创建**<code>IntentService</code>**类继承<code>IntentService</code></li>\n<li><code>manifest</code>中配置<code>&lt;service android:name=&quot;.Notification&quot;&gt;&lt;/service&gt;</code></li>\n</ul>\n<p>注意构造函数不能带参数</p>\n<ul>\n<li>在<code>MainFragment</code>的<code>onCreate()</code>中添加服务启动代码</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//启动Notification服务</span></span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> Notification.newIntent(getActivity());</span><br><span class=\"line\">        getActivity().startService(i);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/WeatherBroadcast/image-20230528112547986.png\" alt=\"image-20230528112547986\"></p>\n<ul>\n<li><p><strong>IntentService</strong>在没有<code>activity</code>运行的情况下为<strong>在后台运行的服务</strong>，需要想个办法启动它。</p>\n<p>使用**<code>AlarmManager</code>：可以发送intent的系统服务**</p>\n<p>使用<code>PendingIntent</code>打包一个<code>intent</code>:”我想启动Notification服务”</p>\n<p>在<code>PendingIntent</code>中实现一个启停定时器的<code>setServiceAlarm()</code></p>\n<ul>\n<li><strong>添加定时方法</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//设置时间间隔是1分钟</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">NOTI_INTERVAL_MS</span> <span class=\"operator\">=</span> TimeUnit.MINUTES.toMillis(<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setServiceAlarm</span><span class=\"params\">(Context context,<span class=\"type\">boolean</span> isOn)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> Notification.newIntent(context);</span><br><span class=\"line\">        <span class=\"comment\">//创建一个用来启动Notification服务的PendingIntent</span></span><br><span class=\"line\">        <span class=\"type\">PendingIntent</span> <span class=\"variable\">pendingIntent</span> <span class=\"operator\">=</span> PendingIntent.getService(context,<span class=\"number\">0</span>,i,FLAG_MUTABLE);</span><br><span class=\"line\">        <span class=\"comment\">//设置定时器</span></span><br><span class=\"line\">        <span class=\"type\">AlarmManager</span> <span class=\"variable\">alarmManager</span> <span class=\"operator\">=</span> (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isOn)&#123;</span><br><span class=\"line\">            alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(),NOTI_INTERVAL_MS,pendingIntent);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            alarmManager.cancel(pendingIntent);</span><br><span class=\"line\">            pendingIntent.cancel();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>使用<code>PendingIntent</code>管理定时器</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isServiceAlarmOn</span><span class=\"params\">(Context context)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> NotificationService.newIntent(context);</span><br><span class=\"line\">        <span class=\"type\">PendingIntent</span> <span class=\"variable\">pendingIntent</span> <span class=\"operator\">=</span> PendingIntent.getService(context,<span class=\"number\">0</span>,intent,PendingIntent.FLAG_NO_CREATE);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pendingIntent!=<span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在<code>MainFragment</code>中设置定时开&#x2F;闭</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResume</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">super</span>.onResume();</span><br><span class=\"line\">  <span class=\"type\">SharedPreferences</span> <span class=\"variable\">pref</span> <span class=\"operator\">=</span> getActivity().getSharedPreferences(<span class=\"string\">&quot;set&quot;</span>, MODE_PRIVATE);</span><br><span class=\"line\">  <span class=\"type\">String</span> <span class=\"variable\">send</span> <span class=\"operator\">=</span> pref.getString(<span class=\"string\">&quot;send&quot;</span>,<span class=\"string\">&quot;是&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (send==<span class=\"string\">&quot;是&quot;</span>)&#123;</span><br><span class=\"line\">      <span class=\"comment\">//开启后台服务，启动定时器，发送通知消息</span></span><br><span class=\"line\">      NotificationService.setServiceAlarm(getActivity(),<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">      NotificationService.setServiceAlarm(getActivity(),<span class=\"literal\">false</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"Notification\"><a href=\"#Notification\" class=\"headerlink\" title=\"Notification\"></a>Notification</h3><ul>\n<li>创建<code>Notification</code>对象</li>\n</ul>\n<p>完整的<code>notification</code>包括：</p>\n<ul>\n<li>首次显示通知消息时，在状态栏上显示ticker text、图标</li>\n<li>在Lollipop之后状态栏上不显示ticker text、图标</li>\n<li>是通知抽屉的一个视图</li>\n<li>待触发的<code>PendingIntent</code>，用户点击抽屉中的通知消息触发</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onHandleIntent</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Intent intent)</span> &#123;</span><br><span class=\"line\">        Log.e(TAG,<span class=\"string\">&quot;接收一个intent：&quot;</span>+intent);</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    设置通知消息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">        <span class=\"type\">Resources</span> <span class=\"variable\">resources</span> <span class=\"operator\">=</span> getResources();</span><br><span class=\"line\">        <span class=\"type\">Intent</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> MainActivity.newIntent(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//不可变的PendingIntent</span></span><br><span class=\"line\">        <span class=\"type\">PendingIntent</span> <span class=\"variable\">pendingIntent</span> <span class=\"operator\">=</span> PendingIntent.getActivity(<span class=\"built_in\">this</span>,<span class=\"number\">0</span>,i,FLAG_IMMUTABLE);</span><br><span class=\"line\">        <span class=\"type\">Notification</span> <span class=\"variable\">notification</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        NotificationCompat.<span class=\"type\">Builder</span> <span class=\"variable\">builder</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NotificationCompat</span>.Builder(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">                .setTicker(resources.getString(R.string.new_weather_title))</span><br><span class=\"line\">                .setSmallIcon(android.R.drawable.ic_menu_report_image)</span><br><span class=\"line\">                .setContentTitle(resources.getString(R.string.new_weather_title))</span><br><span class=\"line\">                .setContentText(resources.getString(R.string.new_weather_text))</span><br><span class=\"line\">                .setContentIntent(pendingIntent)</span><br><span class=\"line\">                .setAutoCancel(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"type\">NotificationManager</span> <span class=\"variable\">notificationManager</span> <span class=\"operator\">=</span>(NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//一定要设置channel</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class=\"line\">            <span class=\"type\">NotificationChannel</span> <span class=\"variable\">channel</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NotificationChannel</span>(<span class=\"string\">&quot;to-do&quot;</span></span><br><span class=\"line\">                    , <span class=\"string\">&quot;待办消息&quot;</span>,</span><br><span class=\"line\">                    NotificationManager.IMPORTANCE_HIGH);</span><br><span class=\"line\">            channel.enableVibration(<span class=\"literal\">true</span>);</span><br><span class=\"line\">            channel.setVibrationPattern(<span class=\"keyword\">new</span> <span class=\"title class_\">long</span>[]&#123;<span class=\"number\">500</span>&#125;);</span><br><span class=\"line\">            notificationManager.createNotificationChannel(channel);</span><br><span class=\"line\">            builder.setChannelId(<span class=\"string\">&quot;to-do&quot;</span>);</span><br><span class=\"line\">            notification = builder.build();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            notification = builder.build();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        notificationManager.notify(<span class=\"number\">0</span>,notification);</span><br><span class=\"line\">        System.out.println(notification);</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.jianshu.com/p/4c51c071aa94\">浅谈通知频道NotificationChannel</a></p>\n<p>从Android8.0开始，应用显示通知时，必须为通知指定一个<code>Channel</code>。</p>\n<p><code>NotificationChannel</code>构造方法需要三个参数，</p>\n<ul>\n<li><code>ChannelId</code>是自定义的字符串</li>\n<li>第二个参数是频道的名称</li>\n<li>第三个是优先级。</li>\n</ul>\n<p>创建完<code>NotificationChannel</code>之后，还需要使用<code>createNotificationChannels</code>方法注册到系统中。</p>\n<h3 id=\"Broadcast-Intent（待实现）\"><a href=\"#Broadcast-Intent（待实现）\" class=\"headerlink\" title=\"Broadcast Intent（待实现）\"></a><strong>Broadcast Intent（待实现）</strong></h3><h2 id=\"9、Map功能\"><a href=\"#9、Map功能\" class=\"headerlink\" title=\"9、Map功能\"></a>9、Map功能</h2><h3 id=\"功能-7\"><a href=\"#功能-7\" class=\"headerlink\" title=\"功能\"></a><strong>功能</strong></h3><ul>\n<li><strong>点击MapLocation启动手机中的Map</strong></li>\n</ul>\n<h3 id=\"知识点-5\"><a href=\"#知识点-5\" class=\"headerlink\" title=\"知识点\"></a><strong>知识点</strong></h3><ul>\n<li><strong>隐式Intent的组成</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">Intent</span> <span class=\"variable\">intent</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(Intent.ACTION_VIEW);</span><br><span class=\"line\"><span class=\"type\">Uri</span> <span class=\"variable\">geoLocation</span> <span class=\"operator\">=</span> Uri.parse(<span class=\"string\">&quot;geo:28.156198193290255,112.93207570910455?z=11&quot;</span>);</span><br><span class=\"line\">intent.setData(geoLocation);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (intent.resolveActivity(getContext().getPackageManager()) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    startActivity(intent);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Bug-1\"><a href=\"#Bug-1\" class=\"headerlink\" title=\"Bug\"></a>Bug</h3><p>MapApp无法显示定位</p>\n"},{"title":"简单的NFC读写器APP","date":"2023-05-28T06:15:21.000Z","swiper_index":20000,"top_group_index":20000,"cover":"2023/05/28/myNFC/mycover.jpg","ai":true,"typora-root-url":"./..","_content":"\n\n\n# 简单的NFC读写器\n\nCreated: February 5, 2023 11:30 PM\n\n## 视频演示\n\n<video  controls=\"\" preload=\"\" height=\"400px\" > \n    <source  src=\"/images/myNFC/video.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n## 一、功能描述\n\n为了便于中南大学的老师们体测成绩登记更加快捷方便，基于13.56MHz通信技术和手机的NFC功能，使用老师派发的RFID卡片和NFC标签，构建了一个RFID应用系统，实现对Ndef和MifareClassic两种卡片数据的读写。\n\n\n\n## 二、设计简要描述\n\n### 1、UI界面设计\n\n<img src=\"/images/myNFC/image-20230528141821319.png\" alt=\"image-20230528141821319\" style=\"zoom: 67%;\" />\n\n### 2、程序设计\n\n<img src=\"/images/myNFC/image-20230528141851384.png\" alt=\"image-20230528141851384\" style=\"zoom: 50%;\" />\n\n首先判断是否支持NFC，再判断NFC是否打开，若没有打开则跳转到手机的设置界面。如果打开此时可以看到按钮状态，只有ReadBtn是可点击的，点击ReadBtn，弹出ReadDialog寻找标签，当标签靠近时关闭ReadDialog，判断标签数据类型，读取标签数据同时更改主界面文本框中的值。此时WriteBtn变为可点击，点击WriteBtn，根据ReadBtn判断的标签数据类型弹出相应的InputDialog，最后弹出ReadDialog寻找标签并将数据写入，最后将更改完毕之后的数据呈现到主界面的文本框中。\n\n## 三、学习笔记\n\n### 1、标签可以分为两大类：\n\n1、`NDEF TAG`：常见的NFC\n\n2、`非NDEF TAG`：RFID 卡片\n\n### 2、**Android支持的数据格式**\n\n![Untitled](/images/myNFC/Untitled-1685255140308-1.png)\n\n- **实验中的mifare卡片的数据格式为MifareClassic**\n- **实验中的NFC标签的数据格式为Ndef**\n\n### 3、byte转string\n\n### 4、NdefMessage 、NdefRecord（适用于NDEF TAG）\n\n`NdefMessage`：主要是描述NDEF格式的信息\n\n`NdefRecord`：这个是NDEF信息的一个信息段\n\n`NdefMessage`中包含许多`NdefRecord`\n\n## 四、程序清单\n\n### 1、判断是否支持NFC\n\n```java\n/*\n判断NFC功能是否可用\n*/\nprivate void NfcCheck(){\n    //初始化mNfcAdapter\n    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);\n    if(mNfcAdapter==null){//不支持NFC\n        Toast.makeText(this,\"不支持NFC\",Toast.LENGTH_SHORT).show();\n    }else{//判断NFC是否打开\n        if(!mNfcAdapter.isEnabled()){    //如果没有打开，则跳转到设置界面\n            Intent setNfc = new Intent(Settings.ACTION_NFC_SETTINGS);\n            startActivity(setNfc);\n        }else{\n            Toast.makeText(this,\"NFC已打开\",Toast.LENGTH_SHORT).show();\n        }\n\n    }\n}\n```\n\n### 2、点击read按钮\n\n```java\n//点击read按钮：读取卡片中的信息，并显示到infoText中\n        mReadBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                //弹出ReadDialog\n                mReadDialog = new ReadDialog();\n                mReadDialog.showNow(getSupportFragmentManager(),\"ReadDialog\");\n                mReadDialog.getDialog().setCancelable(false);\n                isRead=true;\n            }});\n```\n\n### 3、当标签靠近触发activity的`onNewIntent()`\n\n```java\n@Override\n    protected void onNewIntent(Intent intent) {\n        super.onNewIntent(intent);\n        mTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n        //判断类型\n        String Type = NfcUtil.supportedTechs(mTag.getTechList());\n        //正在读\n        if(isRead){\n            mInfoText.setText(\"数据类型为：\"+Type+\"\\n\");\n            if(Type.equals(\"Ndef\")){  NdefRead();   }\n            if(Type.equals(\"MifareClassic\")){   MifareRead();   }\n            //设置Write按钮可点击\n            mWriteBtn.setEnabled(true);\n        }\n\n        //正在写\n        if (isWrite){\n            if(Type.equals(\"Ndef\")){     NdefWrite();  }\n            if(Type.equals(\"MifareClassic\")){   MifareWrite();   }\n            mWriteBtn.setEnabled(false);\n        }\n    }\n```\n\n- **Ndef数据读**\n\n```java\nprivate void NdefRead(){\n        isNdef = true;\n        Ndef ndef = Ndef.get(mTag);\n        try {\n            ndef.connect();\n            NdefMessage ndefMessage = ndef.getNdefMessage();\n            if (ndefMessage.getRecords().length == 3) {\n                String messageId = new String(ndefMessage.getRecords()[0].getPayload(),\"UTF-8\");\n                String messageOwner = new String(ndefMessage.getRecords()[1].getPayload(),\"UTF-8\");\n                String messageOwnerPhone = new String(ndefMessage.getRecords()[2].getPayload(),\"UTF-8\");\n                mInfoText.append(\"姓名：\"+messageId+\"\\n\");\n                mInfoText.append(\"学号：\"+messageOwner+\"\\n\");\n                mInfoText.append(\"总成绩\"+messageOwnerPhone+\"\\n\");\n            }\n            ndef.close();\n        } catch (FormatException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        isRead=false;\n        mReadDialog.dismiss();  //关闭弹窗\n    }\n```\n\n- **MifareClassic数据读**\n\n```java\nprivate void MifareRead(){\n        isMifareClassic = true;\n        String[] info = NfcUtil.read(mTag); //读取Nfc\n        for(int i=1;i<11;i++){\n            setInfoText(i,info[i]);\n        }\n        isRead=false;\n        mReadDialog.dismiss();  //关闭弹窗\n    }\n```\n\n- **Ndef数据写**\n\n```java\nprivate void NdefWrite(){\n        isNdef = true;\n        Ndef ndef = Ndef.get(mTag);\n        if (ndef != null) {\n            try {\n                ndef.connect();\n                NdefRecord mimeRecord1 = NdefRecord.createMime(\"CSU\", mName.getBytes(Charset.forName(\"UTF-8\")));\n                NdefRecord mimeRecord2 = NdefRecord.createMime(\"CSU\", mId.getBytes(Charset.forName(\"UTF-8\")));\n                NdefRecord mimeRecord3 = NdefRecord.createMime(\"CSU\", mGrade.getBytes(Charset.forName(\"UTF-8\")));\n                mInfoText.setText(\"姓名：\"+mName+\"\\n\");\n                mInfoText.append(\"学号：\"+mId+\"\\n\");\n                mInfoText.append(\"总成绩\"+mGrade+\"\\n\");\n                ndef.writeNdefMessage(new NdefMessage(mimeRecord1,mimeRecord2,mimeRecord3));\n                ndef.close();\n            } catch ( Exception e) {\n                e.printStackTrace();\n            }\n        }\n        isWrite=false;\n        isNdef=false;\n        mReadDialog.dismiss();  //关闭弹窗\n    }\n```\n\n- **MifareClassic数据写**\n\n```java\nprivate void MifareWrite(){\n        isMifareClassic = true;\n        if(isWrite){    //正在写\n            NfcUtil.write(mTag,mStudent);\n            setInfoText(mStudent);\n            isWrite=false;\n            isMifareClassic=false;\n            mReadDialog.dismiss();  //关闭弹窗\n        }\n    }\n```\n\n# 五、参考资料\n\n### ndef、NdefMessage和NedfRecord\n\n[Ndef - Android中文版 - API参考文档 (apiref.com)](https://www.apiref.com/android-zh/android/nfc/tech/Ndef.html)\n\n[NdefRecord - Android中文版 - API参考文档 (apiref.com)](https://www.apiref.com/android-zh/android/nfc/NdefRecord.html)\n\n[NdefMessage - Android中文版 - API参考文档 (apiref.com)](https://www.apiref.com/android-zh/android/nfc/NdefMessage.html#NdefMessage(byte[]))\n\n### 视频课程\n\n[NFC 标签调度系统_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1R7411C7kS?p=15&vd_source=592e40e3e456cbca5e66df60b04bf2d3)\n\n### 实战项目\n\n[(26条消息) Android NFC技术（三）——初次开发Android NFC你须知道NdefMessage和NdefRecord](https://blog.csdn.net/qq_26787115/article/details/50831582)\n\n[(31条消息) android nfc中MifareClassic格式的读写_Coding-lover的博客-CSDN博客](https://blog.csdn.net/coslay/article/details/25075595)\n\n### 安卓版本的NFC小工具\n\nNFC标签助手\n\n<img src=\"/images/myNFC/88162883639770466-1685255179109-3.jpg\" alt=\"88162883639770466\" style=\"zoom: 33%;\" />\n\n### 硬件知识\n\n[ID卡、IC卡、RFID卡、NFC卡、Mifare卡各种概念的关系 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/344426747)\n","source":"_posts/myNFC.md","raw":"---\ntitle: 简单的NFC读写器APP\ndate: 2023-05-28 14:15:21\ntags: Android APP\nswiper_index: 20000\ntop_group_index: 20000\ncover: mycover.jpg\nai: true\ntypora-root-url: ./..\n---\n\n\n\n# 简单的NFC读写器\n\nCreated: February 5, 2023 11:30 PM\n\n## 视频演示\n\n<video  controls=\"\" preload=\"\" height=\"400px\" > \n    <source  src=\"/images/myNFC/video.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n## 一、功能描述\n\n为了便于中南大学的老师们体测成绩登记更加快捷方便，基于13.56MHz通信技术和手机的NFC功能，使用老师派发的RFID卡片和NFC标签，构建了一个RFID应用系统，实现对Ndef和MifareClassic两种卡片数据的读写。\n\n\n\n## 二、设计简要描述\n\n### 1、UI界面设计\n\n<img src=\"/images/myNFC/image-20230528141821319.png\" alt=\"image-20230528141821319\" style=\"zoom: 67%;\" />\n\n### 2、程序设计\n\n<img src=\"/images/myNFC/image-20230528141851384.png\" alt=\"image-20230528141851384\" style=\"zoom: 50%;\" />\n\n首先判断是否支持NFC，再判断NFC是否打开，若没有打开则跳转到手机的设置界面。如果打开此时可以看到按钮状态，只有ReadBtn是可点击的，点击ReadBtn，弹出ReadDialog寻找标签，当标签靠近时关闭ReadDialog，判断标签数据类型，读取标签数据同时更改主界面文本框中的值。此时WriteBtn变为可点击，点击WriteBtn，根据ReadBtn判断的标签数据类型弹出相应的InputDialog，最后弹出ReadDialog寻找标签并将数据写入，最后将更改完毕之后的数据呈现到主界面的文本框中。\n\n## 三、学习笔记\n\n### 1、标签可以分为两大类：\n\n1、`NDEF TAG`：常见的NFC\n\n2、`非NDEF TAG`：RFID 卡片\n\n### 2、**Android支持的数据格式**\n\n![Untitled](/images/myNFC/Untitled-1685255140308-1.png)\n\n- **实验中的mifare卡片的数据格式为MifareClassic**\n- **实验中的NFC标签的数据格式为Ndef**\n\n### 3、byte转string\n\n### 4、NdefMessage 、NdefRecord（适用于NDEF TAG）\n\n`NdefMessage`：主要是描述NDEF格式的信息\n\n`NdefRecord`：这个是NDEF信息的一个信息段\n\n`NdefMessage`中包含许多`NdefRecord`\n\n## 四、程序清单\n\n### 1、判断是否支持NFC\n\n```java\n/*\n判断NFC功能是否可用\n*/\nprivate void NfcCheck(){\n    //初始化mNfcAdapter\n    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);\n    if(mNfcAdapter==null){//不支持NFC\n        Toast.makeText(this,\"不支持NFC\",Toast.LENGTH_SHORT).show();\n    }else{//判断NFC是否打开\n        if(!mNfcAdapter.isEnabled()){    //如果没有打开，则跳转到设置界面\n            Intent setNfc = new Intent(Settings.ACTION_NFC_SETTINGS);\n            startActivity(setNfc);\n        }else{\n            Toast.makeText(this,\"NFC已打开\",Toast.LENGTH_SHORT).show();\n        }\n\n    }\n}\n```\n\n### 2、点击read按钮\n\n```java\n//点击read按钮：读取卡片中的信息，并显示到infoText中\n        mReadBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                //弹出ReadDialog\n                mReadDialog = new ReadDialog();\n                mReadDialog.showNow(getSupportFragmentManager(),\"ReadDialog\");\n                mReadDialog.getDialog().setCancelable(false);\n                isRead=true;\n            }});\n```\n\n### 3、当标签靠近触发activity的`onNewIntent()`\n\n```java\n@Override\n    protected void onNewIntent(Intent intent) {\n        super.onNewIntent(intent);\n        mTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n        //判断类型\n        String Type = NfcUtil.supportedTechs(mTag.getTechList());\n        //正在读\n        if(isRead){\n            mInfoText.setText(\"数据类型为：\"+Type+\"\\n\");\n            if(Type.equals(\"Ndef\")){  NdefRead();   }\n            if(Type.equals(\"MifareClassic\")){   MifareRead();   }\n            //设置Write按钮可点击\n            mWriteBtn.setEnabled(true);\n        }\n\n        //正在写\n        if (isWrite){\n            if(Type.equals(\"Ndef\")){     NdefWrite();  }\n            if(Type.equals(\"MifareClassic\")){   MifareWrite();   }\n            mWriteBtn.setEnabled(false);\n        }\n    }\n```\n\n- **Ndef数据读**\n\n```java\nprivate void NdefRead(){\n        isNdef = true;\n        Ndef ndef = Ndef.get(mTag);\n        try {\n            ndef.connect();\n            NdefMessage ndefMessage = ndef.getNdefMessage();\n            if (ndefMessage.getRecords().length == 3) {\n                String messageId = new String(ndefMessage.getRecords()[0].getPayload(),\"UTF-8\");\n                String messageOwner = new String(ndefMessage.getRecords()[1].getPayload(),\"UTF-8\");\n                String messageOwnerPhone = new String(ndefMessage.getRecords()[2].getPayload(),\"UTF-8\");\n                mInfoText.append(\"姓名：\"+messageId+\"\\n\");\n                mInfoText.append(\"学号：\"+messageOwner+\"\\n\");\n                mInfoText.append(\"总成绩\"+messageOwnerPhone+\"\\n\");\n            }\n            ndef.close();\n        } catch (FormatException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        isRead=false;\n        mReadDialog.dismiss();  //关闭弹窗\n    }\n```\n\n- **MifareClassic数据读**\n\n```java\nprivate void MifareRead(){\n        isMifareClassic = true;\n        String[] info = NfcUtil.read(mTag); //读取Nfc\n        for(int i=1;i<11;i++){\n            setInfoText(i,info[i]);\n        }\n        isRead=false;\n        mReadDialog.dismiss();  //关闭弹窗\n    }\n```\n\n- **Ndef数据写**\n\n```java\nprivate void NdefWrite(){\n        isNdef = true;\n        Ndef ndef = Ndef.get(mTag);\n        if (ndef != null) {\n            try {\n                ndef.connect();\n                NdefRecord mimeRecord1 = NdefRecord.createMime(\"CSU\", mName.getBytes(Charset.forName(\"UTF-8\")));\n                NdefRecord mimeRecord2 = NdefRecord.createMime(\"CSU\", mId.getBytes(Charset.forName(\"UTF-8\")));\n                NdefRecord mimeRecord3 = NdefRecord.createMime(\"CSU\", mGrade.getBytes(Charset.forName(\"UTF-8\")));\n                mInfoText.setText(\"姓名：\"+mName+\"\\n\");\n                mInfoText.append(\"学号：\"+mId+\"\\n\");\n                mInfoText.append(\"总成绩\"+mGrade+\"\\n\");\n                ndef.writeNdefMessage(new NdefMessage(mimeRecord1,mimeRecord2,mimeRecord3));\n                ndef.close();\n            } catch ( Exception e) {\n                e.printStackTrace();\n            }\n        }\n        isWrite=false;\n        isNdef=false;\n        mReadDialog.dismiss();  //关闭弹窗\n    }\n```\n\n- **MifareClassic数据写**\n\n```java\nprivate void MifareWrite(){\n        isMifareClassic = true;\n        if(isWrite){    //正在写\n            NfcUtil.write(mTag,mStudent);\n            setInfoText(mStudent);\n            isWrite=false;\n            isMifareClassic=false;\n            mReadDialog.dismiss();  //关闭弹窗\n        }\n    }\n```\n\n# 五、参考资料\n\n### ndef、NdefMessage和NedfRecord\n\n[Ndef - Android中文版 - API参考文档 (apiref.com)](https://www.apiref.com/android-zh/android/nfc/tech/Ndef.html)\n\n[NdefRecord - Android中文版 - API参考文档 (apiref.com)](https://www.apiref.com/android-zh/android/nfc/NdefRecord.html)\n\n[NdefMessage - Android中文版 - API参考文档 (apiref.com)](https://www.apiref.com/android-zh/android/nfc/NdefMessage.html#NdefMessage(byte[]))\n\n### 视频课程\n\n[NFC 标签调度系统_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1R7411C7kS?p=15&vd_source=592e40e3e456cbca5e66df60b04bf2d3)\n\n### 实战项目\n\n[(26条消息) Android NFC技术（三）——初次开发Android NFC你须知道NdefMessage和NdefRecord](https://blog.csdn.net/qq_26787115/article/details/50831582)\n\n[(31条消息) android nfc中MifareClassic格式的读写_Coding-lover的博客-CSDN博客](https://blog.csdn.net/coslay/article/details/25075595)\n\n### 安卓版本的NFC小工具\n\nNFC标签助手\n\n<img src=\"/images/myNFC/88162883639770466-1685255179109-3.jpg\" alt=\"88162883639770466\" style=\"zoom: 33%;\" />\n\n### 硬件知识\n\n[ID卡、IC卡、RFID卡、NFC卡、Mifare卡各种概念的关系 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/344426747)\n","slug":"myNFC","published":1,"updated":"2023-06-07T09:39:23.407Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47q000lf4ss0rk3aadb","content":"<h1 id=\"简单的NFC读写器\"><a href=\"#简单的NFC读写器\" class=\"headerlink\" title=\"简单的NFC读写器\"></a>简单的NFC读写器</h1><p>Created: February 5, 2023 11:30 PM</p>\n<h2 id=\"视频演示\"><a href=\"#视频演示\" class=\"headerlink\" title=\"视频演示\"></a>视频演示</h2><video controls preload height=\"400px\"> \n    <source src=\"/images/myNFC/video.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n<h2 id=\"一、功能描述\"><a href=\"#一、功能描述\" class=\"headerlink\" title=\"一、功能描述\"></a>一、功能描述</h2><p>为了便于中南大学的老师们体测成绩登记更加快捷方便，基于13.56MHz通信技术和手机的NFC功能，使用老师派发的RFID卡片和NFC标签，构建了一个RFID应用系统，实现对Ndef和MifareClassic两种卡片数据的读写。</p>\n<h2 id=\"二、设计简要描述\"><a href=\"#二、设计简要描述\" class=\"headerlink\" title=\"二、设计简要描述\"></a>二、设计简要描述</h2><h3 id=\"1、UI界面设计\"><a href=\"#1、UI界面设计\" class=\"headerlink\" title=\"1、UI界面设计\"></a>1、UI界面设计</h3><img src=\"/images/myNFC/image-20230528141821319.png\" alt=\"image-20230528141821319\" style=\"zoom: 67%;\">\n\n<h3 id=\"2、程序设计\"><a href=\"#2、程序设计\" class=\"headerlink\" title=\"2、程序设计\"></a>2、程序设计</h3><img src=\"/images/myNFC/image-20230528141851384.png\" alt=\"image-20230528141851384\" style=\"zoom: 50%;\">\n\n<p>首先判断是否支持NFC，再判断NFC是否打开，若没有打开则跳转到手机的设置界面。如果打开此时可以看到按钮状态，只有ReadBtn是可点击的，点击ReadBtn，弹出ReadDialog寻找标签，当标签靠近时关闭ReadDialog，判断标签数据类型，读取标签数据同时更改主界面文本框中的值。此时WriteBtn变为可点击，点击WriteBtn，根据ReadBtn判断的标签数据类型弹出相应的InputDialog，最后弹出ReadDialog寻找标签并将数据写入，最后将更改完毕之后的数据呈现到主界面的文本框中。</p>\n<h2 id=\"三、学习笔记\"><a href=\"#三、学习笔记\" class=\"headerlink\" title=\"三、学习笔记\"></a>三、学习笔记</h2><h3 id=\"1、标签可以分为两大类：\"><a href=\"#1、标签可以分为两大类：\" class=\"headerlink\" title=\"1、标签可以分为两大类：\"></a>1、标签可以分为两大类：</h3><p>1、<code>NDEF TAG</code>：常见的NFC</p>\n<p>2、<code>非NDEF TAG</code>：RFID 卡片</p>\n<h3 id=\"2、Android支持的数据格式\"><a href=\"#2、Android支持的数据格式\" class=\"headerlink\" title=\"2、Android支持的数据格式\"></a>2、<strong>Android支持的数据格式</strong></h3><p><img src=\"/images/myNFC/Untitled-1685255140308-1.png\" alt=\"Untitled\"></p>\n<ul>\n<li><strong>实验中的mifare卡片的数据格式为MifareClassic</strong></li>\n<li><strong>实验中的NFC标签的数据格式为Ndef</strong></li>\n</ul>\n<h3 id=\"3、byte转string\"><a href=\"#3、byte转string\" class=\"headerlink\" title=\"3、byte转string\"></a>3、byte转string</h3><h3 id=\"4、NdefMessage-、NdefRecord（适用于NDEF-TAG）\"><a href=\"#4、NdefMessage-、NdefRecord（适用于NDEF-TAG）\" class=\"headerlink\" title=\"4、NdefMessage 、NdefRecord（适用于NDEF TAG）\"></a>4、NdefMessage 、NdefRecord（适用于NDEF TAG）</h3><p><code>NdefMessage</code>：主要是描述NDEF格式的信息</p>\n<p><code>NdefRecord</code>：这个是NDEF信息的一个信息段</p>\n<p><code>NdefMessage</code>中包含许多<code>NdefRecord</code></p>\n<h2 id=\"四、程序清单\"><a href=\"#四、程序清单\" class=\"headerlink\" title=\"四、程序清单\"></a>四、程序清单</h2><h3 id=\"1、判断是否支持NFC\"><a href=\"#1、判断是否支持NFC\" class=\"headerlink\" title=\"1、判断是否支持NFC\"></a>1、判断是否支持NFC</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">判断NFC功能是否可用</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">NfcCheck</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//初始化mNfcAdapter</span></span><br><span class=\"line\">    mNfcAdapter = NfcAdapter.getDefaultAdapter(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(mNfcAdapter==<span class=\"literal\">null</span>)&#123;<span class=\"comment\">//不支持NFC</span></span><br><span class=\"line\">        Toast.makeText(<span class=\"built_in\">this</span>,<span class=\"string\">&quot;不支持NFC&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;<span class=\"comment\">//判断NFC是否打开</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!mNfcAdapter.isEnabled())&#123;    <span class=\"comment\">//如果没有打开，则跳转到设置界面</span></span><br><span class=\"line\">            <span class=\"type\">Intent</span> <span class=\"variable\">setNfc</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(Settings.ACTION_NFC_SETTINGS);</span><br><span class=\"line\">            startActivity(setNfc);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            Toast.makeText(<span class=\"built_in\">this</span>,<span class=\"string\">&quot;NFC已打开&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、点击read按钮\"><a href=\"#2、点击read按钮\" class=\"headerlink\" title=\"2、点击read按钮\"></a>2、点击read按钮</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//点击read按钮：读取卡片中的信息，并显示到infoText中</span></span><br><span class=\"line\">        mReadBtn.setOnClickListener(<span class=\"keyword\">new</span> <span class=\"title class_\">View</span>.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onClick</span><span class=\"params\">(View v)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//弹出ReadDialog</span></span><br><span class=\"line\">                mReadDialog = <span class=\"keyword\">new</span> <span class=\"title class_\">ReadDialog</span>();</span><br><span class=\"line\">                mReadDialog.showNow(getSupportFragmentManager(),<span class=\"string\">&quot;ReadDialog&quot;</span>);</span><br><span class=\"line\">                mReadDialog.getDialog().setCancelable(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                isRead=<span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、当标签靠近触发activity的onNewIntent\"><a href=\"#3、当标签靠近触发activity的onNewIntent\" class=\"headerlink\" title=\"3、当标签靠近触发activity的onNewIntent()\"></a>3、当标签靠近触发activity的<code>onNewIntent()</code></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onNewIntent</span><span class=\"params\">(Intent intent)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onNewIntent(intent);</span><br><span class=\"line\">        mTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);</span><br><span class=\"line\">        <span class=\"comment\">//判断类型</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">Type</span> <span class=\"operator\">=</span> NfcUtil.supportedTechs(mTag.getTechList());</span><br><span class=\"line\">        <span class=\"comment\">//正在读</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isRead)&#123;</span><br><span class=\"line\">            mInfoText.setText(<span class=\"string\">&quot;数据类型为：&quot;</span>+Type+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;Ndef&quot;</span>))&#123;  NdefRead();   &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;MifareClassic&quot;</span>))&#123;   MifareRead();   &#125;</span><br><span class=\"line\">            <span class=\"comment\">//设置Write按钮可点击</span></span><br><span class=\"line\">            mWriteBtn.setEnabled(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//正在写</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isWrite)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;Ndef&quot;</span>))&#123;     NdefWrite();  &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;MifareClassic&quot;</span>))&#123;   MifareWrite();   &#125;</span><br><span class=\"line\">            mWriteBtn.setEnabled(<span class=\"literal\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Ndef数据读</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">NdefRead</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isNdef = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"type\">Ndef</span> <span class=\"variable\">ndef</span> <span class=\"operator\">=</span> Ndef.get(mTag);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            ndef.connect();</span><br><span class=\"line\">            <span class=\"type\">NdefMessage</span> <span class=\"variable\">ndefMessage</span> <span class=\"operator\">=</span> ndef.getNdefMessage();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (ndefMessage.getRecords().length == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">                <span class=\"type\">String</span> <span class=\"variable\">messageId</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(ndefMessage.getRecords()[<span class=\"number\">0</span>].getPayload(),<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                <span class=\"type\">String</span> <span class=\"variable\">messageOwner</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(ndefMessage.getRecords()[<span class=\"number\">1</span>].getPayload(),<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                <span class=\"type\">String</span> <span class=\"variable\">messageOwnerPhone</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(ndefMessage.getRecords()[<span class=\"number\">2</span>].getPayload(),<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;姓名：&quot;</span>+messageId+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;学号：&quot;</span>+messageOwner+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;总成绩&quot;</span>+messageOwnerPhone+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ndef.close();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (FormatException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        isRead=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>MifareClassic数据读</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">MifareRead</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isMifareClassic = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        String[] info = NfcUtil.read(mTag); <span class=\"comment\">//读取Nfc</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;<span class=\"number\">11</span>;i++)&#123;</span><br><span class=\"line\">            setInfoText(i,info[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        isRead=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Ndef数据写</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">NdefWrite</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isNdef = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"type\">Ndef</span> <span class=\"variable\">ndef</span> <span class=\"operator\">=</span> Ndef.get(mTag);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ndef != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                ndef.connect();</span><br><span class=\"line\">                <span class=\"type\">NdefRecord</span> <span class=\"variable\">mimeRecord1</span> <span class=\"operator\">=</span> NdefRecord.createMime(<span class=\"string\">&quot;CSU&quot;</span>, mName.getBytes(Charset.forName(<span class=\"string\">&quot;UTF-8&quot;</span>)));</span><br><span class=\"line\">                <span class=\"type\">NdefRecord</span> <span class=\"variable\">mimeRecord2</span> <span class=\"operator\">=</span> NdefRecord.createMime(<span class=\"string\">&quot;CSU&quot;</span>, mId.getBytes(Charset.forName(<span class=\"string\">&quot;UTF-8&quot;</span>)));</span><br><span class=\"line\">                <span class=\"type\">NdefRecord</span> <span class=\"variable\">mimeRecord3</span> <span class=\"operator\">=</span> NdefRecord.createMime(<span class=\"string\">&quot;CSU&quot;</span>, mGrade.getBytes(Charset.forName(<span class=\"string\">&quot;UTF-8&quot;</span>)));</span><br><span class=\"line\">                mInfoText.setText(<span class=\"string\">&quot;姓名：&quot;</span>+mName+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;学号：&quot;</span>+mId+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;总成绩&quot;</span>+mGrade+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                ndef.writeNdefMessage(<span class=\"keyword\">new</span> <span class=\"title class_\">NdefMessage</span>(mimeRecord1,mimeRecord2,mimeRecord3));</span><br><span class=\"line\">                ndef.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> ( Exception e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        isWrite=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        isNdef=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>MifareClassic数据写</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">MifareWrite</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isMifareClassic = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isWrite)&#123;    <span class=\"comment\">//正在写</span></span><br><span class=\"line\">            NfcUtil.write(mTag,mStudent);</span><br><span class=\"line\">            setInfoText(mStudent);</span><br><span class=\"line\">            isWrite=<span class=\"literal\">false</span>;</span><br><span class=\"line\">            isMifareClassic=<span class=\"literal\">false</span>;</span><br><span class=\"line\">            mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"五、参考资料\"><a href=\"#五、参考资料\" class=\"headerlink\" title=\"五、参考资料\"></a>五、参考资料</h1><h3 id=\"ndef、NdefMessage和NedfRecord\"><a href=\"#ndef、NdefMessage和NedfRecord\" class=\"headerlink\" title=\"ndef、NdefMessage和NedfRecord\"></a>ndef、NdefMessage和NedfRecord</h3><p><a href=\"https://www.apiref.com/android-zh/android/nfc/tech/Ndef.html\">Ndef - Android中文版 - API参考文档 (apiref.com)</a></p>\n<p><a href=\"https://www.apiref.com/android-zh/android/nfc/NdefRecord.html\">NdefRecord - Android中文版 - API参考文档 (apiref.com)</a></p>\n<p><a href=\"https://www.apiref.com/android-zh/android/nfc/NdefMessage.html#NdefMessage(byte[])\">NdefMessage - Android中文版 - API参考文档 (apiref.com)</a></p>\n<h3 id=\"视频课程\"><a href=\"#视频课程\" class=\"headerlink\" title=\"视频课程\"></a>视频课程</h3><p><a href=\"https://www.bilibili.com/video/BV1R7411C7kS?p=15&vd_source=592e40e3e456cbca5e66df60b04bf2d3\">NFC 标签调度系统_哔哩哔哩_bilibili</a></p>\n<h3 id=\"实战项目\"><a href=\"#实战项目\" class=\"headerlink\" title=\"实战项目\"></a>实战项目</h3><p><a href=\"https://blog.csdn.net/qq_26787115/article/details/50831582\">(26条消息) Android NFC技术（三）——初次开发Android NFC你须知道NdefMessage和NdefRecord</a></p>\n<p><a href=\"https://blog.csdn.net/coslay/article/details/25075595\">(31条消息) android nfc中MifareClassic格式的读写_Coding-lover的博客-CSDN博客</a></p>\n<h3 id=\"安卓版本的NFC小工具\"><a href=\"#安卓版本的NFC小工具\" class=\"headerlink\" title=\"安卓版本的NFC小工具\"></a>安卓版本的NFC小工具</h3><p>NFC标签助手</p>\n<img src=\"/images/myNFC/88162883639770466-1685255179109-3.jpg\" alt=\"88162883639770466\" style=\"zoom: 33%;\">\n\n<h3 id=\"硬件知识\"><a href=\"#硬件知识\" class=\"headerlink\" title=\"硬件知识\"></a>硬件知识</h3><p><a href=\"https://zhuanlan.zhihu.com/p/344426747\">ID卡、IC卡、RFID卡、NFC卡、Mifare卡各种概念的关系 - 知乎 (zhihu.com)</a></p>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"简单的NFC读写器\"><a href=\"#简单的NFC读写器\" class=\"headerlink\" title=\"简单的NFC读写器\"></a>简单的NFC读写器</h1><p>Created: February 5, 2023 11:30 PM</p>\n<h2 id=\"视频演示\"><a href=\"#视频演示\" class=\"headerlink\" title=\"视频演示\"></a>视频演示</h2><video controls preload height=\"400px\"> \n    <source src=\"/images/myNFC/video.mp4\" type=\"video/mp4\"> \n</video>\n\n\n\n<h2 id=\"一、功能描述\"><a href=\"#一、功能描述\" class=\"headerlink\" title=\"一、功能描述\"></a>一、功能描述</h2><p>为了便于中南大学的老师们体测成绩登记更加快捷方便，基于13.56MHz通信技术和手机的NFC功能，使用老师派发的RFID卡片和NFC标签，构建了一个RFID应用系统，实现对Ndef和MifareClassic两种卡片数据的读写。</p>\n<h2 id=\"二、设计简要描述\"><a href=\"#二、设计简要描述\" class=\"headerlink\" title=\"二、设计简要描述\"></a>二、设计简要描述</h2><h3 id=\"1、UI界面设计\"><a href=\"#1、UI界面设计\" class=\"headerlink\" title=\"1、UI界面设计\"></a>1、UI界面设计</h3><img src=\"/images/myNFC/image-20230528141821319.png\" alt=\"image-20230528141821319\" style=\"zoom: 67%;\">\n\n<h3 id=\"2、程序设计\"><a href=\"#2、程序设计\" class=\"headerlink\" title=\"2、程序设计\"></a>2、程序设计</h3><img src=\"/images/myNFC/image-20230528141851384.png\" alt=\"image-20230528141851384\" style=\"zoom: 50%;\">\n\n<p>首先判断是否支持NFC，再判断NFC是否打开，若没有打开则跳转到手机的设置界面。如果打开此时可以看到按钮状态，只有ReadBtn是可点击的，点击ReadBtn，弹出ReadDialog寻找标签，当标签靠近时关闭ReadDialog，判断标签数据类型，读取标签数据同时更改主界面文本框中的值。此时WriteBtn变为可点击，点击WriteBtn，根据ReadBtn判断的标签数据类型弹出相应的InputDialog，最后弹出ReadDialog寻找标签并将数据写入，最后将更改完毕之后的数据呈现到主界面的文本框中。</p>\n<h2 id=\"三、学习笔记\"><a href=\"#三、学习笔记\" class=\"headerlink\" title=\"三、学习笔记\"></a>三、学习笔记</h2><h3 id=\"1、标签可以分为两大类：\"><a href=\"#1、标签可以分为两大类：\" class=\"headerlink\" title=\"1、标签可以分为两大类：\"></a>1、标签可以分为两大类：</h3><p>1、<code>NDEF TAG</code>：常见的NFC</p>\n<p>2、<code>非NDEF TAG</code>：RFID 卡片</p>\n<h3 id=\"2、Android支持的数据格式\"><a href=\"#2、Android支持的数据格式\" class=\"headerlink\" title=\"2、Android支持的数据格式\"></a>2、<strong>Android支持的数据格式</strong></h3><p><img src=\"/images/myNFC/Untitled-1685255140308-1.png\" alt=\"Untitled\"></p>\n<ul>\n<li><strong>实验中的mifare卡片的数据格式为MifareClassic</strong></li>\n<li><strong>实验中的NFC标签的数据格式为Ndef</strong></li>\n</ul>\n<h3 id=\"3、byte转string\"><a href=\"#3、byte转string\" class=\"headerlink\" title=\"3、byte转string\"></a>3、byte转string</h3><h3 id=\"4、NdefMessage-、NdefRecord（适用于NDEF-TAG）\"><a href=\"#4、NdefMessage-、NdefRecord（适用于NDEF-TAG）\" class=\"headerlink\" title=\"4、NdefMessage 、NdefRecord（适用于NDEF TAG）\"></a>4、NdefMessage 、NdefRecord（适用于NDEF TAG）</h3><p><code>NdefMessage</code>：主要是描述NDEF格式的信息</p>\n<p><code>NdefRecord</code>：这个是NDEF信息的一个信息段</p>\n<p><code>NdefMessage</code>中包含许多<code>NdefRecord</code></p>\n<h2 id=\"四、程序清单\"><a href=\"#四、程序清单\" class=\"headerlink\" title=\"四、程序清单\"></a>四、程序清单</h2><h3 id=\"1、判断是否支持NFC\"><a href=\"#1、判断是否支持NFC\" class=\"headerlink\" title=\"1、判断是否支持NFC\"></a>1、判断是否支持NFC</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">判断NFC功能是否可用</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">NfcCheck</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//初始化mNfcAdapter</span></span><br><span class=\"line\">    mNfcAdapter = NfcAdapter.getDefaultAdapter(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(mNfcAdapter==<span class=\"literal\">null</span>)&#123;<span class=\"comment\">//不支持NFC</span></span><br><span class=\"line\">        Toast.makeText(<span class=\"built_in\">this</span>,<span class=\"string\">&quot;不支持NFC&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;<span class=\"comment\">//判断NFC是否打开</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!mNfcAdapter.isEnabled())&#123;    <span class=\"comment\">//如果没有打开，则跳转到设置界面</span></span><br><span class=\"line\">            <span class=\"type\">Intent</span> <span class=\"variable\">setNfc</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Intent</span>(Settings.ACTION_NFC_SETTINGS);</span><br><span class=\"line\">            startActivity(setNfc);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            Toast.makeText(<span class=\"built_in\">this</span>,<span class=\"string\">&quot;NFC已打开&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、点击read按钮\"><a href=\"#2、点击read按钮\" class=\"headerlink\" title=\"2、点击read按钮\"></a>2、点击read按钮</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//点击read按钮：读取卡片中的信息，并显示到infoText中</span></span><br><span class=\"line\">        mReadBtn.setOnClickListener(<span class=\"keyword\">new</span> <span class=\"title class_\">View</span>.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onClick</span><span class=\"params\">(View v)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//弹出ReadDialog</span></span><br><span class=\"line\">                mReadDialog = <span class=\"keyword\">new</span> <span class=\"title class_\">ReadDialog</span>();</span><br><span class=\"line\">                mReadDialog.showNow(getSupportFragmentManager(),<span class=\"string\">&quot;ReadDialog&quot;</span>);</span><br><span class=\"line\">                mReadDialog.getDialog().setCancelable(<span class=\"literal\">false</span>);</span><br><span class=\"line\">                isRead=<span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、当标签靠近触发activity的onNewIntent\"><a href=\"#3、当标签靠近触发activity的onNewIntent\" class=\"headerlink\" title=\"3、当标签靠近触发activity的onNewIntent()\"></a>3、当标签靠近触发activity的<code>onNewIntent()</code></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onNewIntent</span><span class=\"params\">(Intent intent)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onNewIntent(intent);</span><br><span class=\"line\">        mTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);</span><br><span class=\"line\">        <span class=\"comment\">//判断类型</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">Type</span> <span class=\"operator\">=</span> NfcUtil.supportedTechs(mTag.getTechList());</span><br><span class=\"line\">        <span class=\"comment\">//正在读</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isRead)&#123;</span><br><span class=\"line\">            mInfoText.setText(<span class=\"string\">&quot;数据类型为：&quot;</span>+Type+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;Ndef&quot;</span>))&#123;  NdefRead();   &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;MifareClassic&quot;</span>))&#123;   MifareRead();   &#125;</span><br><span class=\"line\">            <span class=\"comment\">//设置Write按钮可点击</span></span><br><span class=\"line\">            mWriteBtn.setEnabled(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//正在写</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isWrite)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;Ndef&quot;</span>))&#123;     NdefWrite();  &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(Type.equals(<span class=\"string\">&quot;MifareClassic&quot;</span>))&#123;   MifareWrite();   &#125;</span><br><span class=\"line\">            mWriteBtn.setEnabled(<span class=\"literal\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Ndef数据读</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">NdefRead</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isNdef = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"type\">Ndef</span> <span class=\"variable\">ndef</span> <span class=\"operator\">=</span> Ndef.get(mTag);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            ndef.connect();</span><br><span class=\"line\">            <span class=\"type\">NdefMessage</span> <span class=\"variable\">ndefMessage</span> <span class=\"operator\">=</span> ndef.getNdefMessage();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (ndefMessage.getRecords().length == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">                <span class=\"type\">String</span> <span class=\"variable\">messageId</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(ndefMessage.getRecords()[<span class=\"number\">0</span>].getPayload(),<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                <span class=\"type\">String</span> <span class=\"variable\">messageOwner</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(ndefMessage.getRecords()[<span class=\"number\">1</span>].getPayload(),<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                <span class=\"type\">String</span> <span class=\"variable\">messageOwnerPhone</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(ndefMessage.getRecords()[<span class=\"number\">2</span>].getPayload(),<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;姓名：&quot;</span>+messageId+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;学号：&quot;</span>+messageOwner+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;总成绩&quot;</span>+messageOwnerPhone+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ndef.close();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (FormatException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        isRead=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>MifareClassic数据读</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">MifareRead</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isMifareClassic = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        String[] info = NfcUtil.read(mTag); <span class=\"comment\">//读取Nfc</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;<span class=\"number\">11</span>;i++)&#123;</span><br><span class=\"line\">            setInfoText(i,info[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        isRead=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Ndef数据写</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">NdefWrite</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isNdef = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"type\">Ndef</span> <span class=\"variable\">ndef</span> <span class=\"operator\">=</span> Ndef.get(mTag);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ndef != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                ndef.connect();</span><br><span class=\"line\">                <span class=\"type\">NdefRecord</span> <span class=\"variable\">mimeRecord1</span> <span class=\"operator\">=</span> NdefRecord.createMime(<span class=\"string\">&quot;CSU&quot;</span>, mName.getBytes(Charset.forName(<span class=\"string\">&quot;UTF-8&quot;</span>)));</span><br><span class=\"line\">                <span class=\"type\">NdefRecord</span> <span class=\"variable\">mimeRecord2</span> <span class=\"operator\">=</span> NdefRecord.createMime(<span class=\"string\">&quot;CSU&quot;</span>, mId.getBytes(Charset.forName(<span class=\"string\">&quot;UTF-8&quot;</span>)));</span><br><span class=\"line\">                <span class=\"type\">NdefRecord</span> <span class=\"variable\">mimeRecord3</span> <span class=\"operator\">=</span> NdefRecord.createMime(<span class=\"string\">&quot;CSU&quot;</span>, mGrade.getBytes(Charset.forName(<span class=\"string\">&quot;UTF-8&quot;</span>)));</span><br><span class=\"line\">                mInfoText.setText(<span class=\"string\">&quot;姓名：&quot;</span>+mName+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;学号：&quot;</span>+mId+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                mInfoText.append(<span class=\"string\">&quot;总成绩&quot;</span>+mGrade+<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">                ndef.writeNdefMessage(<span class=\"keyword\">new</span> <span class=\"title class_\">NdefMessage</span>(mimeRecord1,mimeRecord2,mimeRecord3));</span><br><span class=\"line\">                ndef.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> ( Exception e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        isWrite=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        isNdef=<span class=\"literal\">false</span>;</span><br><span class=\"line\">        mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>MifareClassic数据写</strong></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">MifareWrite</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        isMifareClassic = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isWrite)&#123;    <span class=\"comment\">//正在写</span></span><br><span class=\"line\">            NfcUtil.write(mTag,mStudent);</span><br><span class=\"line\">            setInfoText(mStudent);</span><br><span class=\"line\">            isWrite=<span class=\"literal\">false</span>;</span><br><span class=\"line\">            isMifareClassic=<span class=\"literal\">false</span>;</span><br><span class=\"line\">            mReadDialog.dismiss();  <span class=\"comment\">//关闭弹窗</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"五、参考资料\"><a href=\"#五、参考资料\" class=\"headerlink\" title=\"五、参考资料\"></a>五、参考资料</h1><h3 id=\"ndef、NdefMessage和NedfRecord\"><a href=\"#ndef、NdefMessage和NedfRecord\" class=\"headerlink\" title=\"ndef、NdefMessage和NedfRecord\"></a>ndef、NdefMessage和NedfRecord</h3><p><a href=\"https://www.apiref.com/android-zh/android/nfc/tech/Ndef.html\">Ndef - Android中文版 - API参考文档 (apiref.com)</a></p>\n<p><a href=\"https://www.apiref.com/android-zh/android/nfc/NdefRecord.html\">NdefRecord - Android中文版 - API参考文档 (apiref.com)</a></p>\n<p><a href=\"https://www.apiref.com/android-zh/android/nfc/NdefMessage.html#NdefMessage(byte[])\">NdefMessage - Android中文版 - API参考文档 (apiref.com)</a></p>\n<h3 id=\"视频课程\"><a href=\"#视频课程\" class=\"headerlink\" title=\"视频课程\"></a>视频课程</h3><p><a href=\"https://www.bilibili.com/video/BV1R7411C7kS?p=15&vd_source=592e40e3e456cbca5e66df60b04bf2d3\">NFC 标签调度系统_哔哩哔哩_bilibili</a></p>\n<h3 id=\"实战项目\"><a href=\"#实战项目\" class=\"headerlink\" title=\"实战项目\"></a>实战项目</h3><p><a href=\"https://blog.csdn.net/qq_26787115/article/details/50831582\">(26条消息) Android NFC技术（三）——初次开发Android NFC你须知道NdefMessage和NdefRecord</a></p>\n<p><a href=\"https://blog.csdn.net/coslay/article/details/25075595\">(31条消息) android nfc中MifareClassic格式的读写_Coding-lover的博客-CSDN博客</a></p>\n<h3 id=\"安卓版本的NFC小工具\"><a href=\"#安卓版本的NFC小工具\" class=\"headerlink\" title=\"安卓版本的NFC小工具\"></a>安卓版本的NFC小工具</h3><p>NFC标签助手</p>\n<img src=\"/images/myNFC/88162883639770466-1685255179109-3.jpg\" alt=\"88162883639770466\" style=\"zoom: 33%;\">\n\n<h3 id=\"硬件知识\"><a href=\"#硬件知识\" class=\"headerlink\" title=\"硬件知识\"></a>硬件知识</h3><p><a href=\"https://zhuanlan.zhihu.com/p/344426747\">ID卡、IC卡、RFID卡、NFC卡、Mifare卡各种概念的关系 - 知乎 (zhihu.com)</a></p>\n"},{"title":"搭建Bolg全过程记录","date":"2023-05-26T11:12:56.000Z","swiper_index":1,"top_group_index":2,"cover":"2023/05/26/hexoConfigNote/mycover.png","ai":true,"typora-root-url":"./..","_content":"# 搭建Bolg全过程记录\n\n## 1、Hexo+GithubPage+阿里云域名配置\n\n### 搭建过程这个博主说的比较清楚：\n\n[使用 Hexo+GitHub 搭建个人免费博客教程（小白向） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/60578464)\n\n### Hexo+GithubPage搭建原理：\n\n在本地撰写 Markdown 格式文章后，通过 Hexo 解析文档，渲染生成具有主题样式的 HTML 静态网页，再推送到 GitHub 上完成博文的发布。\n\n<img src=\"/images/hexoConfigNote/image-20230526214207511.png\" alt=\"image-20230526214207511\" style=\"zoom:80%;\" />\n\n### 访问网址\n\ndeploy到Github上之后就可以通过<https://用户名.github.io>来访问你的博客了\n\n也可以通过**域名**来访问，在阿里云上购买一个即可。\n\n### Hexo 博客文件夹目录结构如下：\n\n![img](/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp)\n\n### _config.yml文件的[配置 | Hexo](https://hexo.io/zh-cn/docs/configuration.html)\n\n- 注意：仅仅注释掉某些配置并不会引起页面改变，除非改变配置的值！！\n\n<img src=\"/images/hexoConfigNote/image-20230526214721316.png\" alt=\"image-20230526214721316\" style=\"zoom:50%;\" />\n\n注释掉之后照样显示：\n\n![image-20230526214734538](/images/hexoConfigNote/image-20230526214734538.png)\n\n除非删除对应的值：\n\n<img src=\"/images/hexoConfigNote/image-20230526214745972.png\" alt=\"image-20230526214745972\" style=\"zoom: 50%;\" />\n\n此时显示：\n\n![image-20230526214802166](/images/hexoConfigNote/image-20230526214802166.png)\n\n\n\n\n\n## 2、Hexo常用命令\n\n### 搭建相关\n\n- 初始化\n\n```shell\nhexo init [folder]\t #新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。\n```\n\n- 在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行下面命令。\n\n```shell\nhexo clean \t\t    #清除缓存文件 (db.json) 和已生成的静态文件 (public)。\n```\n\n简写成下面这样不会删除public文件夹\n\n```shell\nhexo c\t\n```\n\n简写成下面这样会删除public文件夹\n\n```shell\nhexo cl\n```\n\n- 生成网站静态文件到默认设置的  `public ` 文件夹。\n\n```shell\nhexo generate\t\t#Hexo 引入了差分机制，如果 public 目录存在，那么 hexo g 只会重新生成改动的文件\nhexo generate -f\t#强制重新生成文件,使用该参数的效果接近 hexo clean && hexo generate\n```\n\n- 部署网站到 `github` 上\n\n```shell\nhexo deploy\t\t\t#可以在 _config.yml 文件中配置 deploy 的相关参数\n```\n\n- 启动本地服务器，用于预览主题。预览的同时可以修改文章内容或主题代码，保存后刷新页面即可；但是对 Hexo 根目录 _config.yml 的修改，需要重启本地服务器后才能预览效果。\n\n  如果你还没有部署到github上，还想在本地改改，这个方便你调试预览。\n\n```shell\n hexo server\t\t# 默认情况下，访问网址为： http://localhost:4000/\n```\n\n### 发布文章\n\n**文章可以拥有如下属性：**\n\n<img src=\"/images/hexoConfigNote/image-20230526214839842.png\" alt=\"image-20230526214839842\" style=\"zoom:67%;\" />\n\n- 新建一篇文章。如果没有设置 `layout` 的话，默认使用  _config.yml 中的 `default_layout` 参数代替。如果标题包含**空格**的话，请使用引号括起来。\n\n  对于独立页面来说，Hexo 会创建一个以标题为名字的目录，并在目录中放置一个 `index.md` 文件。\n\n```shell\nhexo new [layout] <title>\t# 目录位置：source/_posts/title\n\n#title是必不可少的\nhexo new page --path about/me \"About me\"\t#创建一个 source/about/me.md 文件，同时 title 为 \"About me\"\nhexo new page --path about/me\t\t\t   #创建 source/_posts/about/me.md，同时 title 为 \"page\"\n```\n\n- 生成草稿，会在source/_drafts目录下生成一个new-draft.md文件。但是这个文件不被显示在页面上，链接也访问不到。\n\n```shell\n hexo new draft \"new draft\"\t\n hexo server --drafts\t\t\t\t#预览草稿\n hexo publish [layout] <filename>\t #把草稿变成文章，或者页面\n```\n\n参考：\n\n[指令 | Hexo](https://hexo.io/zh-cn/docs/commands.html)\n[Hexo 最常用的几个命令 - 简书 (jianshu.com)](https://www.jianshu.com/p/a2d298e26dcd)\n\n\n\n## 3、选择Hexo Theme\n\n我选的是[安知鱼 - 生活明朗, 万物可爱 (anzhiy.cn)](https://anzhiy.cn/)\n\n- 安装指南是在[安知鱼主题指南 (anzhiy.cn)](https://anzhiy.cn/docs/quick-start.html#💻-安裝)\n\n- 安装步骤是参考的他的视频教程[anzhiyu主题安装_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Rs4y127hu/?spm_id_from=333.788&vd_source=592e40e3e456cbca5e66df60b04bf2d3)\n\n配置：[安知鱼主题社交图标配置_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Cv4y1n7FW/?spm_id_from=pageDriver&vd_source=592e40e3e456cbca5e66df60b04bf2d3)\n\n- 配置可以参考anzhiyu的文档：[安知鱼主题指南 (anheyu.com)](https://blog.anheyu.com/docs/)\n- 也可以参考Butterfly(更全)：[Butterfly - A Simple and Card UI Design theme for Hexo](https://butterfly.js.org/)\n- 配置查文档的话还是参考Butterfly，anzhiyu很多都没有\n\n### 自定义头像（最开始刚加载的地方）\n\n<img src=\"/images/hexoConfigNote/image-20230526214857770.png\" alt=\"image-20230526214857770\" style=\"zoom:67%;\" />\n\nLoading Animation (加载动画)中\n\n```yaml\n# Loading Animation (加载动画)\npreloader:\n  enable: true\n  # source\n  # 1. fullpage-loading\n  # 2. pace (progress bar)\n  # else all\n  source: 3\n  # pace theme (see https://codebyzach.github.io/pace/)\n  pace_css_url:\n  avatar: /img/avatar.jpg # 自定义头像\n```\n\n### 页面结构\n\n![image-20230526214910920](/images/hexoConfigNote/image-20230526214910920.png)\n\n\n\n### _config.anzhiyu.yml文件结构\n\n- nav（左上角目录）\n\n  <img src=\"/images/hexoConfigNote/image-20230526214924274.png\" alt=\"image-20230526214924274\" style=\"zoom:50%;\" />\n\n- Code Blocks (代码相关)\n\n- search (搜索)\n\n<img src=\"/images/hexoConfigNote/image-20230526214939187.png\" alt=\"image-20230526214939187\" style=\"zoom:80%;\" />\n\n<img src=\"/images/hexoConfigNote/image-20230526214948330.png\" alt=\"image-20230526214948330\" style=\"zoom:50%;\" />\n\n- Math (数学)\n- Image (图片设置)\n  - 可以设置**网站图标**：`Favicon`（网站图标）\n  - 在这里设置**头像(`avatar`)**没用，头像(`avatar`)设置应该在：Loading Animation (加载动画)中设置\n  - index_img\n  - default_top_img\n  - archive_img\n  - tag_img\n  - category_img\n- Post（文章设置）\n- Share System (分享功能)\n- Comments System（评论设置）\n- Chat Services（聊天区）\n- Footer Settings（页脚设置）\n- Analysis\n- Advertisement（广告）\n- Verification (站长验证)\n- Beautify/Effect (美化/效果)\n- Background effects (背景特效)\n- aside (侧边栏)\n- Bottom right button (右下角按钮)\n- Lightbox (图片大图查看模式)\n- Tag Plugins settings (标签外挂)\n- other\n\n\n\n\n\n## 4、clash优化上传速度\n\n- 安装`clash`（一定要安在系统盘！！！不能有中文路径！！！确保之前的版本卸载干净），推荐在官网下载解压缩版\n- 配置方法：[Clash for Windows 官网下载、设置教程 🌟 觅云🔥 (miyun.app)](https://doc.miyun.app/clash-for-windows/)\n\n\n\n## 5、typora + hexo博客中插入图片\n\n[(90条消息) typora + hexo博客中插入图片__吟游诗人的博客-CSDN博客](https://blog.csdn.net/qq_32623363/article/details/100524856)\n\n- 首先在 `hexo > source`目录下建一个文件夹叫images，用来保存博客中的图片。\n\n- 打开Typora的 `文件 > 偏好设置`，进行如下设置\n\n  ```\n  ../../source/images/${filename}\n  ```\n\n  \n\n  <img src=\"/images/hexoConfigNote/image-20230526215016301.png\" alt=\"image-20230526215016301\" style=\"zoom:50%;\" />\n\n- 格式->图像->设置图片根目录\n\n  <img src=\"/images/hexoConfigNote/image-20230526215415503.png\" alt=\"image-20230526215415503\" style=\"zoom:50%;\" />\n\n- 记得先在hexo里执行了  `hexo new  <title>` 再用typora打开.md文件进行编辑，这样图片插入时才会保存在文件夹中。\n\n## 6、每次写Blog时\n\n```shell\nhexo new  <title>\t#新建一篇Blog\n```\n\n- 用typora打开`source\\_posts\\<title>.md`，开始写你的Blog，每次记得保存！\n- 生成文章页并预览\n\n```shell\nhexo cl\t#清除public文件夹\nhexo g\t#生成\nhexo s\t#本地预览\n```\n\n- 如果觉得已经写好啦，部署到github上吧！\n\n```shell\nhexo d\n```\n\n## 7、添加百度统计实时观测网站数据\n\n**一开始我没在[安知鱼主题指南 (anzhiy.cn)](https://anzhiy.cn/docs/)找到相关配置方法，所以就自己去看了theme文件夹下面的源码**\n\n- 在`themes\\anzhiyu\\layout\\includes\\head\\analytics.pug`文件中我找到了关于`baidu_analytics`的代码:\n\n```pug\nif theme.baidu_analytics\n  script.\n    var _hmt = _hmt || [];\n    (function() {\n      var hm = document.createElement(\"script\");\n      hm.src = \"https://hm.baidu.com/hm.js?!{theme.baidu_analytics}\";\n      var s = document.getElementsByTagName(\"script\")[0]; \n      s.parentNode.insertBefore(hm, s);\n    })();\n```\n\n- 这段代码的作用是用于在用户的网站上集成百度统计（Baidu Analytics），以便收集访问数据和用户行为信息，为网站的运营和分析提供数据支持。接下来我们逐行分析此代码的作用：\n\n1.  `if theme.baidu_analytics`：先判断是否设置了`baidu_analytics`，如果是，则继续执行后面的代码，否则跳过本段代码块。\n2.  `script.`：代表这是一段JavaScript脚本。\n3.  `var _hmt = _hmt || [];`：声明一个全局变量`_hmt`，如果该变量已存在，则直接将其赋值为自身，如果不存在，则将其赋值为空数组。\n4.  `(function() { ... })();`：使用匿名函数立即把该函数作为表达式执行，不会在全局范围内定义变量，可以保证插件逻辑与项目逻辑没有任何干扰。\n5. ` var hm = document.createElement(\"script\");`：使用`document.createElement`方法创建一个`<script>`元素，即创建一个script标签。\n6.  `hm.src = \"https://hm.baidu.com/hm.js?!{theme.baidu_analytics}\";`：设置百度统计脚本的`src`属性，其中`theme.baidu_analytics`是Vue中的动态属性，用于获取用户设置的百度统计统计ID。\n7.  `var s = document.getElementsByTagName(\"script\")[0];`：获取页面上第一个`<script>`元素。\n8.  `s.parentNode.insertBefore(hm, s);`：将新创建的`<script>`元素插入到`s`元素之前，即在页面上引入百度统计的JS脚本文件，以完成数据收集的功能。\n\n**后来，我在[Butterfly 安裝文檔(四) 主題配置-2 | Butterfly](https://butterfly.js.org/posts/ceeb73f/#在綫聊天)找到了相关配置方法**\n\n<img src=\"/images/hexoConfigNote/image-20230527173207803.png\" alt=\"image-20230527173207803\" style=\"zoom: 67%;\" />\n\n**注意！！不是复制一整段代码！！而是**\n\n![Snipaste_2023-05-27_17-56-31](/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png)\n\n## 8、加速Hexo网站的加载速度\n\n[hexo](https://so.csdn.net/so/search?q=hexo&spm=1001.2101.3001.7020)-offline-popuphexo-offline-popup 是一个 [hexo](https://hexo.io/) 插件， 它可加速您的Hexo网站的加载速度，以及网站内容更新弹窗提示。\n\n参考：[(90条消息) Hexo博客技巧：提升博客访问速度_基于github搭建的hexo博客如何加速_Chak Aciano的博客-CSDN博客](https://blog.csdn.net/weixin_58068682/article/details/116613947)\n\n## 9、首页顶部 3 大分类配置\n\n[站点基础配置(三) | 安知鱼主题指南 (anheyu.com)](https://blog.anheyu.com/docs/site-configuration3.html#首页顶部-3-大分类配置)\n- 创建分类页\n- 在`/_posts/`中创建文章，文章顶部配置\n\n```\ncategories: 生活日常\n```","source":"_posts/hexoConfigNote.md","raw":"---\ntitle: 搭建Bolg全过程记录\ndate: 2023-05-26 19:12:56\ntags: config\nswiper_index: 1\ntop_group_index: 2\ncover: mycover.png\nai: true\ntypora-root-url: ./..\n---\n# 搭建Bolg全过程记录\n\n## 1、Hexo+GithubPage+阿里云域名配置\n\n### 搭建过程这个博主说的比较清楚：\n\n[使用 Hexo+GitHub 搭建个人免费博客教程（小白向） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/60578464)\n\n### Hexo+GithubPage搭建原理：\n\n在本地撰写 Markdown 格式文章后，通过 Hexo 解析文档，渲染生成具有主题样式的 HTML 静态网页，再推送到 GitHub 上完成博文的发布。\n\n<img src=\"/images/hexoConfigNote/image-20230526214207511.png\" alt=\"image-20230526214207511\" style=\"zoom:80%;\" />\n\n### 访问网址\n\ndeploy到Github上之后就可以通过<https://用户名.github.io>来访问你的博客了\n\n也可以通过**域名**来访问，在阿里云上购买一个即可。\n\n### Hexo 博客文件夹目录结构如下：\n\n![img](/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp)\n\n### _config.yml文件的[配置 | Hexo](https://hexo.io/zh-cn/docs/configuration.html)\n\n- 注意：仅仅注释掉某些配置并不会引起页面改变，除非改变配置的值！！\n\n<img src=\"/images/hexoConfigNote/image-20230526214721316.png\" alt=\"image-20230526214721316\" style=\"zoom:50%;\" />\n\n注释掉之后照样显示：\n\n![image-20230526214734538](/images/hexoConfigNote/image-20230526214734538.png)\n\n除非删除对应的值：\n\n<img src=\"/images/hexoConfigNote/image-20230526214745972.png\" alt=\"image-20230526214745972\" style=\"zoom: 50%;\" />\n\n此时显示：\n\n![image-20230526214802166](/images/hexoConfigNote/image-20230526214802166.png)\n\n\n\n\n\n## 2、Hexo常用命令\n\n### 搭建相关\n\n- 初始化\n\n```shell\nhexo init [folder]\t #新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。\n```\n\n- 在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行下面命令。\n\n```shell\nhexo clean \t\t    #清除缓存文件 (db.json) 和已生成的静态文件 (public)。\n```\n\n简写成下面这样不会删除public文件夹\n\n```shell\nhexo c\t\n```\n\n简写成下面这样会删除public文件夹\n\n```shell\nhexo cl\n```\n\n- 生成网站静态文件到默认设置的  `public ` 文件夹。\n\n```shell\nhexo generate\t\t#Hexo 引入了差分机制，如果 public 目录存在，那么 hexo g 只会重新生成改动的文件\nhexo generate -f\t#强制重新生成文件,使用该参数的效果接近 hexo clean && hexo generate\n```\n\n- 部署网站到 `github` 上\n\n```shell\nhexo deploy\t\t\t#可以在 _config.yml 文件中配置 deploy 的相关参数\n```\n\n- 启动本地服务器，用于预览主题。预览的同时可以修改文章内容或主题代码，保存后刷新页面即可；但是对 Hexo 根目录 _config.yml 的修改，需要重启本地服务器后才能预览效果。\n\n  如果你还没有部署到github上，还想在本地改改，这个方便你调试预览。\n\n```shell\n hexo server\t\t# 默认情况下，访问网址为： http://localhost:4000/\n```\n\n### 发布文章\n\n**文章可以拥有如下属性：**\n\n<img src=\"/images/hexoConfigNote/image-20230526214839842.png\" alt=\"image-20230526214839842\" style=\"zoom:67%;\" />\n\n- 新建一篇文章。如果没有设置 `layout` 的话，默认使用  _config.yml 中的 `default_layout` 参数代替。如果标题包含**空格**的话，请使用引号括起来。\n\n  对于独立页面来说，Hexo 会创建一个以标题为名字的目录，并在目录中放置一个 `index.md` 文件。\n\n```shell\nhexo new [layout] <title>\t# 目录位置：source/_posts/title\n\n#title是必不可少的\nhexo new page --path about/me \"About me\"\t#创建一个 source/about/me.md 文件，同时 title 为 \"About me\"\nhexo new page --path about/me\t\t\t   #创建 source/_posts/about/me.md，同时 title 为 \"page\"\n```\n\n- 生成草稿，会在source/_drafts目录下生成一个new-draft.md文件。但是这个文件不被显示在页面上，链接也访问不到。\n\n```shell\n hexo new draft \"new draft\"\t\n hexo server --drafts\t\t\t\t#预览草稿\n hexo publish [layout] <filename>\t #把草稿变成文章，或者页面\n```\n\n参考：\n\n[指令 | Hexo](https://hexo.io/zh-cn/docs/commands.html)\n[Hexo 最常用的几个命令 - 简书 (jianshu.com)](https://www.jianshu.com/p/a2d298e26dcd)\n\n\n\n## 3、选择Hexo Theme\n\n我选的是[安知鱼 - 生活明朗, 万物可爱 (anzhiy.cn)](https://anzhiy.cn/)\n\n- 安装指南是在[安知鱼主题指南 (anzhiy.cn)](https://anzhiy.cn/docs/quick-start.html#💻-安裝)\n\n- 安装步骤是参考的他的视频教程[anzhiyu主题安装_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Rs4y127hu/?spm_id_from=333.788&vd_source=592e40e3e456cbca5e66df60b04bf2d3)\n\n配置：[安知鱼主题社交图标配置_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Cv4y1n7FW/?spm_id_from=pageDriver&vd_source=592e40e3e456cbca5e66df60b04bf2d3)\n\n- 配置可以参考anzhiyu的文档：[安知鱼主题指南 (anheyu.com)](https://blog.anheyu.com/docs/)\n- 也可以参考Butterfly(更全)：[Butterfly - A Simple and Card UI Design theme for Hexo](https://butterfly.js.org/)\n- 配置查文档的话还是参考Butterfly，anzhiyu很多都没有\n\n### 自定义头像（最开始刚加载的地方）\n\n<img src=\"/images/hexoConfigNote/image-20230526214857770.png\" alt=\"image-20230526214857770\" style=\"zoom:67%;\" />\n\nLoading Animation (加载动画)中\n\n```yaml\n# Loading Animation (加载动画)\npreloader:\n  enable: true\n  # source\n  # 1. fullpage-loading\n  # 2. pace (progress bar)\n  # else all\n  source: 3\n  # pace theme (see https://codebyzach.github.io/pace/)\n  pace_css_url:\n  avatar: /img/avatar.jpg # 自定义头像\n```\n\n### 页面结构\n\n![image-20230526214910920](/images/hexoConfigNote/image-20230526214910920.png)\n\n\n\n### _config.anzhiyu.yml文件结构\n\n- nav（左上角目录）\n\n  <img src=\"/images/hexoConfigNote/image-20230526214924274.png\" alt=\"image-20230526214924274\" style=\"zoom:50%;\" />\n\n- Code Blocks (代码相关)\n\n- search (搜索)\n\n<img src=\"/images/hexoConfigNote/image-20230526214939187.png\" alt=\"image-20230526214939187\" style=\"zoom:80%;\" />\n\n<img src=\"/images/hexoConfigNote/image-20230526214948330.png\" alt=\"image-20230526214948330\" style=\"zoom:50%;\" />\n\n- Math (数学)\n- Image (图片设置)\n  - 可以设置**网站图标**：`Favicon`（网站图标）\n  - 在这里设置**头像(`avatar`)**没用，头像(`avatar`)设置应该在：Loading Animation (加载动画)中设置\n  - index_img\n  - default_top_img\n  - archive_img\n  - tag_img\n  - category_img\n- Post（文章设置）\n- Share System (分享功能)\n- Comments System（评论设置）\n- Chat Services（聊天区）\n- Footer Settings（页脚设置）\n- Analysis\n- Advertisement（广告）\n- Verification (站长验证)\n- Beautify/Effect (美化/效果)\n- Background effects (背景特效)\n- aside (侧边栏)\n- Bottom right button (右下角按钮)\n- Lightbox (图片大图查看模式)\n- Tag Plugins settings (标签外挂)\n- other\n\n\n\n\n\n## 4、clash优化上传速度\n\n- 安装`clash`（一定要安在系统盘！！！不能有中文路径！！！确保之前的版本卸载干净），推荐在官网下载解压缩版\n- 配置方法：[Clash for Windows 官网下载、设置教程 🌟 觅云🔥 (miyun.app)](https://doc.miyun.app/clash-for-windows/)\n\n\n\n## 5、typora + hexo博客中插入图片\n\n[(90条消息) typora + hexo博客中插入图片__吟游诗人的博客-CSDN博客](https://blog.csdn.net/qq_32623363/article/details/100524856)\n\n- 首先在 `hexo > source`目录下建一个文件夹叫images，用来保存博客中的图片。\n\n- 打开Typora的 `文件 > 偏好设置`，进行如下设置\n\n  ```\n  ../../source/images/${filename}\n  ```\n\n  \n\n  <img src=\"/images/hexoConfigNote/image-20230526215016301.png\" alt=\"image-20230526215016301\" style=\"zoom:50%;\" />\n\n- 格式->图像->设置图片根目录\n\n  <img src=\"/images/hexoConfigNote/image-20230526215415503.png\" alt=\"image-20230526215415503\" style=\"zoom:50%;\" />\n\n- 记得先在hexo里执行了  `hexo new  <title>` 再用typora打开.md文件进行编辑，这样图片插入时才会保存在文件夹中。\n\n## 6、每次写Blog时\n\n```shell\nhexo new  <title>\t#新建一篇Blog\n```\n\n- 用typora打开`source\\_posts\\<title>.md`，开始写你的Blog，每次记得保存！\n- 生成文章页并预览\n\n```shell\nhexo cl\t#清除public文件夹\nhexo g\t#生成\nhexo s\t#本地预览\n```\n\n- 如果觉得已经写好啦，部署到github上吧！\n\n```shell\nhexo d\n```\n\n## 7、添加百度统计实时观测网站数据\n\n**一开始我没在[安知鱼主题指南 (anzhiy.cn)](https://anzhiy.cn/docs/)找到相关配置方法，所以就自己去看了theme文件夹下面的源码**\n\n- 在`themes\\anzhiyu\\layout\\includes\\head\\analytics.pug`文件中我找到了关于`baidu_analytics`的代码:\n\n```pug\nif theme.baidu_analytics\n  script.\n    var _hmt = _hmt || [];\n    (function() {\n      var hm = document.createElement(\"script\");\n      hm.src = \"https://hm.baidu.com/hm.js?!{theme.baidu_analytics}\";\n      var s = document.getElementsByTagName(\"script\")[0]; \n      s.parentNode.insertBefore(hm, s);\n    })();\n```\n\n- 这段代码的作用是用于在用户的网站上集成百度统计（Baidu Analytics），以便收集访问数据和用户行为信息，为网站的运营和分析提供数据支持。接下来我们逐行分析此代码的作用：\n\n1.  `if theme.baidu_analytics`：先判断是否设置了`baidu_analytics`，如果是，则继续执行后面的代码，否则跳过本段代码块。\n2.  `script.`：代表这是一段JavaScript脚本。\n3.  `var _hmt = _hmt || [];`：声明一个全局变量`_hmt`，如果该变量已存在，则直接将其赋值为自身，如果不存在，则将其赋值为空数组。\n4.  `(function() { ... })();`：使用匿名函数立即把该函数作为表达式执行，不会在全局范围内定义变量，可以保证插件逻辑与项目逻辑没有任何干扰。\n5. ` var hm = document.createElement(\"script\");`：使用`document.createElement`方法创建一个`<script>`元素，即创建一个script标签。\n6.  `hm.src = \"https://hm.baidu.com/hm.js?!{theme.baidu_analytics}\";`：设置百度统计脚本的`src`属性，其中`theme.baidu_analytics`是Vue中的动态属性，用于获取用户设置的百度统计统计ID。\n7.  `var s = document.getElementsByTagName(\"script\")[0];`：获取页面上第一个`<script>`元素。\n8.  `s.parentNode.insertBefore(hm, s);`：将新创建的`<script>`元素插入到`s`元素之前，即在页面上引入百度统计的JS脚本文件，以完成数据收集的功能。\n\n**后来，我在[Butterfly 安裝文檔(四) 主題配置-2 | Butterfly](https://butterfly.js.org/posts/ceeb73f/#在綫聊天)找到了相关配置方法**\n\n<img src=\"/images/hexoConfigNote/image-20230527173207803.png\" alt=\"image-20230527173207803\" style=\"zoom: 67%;\" />\n\n**注意！！不是复制一整段代码！！而是**\n\n![Snipaste_2023-05-27_17-56-31](/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png)\n\n## 8、加速Hexo网站的加载速度\n\n[hexo](https://so.csdn.net/so/search?q=hexo&spm=1001.2101.3001.7020)-offline-popuphexo-offline-popup 是一个 [hexo](https://hexo.io/) 插件， 它可加速您的Hexo网站的加载速度，以及网站内容更新弹窗提示。\n\n参考：[(90条消息) Hexo博客技巧：提升博客访问速度_基于github搭建的hexo博客如何加速_Chak Aciano的博客-CSDN博客](https://blog.csdn.net/weixin_58068682/article/details/116613947)\n\n## 9、首页顶部 3 大分类配置\n\n[站点基础配置(三) | 安知鱼主题指南 (anheyu.com)](https://blog.anheyu.com/docs/site-configuration3.html#首页顶部-3-大分类配置)\n- 创建分类页\n- 在`/_posts/`中创建文章，文章顶部配置\n\n```\ncategories: 生活日常\n```","slug":"hexoConfigNote","published":1,"updated":"2023-06-18T13:37:57.368Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47q000mf4ss0jaq9m8r","content":"<h1 id=\"搭建Bolg全过程记录\"><a href=\"#搭建Bolg全过程记录\" class=\"headerlink\" title=\"搭建Bolg全过程记录\"></a>搭建Bolg全过程记录</h1><h2 id=\"1、Hexo-GithubPage-阿里云域名配置\"><a href=\"#1、Hexo-GithubPage-阿里云域名配置\" class=\"headerlink\" title=\"1、Hexo+GithubPage+阿里云域名配置\"></a>1、Hexo+GithubPage+阿里云域名配置</h2><h3 id=\"搭建过程这个博主说的比较清楚：\"><a href=\"#搭建过程这个博主说的比较清楚：\" class=\"headerlink\" title=\"搭建过程这个博主说的比较清楚：\"></a>搭建过程这个博主说的比较清楚：</h3><p><a href=\"https://zhuanlan.zhihu.com/p/60578464\">使用 Hexo+GitHub 搭建个人免费博客教程（小白向） - 知乎 (zhihu.com)</a></p>\n<h3 id=\"Hexo-GithubPage搭建原理：\"><a href=\"#Hexo-GithubPage搭建原理：\" class=\"headerlink\" title=\"Hexo+GithubPage搭建原理：\"></a>Hexo+GithubPage搭建原理：</h3><p>在本地撰写 Markdown 格式文章后，通过 Hexo 解析文档，渲染生成具有主题样式的 HTML 静态网页，再推送到 GitHub 上完成博文的发布。</p>\n<img src=\"/images/hexoConfigNote/image-20230526214207511.png\" alt=\"image-20230526214207511\" style=\"zoom:80%;\">\n\n<h3 id=\"访问网址\"><a href=\"#访问网址\" class=\"headerlink\" title=\"访问网址\"></a>访问网址</h3><p>deploy到Github上之后就可以通过<a href=\"https://用户名.github.io/\">https://用户名.github.io</a>来访问你的博客了</p>\n<p>也可以通过<strong>域名</strong>来访问，在阿里云上购买一个即可。</p>\n<h3 id=\"Hexo-博客文件夹目录结构如下：\"><a href=\"#Hexo-博客文件夹目录结构如下：\" class=\"headerlink\" title=\"Hexo 博客文件夹目录结构如下：\"></a>Hexo 博客文件夹目录结构如下：</h3><p><img src=\"/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp\" alt=\"img\"></p>\n<h3 id=\"config-yml文件的配置-Hexo\"><a href=\"#config-yml文件的配置-Hexo\" class=\"headerlink\" title=\"_config.yml文件的配置 | Hexo\"></a>_config.yml文件的<a href=\"https://hexo.io/zh-cn/docs/configuration.html\">配置 | Hexo</a></h3><ul>\n<li>注意：仅仅注释掉某些配置并不会引起页面改变，除非改变配置的值！！</li>\n</ul>\n<img src=\"/images/hexoConfigNote/image-20230526214721316.png\" alt=\"image-20230526214721316\" style=\"zoom:50%;\">\n\n<p>注释掉之后照样显示：</p>\n<p><img src=\"/images/hexoConfigNote/image-20230526214734538.png\" alt=\"image-20230526214734538\"></p>\n<p>除非删除对应的值：</p>\n<img src=\"/images/hexoConfigNote/image-20230526214745972.png\" alt=\"image-20230526214745972\" style=\"zoom: 50%;\">\n\n<p>此时显示：</p>\n<p><img src=\"/images/hexoConfigNote/image-20230526214802166.png\" alt=\"image-20230526214802166\"></p>\n<h2 id=\"2、Hexo常用命令\"><a href=\"#2、Hexo常用命令\" class=\"headerlink\" title=\"2、Hexo常用命令\"></a>2、Hexo常用命令</h2><h3 id=\"搭建相关\"><a href=\"#搭建相关\" class=\"headerlink\" title=\"搭建相关\"></a>搭建相关</h3><ul>\n<li>初始化</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init [folder]\t #新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行下面命令。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean \t\t    #清除缓存文件 (db.json) 和已生成的静态文件 (public)。</span><br></pre></td></tr></table></figure>\n\n<p>简写成下面这样不会删除public文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo c\t</span><br></pre></td></tr></table></figure>\n\n<p>简写成下面这样会删除public文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo cl</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>生成网站静态文件到默认设置的  <code>public </code> 文件夹。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo generate\t\t#Hexo 引入了差分机制，如果 public 目录存在，那么 hexo g 只会重新生成改动的文件</span><br><span class=\"line\">hexo generate -f\t#强制重新生成文件,使用该参数的效果接近 hexo clean &amp;&amp; hexo generate</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>部署网站到 <code>github</code> 上</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo deploy\t\t\t#可以在 _config.yml 文件中配置 deploy 的相关参数</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>启动本地服务器，用于预览主题。预览的同时可以修改文章内容或主题代码，保存后刷新页面即可；但是对 Hexo 根目录 _config.yml 的修改，需要重启本地服务器后才能预览效果。</p>\n<p>如果你还没有部署到github上，还想在本地改改，这个方便你调试预览。</p>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo server\t\t# 默认情况下，访问网址为： http://localhost:4000/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"发布文章\"><a href=\"#发布文章\" class=\"headerlink\" title=\"发布文章\"></a>发布文章</h3><p><strong>文章可以拥有如下属性：</strong></p>\n<img src=\"/images/hexoConfigNote/image-20230526214839842.png\" alt=\"image-20230526214839842\" style=\"zoom:67%;\">\n\n<ul>\n<li><p>新建一篇文章。如果没有设置 <code>layout</code> 的话，默认使用  _config.yml 中的 <code>default_layout</code> 参数代替。如果标题包含<strong>空格</strong>的话，请使用引号括起来。</p>\n<p>对于独立页面来说，Hexo 会创建一个以标题为名字的目录，并在目录中放置一个 <code>index.md</code> 文件。</p>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new [layout] &lt;title&gt;\t# 目录位置：source/_posts/title</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">title是必不可少的</span></span><br><span class=\"line\">hexo new page --path about/me &quot;About me&quot;\t#创建一个 source/about/me.md 文件，同时 title 为 &quot;About me&quot;</span><br><span class=\"line\">hexo new page --path about/me\t\t\t   #创建 source/_posts/about/me.md，同时 title 为 &quot;page&quot;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>生成草稿，会在source&#x2F;_drafts目录下生成一个new-draft.md文件。但是这个文件不被显示在页面上，链接也访问不到。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new draft &quot;new draft&quot;\t</span><br><span class=\"line\">hexo server --drafts\t\t\t\t#预览草稿</span><br><span class=\"line\">hexo publish [layout] &lt;filename&gt;\t #把草稿变成文章，或者页面</span><br></pre></td></tr></table></figure>\n\n<p>参考：</p>\n<p><a href=\"https://hexo.io/zh-cn/docs/commands.html\">指令 | Hexo</a><br><a href=\"https://www.jianshu.com/p/a2d298e26dcd\">Hexo 最常用的几个命令 - 简书 (jianshu.com)</a></p>\n<h2 id=\"3、选择Hexo-Theme\"><a href=\"#3、选择Hexo-Theme\" class=\"headerlink\" title=\"3、选择Hexo Theme\"></a>3、选择Hexo Theme</h2><p>我选的是<a href=\"https://anzhiy.cn/\">安知鱼 - 生活明朗, 万物可爱 (anzhiy.cn)</a></p>\n<ul>\n<li><p>安装指南是在<a href=\"https://anzhiy.cn/docs/quick-start.html#%F0%9F%92%BB-%E5%AE%89%E8%A3%9D\">安知鱼主题指南 (anzhiy.cn)</a></p>\n</li>\n<li><p>安装步骤是参考的他的视频教程<a href=\"https://www.bilibili.com/video/BV1Rs4y127hu/?spm_id_from=333.788&vd_source=592e40e3e456cbca5e66df60b04bf2d3\">anzhiyu主题安装_哔哩哔哩_bilibili</a></p>\n</li>\n</ul>\n<p>配置：<a href=\"https://www.bilibili.com/video/BV1Cv4y1n7FW/?spm_id_from=pageDriver&vd_source=592e40e3e456cbca5e66df60b04bf2d3\">安知鱼主题社交图标配置_哔哩哔哩_bilibili</a></p>\n<ul>\n<li>配置可以参考anzhiyu的文档：<a href=\"https://blog.anheyu.com/docs/\">安知鱼主题指南 (anheyu.com)</a></li>\n<li>也可以参考Butterfly(更全)：<a href=\"https://butterfly.js.org/\">Butterfly - A Simple and Card UI Design theme for Hexo</a></li>\n<li>配置查文档的话还是参考Butterfly，anzhiyu很多都没有</li>\n</ul>\n<h3 id=\"自定义头像（最开始刚加载的地方）\"><a href=\"#自定义头像（最开始刚加载的地方）\" class=\"headerlink\" title=\"自定义头像（最开始刚加载的地方）\"></a>自定义头像（最开始刚加载的地方）</h3><img src=\"/images/hexoConfigNote/image-20230526214857770.png\" alt=\"image-20230526214857770\" style=\"zoom:67%;\">\n\n<p>Loading Animation (加载动画)中</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Loading Animation (加载动画)</span></span><br><span class=\"line\"><span class=\"attr\">preloader:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># source</span></span><br><span class=\"line\">  <span class=\"comment\"># 1. fullpage-loading</span></span><br><span class=\"line\">  <span class=\"comment\"># 2. pace (progress bar)</span></span><br><span class=\"line\">  <span class=\"comment\"># else all</span></span><br><span class=\"line\">  <span class=\"attr\">source:</span> <span class=\"number\">3</span></span><br><span class=\"line\">  <span class=\"comment\"># pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class=\"line\">  <span class=\"attr\">pace_css_url:</span></span><br><span class=\"line\">  <span class=\"attr\">avatar:</span> <span class=\"string\">/img/avatar.jpg</span> <span class=\"comment\"># 自定义头像</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"页面结构\"><a href=\"#页面结构\" class=\"headerlink\" title=\"页面结构\"></a>页面结构</h3><p><img src=\"/images/hexoConfigNote/image-20230526214910920.png\" alt=\"image-20230526214910920\"></p>\n<h3 id=\"config-anzhiyu-yml文件结构\"><a href=\"#config-anzhiyu-yml文件结构\" class=\"headerlink\" title=\"_config.anzhiyu.yml文件结构\"></a>_config.anzhiyu.yml文件结构</h3><ul>\n<li><p>nav（左上角目录）</p>\n<img src=\"/images/hexoConfigNote/image-20230526214924274.png\" alt=\"image-20230526214924274\" style=\"zoom:50%;\">\n</li>\n<li><p>Code Blocks (代码相关)</p>\n</li>\n<li><p>search (搜索)</p>\n</li>\n</ul>\n<img src=\"/images/hexoConfigNote/image-20230526214939187.png\" alt=\"image-20230526214939187\" style=\"zoom:80%;\">\n\n<img src=\"/images/hexoConfigNote/image-20230526214948330.png\" alt=\"image-20230526214948330\" style=\"zoom:50%;\">\n\n<ul>\n<li>Math (数学)</li>\n<li>Image (图片设置)<ul>\n<li>可以设置<strong>网站图标</strong>：<code>Favicon</code>（网站图标）</li>\n<li>在这里设置**头像(<code>avatar</code>)**没用，头像(<code>avatar</code>)设置应该在：Loading Animation (加载动画)中设置</li>\n<li>index_img</li>\n<li>default_top_img</li>\n<li>archive_img</li>\n<li>tag_img</li>\n<li>category_img</li>\n</ul>\n</li>\n<li>Post（文章设置）</li>\n<li>Share System (分享功能)</li>\n<li>Comments System（评论设置）</li>\n<li>Chat Services（聊天区）</li>\n<li>Footer Settings（页脚设置）</li>\n<li>Analysis</li>\n<li>Advertisement（广告）</li>\n<li>Verification (站长验证)</li>\n<li>Beautify&#x2F;Effect (美化&#x2F;效果)</li>\n<li>Background effects (背景特效)</li>\n<li>aside (侧边栏)</li>\n<li>Bottom right button (右下角按钮)</li>\n<li>Lightbox (图片大图查看模式)</li>\n<li>Tag Plugins settings (标签外挂)</li>\n<li>other</li>\n</ul>\n<h2 id=\"4、clash优化上传速度\"><a href=\"#4、clash优化上传速度\" class=\"headerlink\" title=\"4、clash优化上传速度\"></a>4、clash优化上传速度</h2><ul>\n<li>安装<code>clash</code>（一定要安在系统盘！！！不能有中文路径！！！确保之前的版本卸载干净），推荐在官网下载解压缩版</li>\n<li>配置方法：<a href=\"https://doc.miyun.app/clash-for-windows/\">Clash for Windows 官网下载、设置教程 🌟 觅云🔥 (miyun.app)</a></li>\n</ul>\n<h2 id=\"5、typora-hexo博客中插入图片\"><a href=\"#5、typora-hexo博客中插入图片\" class=\"headerlink\" title=\"5、typora + hexo博客中插入图片\"></a>5、typora + hexo博客中插入图片</h2><p><a href=\"https://blog.csdn.net/qq_32623363/article/details/100524856\">(90条消息) typora + hexo博客中插入图片__吟游诗人的博客-CSDN博客</a></p>\n<ul>\n<li><p>首先在 <code>hexo &gt; source</code>目录下建一个文件夹叫images，用来保存博客中的图片。</p>\n</li>\n<li><p>打开Typora的 <code>文件 &gt; 偏好设置</code>，进行如下设置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">../../source/images/$&#123;filename&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<img src=\"/images/hexoConfigNote/image-20230526215016301.png\" alt=\"image-20230526215016301\" style=\"zoom:50%;\">\n</li>\n<li><p>格式-&gt;图像-&gt;设置图片根目录</p>\n<img src=\"/images/hexoConfigNote/image-20230526215415503.png\" alt=\"image-20230526215415503\" style=\"zoom:50%;\">\n</li>\n<li><p>记得先在hexo里执行了  <code>hexo new  &lt;title&gt;</code> 再用typora打开.md文件进行编辑，这样图片插入时才会保存在文件夹中。</p>\n</li>\n</ul>\n<h2 id=\"6、每次写Blog时\"><a href=\"#6、每次写Blog时\" class=\"headerlink\" title=\"6、每次写Blog时\"></a>6、每次写Blog时</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new  &lt;title&gt;\t#新建一篇Blog</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>用typora打开<code>source\\_posts\\&lt;title&gt;.md</code>，开始写你的Blog，每次记得保存！</li>\n<li>生成文章页并预览</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo cl\t#清除public文件夹</span><br><span class=\"line\">hexo g\t#生成</span><br><span class=\"line\">hexo s\t#本地预览</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如果觉得已经写好啦，部署到github上吧！</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7、添加百度统计实时观测网站数据\"><a href=\"#7、添加百度统计实时观测网站数据\" class=\"headerlink\" title=\"7、添加百度统计实时观测网站数据\"></a>7、添加百度统计实时观测网站数据</h2><p><strong>一开始我没在<a href=\"https://anzhiy.cn/docs/\">安知鱼主题指南 (anzhiy.cn)</a>找到相关配置方法，所以就自己去看了theme文件夹下面的源码</strong></p>\n<ul>\n<li>在<code>themes\\anzhiyu\\layout\\includes\\head\\analytics.pug</code>文件中我找到了关于<code>baidu_analytics</code>的代码:</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if theme.baidu_analytics</span><br><span class=\"line\">  script.</span><br><span class=\"line\">    var _hmt = _hmt || [];</span><br><span class=\"line\">    (function() &#123;</span><br><span class=\"line\">      var hm = document.createElement(&quot;script&quot;);</span><br><span class=\"line\">      hm.src = &quot;https://hm.baidu.com/hm.js?!&#123;theme.baidu_analytics&#125;&quot;;</span><br><span class=\"line\">      var s = document.getElementsByTagName(&quot;script&quot;)[0]; </span><br><span class=\"line\">      s.parentNode.insertBefore(hm, s);</span><br><span class=\"line\">    &#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这段代码的作用是用于在用户的网站上集成百度统计（Baidu Analytics），以便收集访问数据和用户行为信息，为网站的运营和分析提供数据支持。接下来我们逐行分析此代码的作用：</li>\n</ul>\n<ol>\n<li><code>if theme.baidu_analytics</code>：先判断是否设置了<code>baidu_analytics</code>，如果是，则继续执行后面的代码，否则跳过本段代码块。</li>\n<li><code>script.</code>：代表这是一段JavaScript脚本。</li>\n<li><code>var _hmt = _hmt || [];</code>：声明一个全局变量<code>_hmt</code>，如果该变量已存在，则直接将其赋值为自身，如果不存在，则将其赋值为空数组。</li>\n<li><code>(function() &#123; ... &#125;)();</code>：使用匿名函数立即把该函数作为表达式执行，不会在全局范围内定义变量，可以保证插件逻辑与项目逻辑没有任何干扰。</li>\n<li><code> var hm = document.createElement(&quot;script&quot;);</code>：使用<code>document.createElement</code>方法创建一个<code>&lt;script&gt;</code>元素，即创建一个script标签。</li>\n<li><code>hm.src = &quot;https://hm.baidu.com/hm.js?!&#123;theme.baidu_analytics&#125;&quot;;</code>：设置百度统计脚本的<code>src</code>属性，其中<code>theme.baidu_analytics</code>是Vue中的动态属性，用于获取用户设置的百度统计统计ID。</li>\n<li><code>var s = document.getElementsByTagName(&quot;script&quot;)[0];</code>：获取页面上第一个<code>&lt;script&gt;</code>元素。</li>\n<li><code>s.parentNode.insertBefore(hm, s);</code>：将新创建的<code>&lt;script&gt;</code>元素插入到<code>s</code>元素之前，即在页面上引入百度统计的JS脚本文件，以完成数据收集的功能。</li>\n</ol>\n<p><strong>后来，我在<a href=\"https://butterfly.js.org/posts/ceeb73f/#%E5%9C%A8%E7%B6%AB%E8%81%8A%E5%A4%A9\">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a>找到了相关配置方法</strong></p>\n<img src=\"/images/hexoConfigNote/image-20230527173207803.png\" alt=\"image-20230527173207803\" style=\"zoom: 67%;\">\n\n<p><strong>注意！！不是复制一整段代码！！而是</strong></p>\n<p><img src=\"/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png\" alt=\"Snipaste_2023-05-27_17-56-31\"></p>\n<h2 id=\"8、加速Hexo网站的加载速度\"><a href=\"#8、加速Hexo网站的加载速度\" class=\"headerlink\" title=\"8、加速Hexo网站的加载速度\"></a>8、加速Hexo网站的加载速度</h2><p><a href=\"https://so.csdn.net/so/search?q=hexo&spm=1001.2101.3001.7020\">hexo</a>-offline-popuphexo-offline-popup 是一个 <a href=\"https://hexo.io/\">hexo</a> 插件， 它可加速您的Hexo网站的加载速度，以及网站内容更新弹窗提示。</p>\n<p>参考：<a href=\"https://blog.csdn.net/weixin_58068682/article/details/116613947\">(90条消息) Hexo博客技巧：提升博客访问速度_基于github搭建的hexo博客如何加速_Chak Aciano的博客-CSDN博客</a></p>\n<h2 id=\"9、首页顶部-3-大分类配置\"><a href=\"#9、首页顶部-3-大分类配置\" class=\"headerlink\" title=\"9、首页顶部 3 大分类配置\"></a>9、首页顶部 3 大分类配置</h2><p><a href=\"https://blog.anheyu.com/docs/site-configuration3.html#%E9%A6%96%E9%A1%B5%E9%A1%B6%E9%83%A8-3-%E5%A4%A7%E5%88%86%E7%B1%BB%E9%85%8D%E7%BD%AE\">站点基础配置(三) | 安知鱼主题指南 (anheyu.com)</a></p>\n<ul>\n<li>创建分类页</li>\n<li>在<code>/_posts/</code>中创建文章，文章顶部配置</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">categories: 生活日常</span><br></pre></td></tr></table></figure>","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"excerpt":"","more":"<h1 id=\"搭建Bolg全过程记录\"><a href=\"#搭建Bolg全过程记录\" class=\"headerlink\" title=\"搭建Bolg全过程记录\"></a>搭建Bolg全过程记录</h1><h2 id=\"1、Hexo-GithubPage-阿里云域名配置\"><a href=\"#1、Hexo-GithubPage-阿里云域名配置\" class=\"headerlink\" title=\"1、Hexo+GithubPage+阿里云域名配置\"></a>1、Hexo+GithubPage+阿里云域名配置</h2><h3 id=\"搭建过程这个博主说的比较清楚：\"><a href=\"#搭建过程这个博主说的比较清楚：\" class=\"headerlink\" title=\"搭建过程这个博主说的比较清楚：\"></a>搭建过程这个博主说的比较清楚：</h3><p><a href=\"https://zhuanlan.zhihu.com/p/60578464\">使用 Hexo+GitHub 搭建个人免费博客教程（小白向） - 知乎 (zhihu.com)</a></p>\n<h3 id=\"Hexo-GithubPage搭建原理：\"><a href=\"#Hexo-GithubPage搭建原理：\" class=\"headerlink\" title=\"Hexo+GithubPage搭建原理：\"></a>Hexo+GithubPage搭建原理：</h3><p>在本地撰写 Markdown 格式文章后，通过 Hexo 解析文档，渲染生成具有主题样式的 HTML 静态网页，再推送到 GitHub 上完成博文的发布。</p>\n<img src=\"/images/hexoConfigNote/image-20230526214207511.png\" alt=\"image-20230526214207511\" style=\"zoom:80%;\">\n\n<h3 id=\"访问网址\"><a href=\"#访问网址\" class=\"headerlink\" title=\"访问网址\"></a>访问网址</h3><p>deploy到Github上之后就可以通过<a href=\"https://用户名.github.io/\">https://用户名.github.io</a>来访问你的博客了</p>\n<p>也可以通过<strong>域名</strong>来访问，在阿里云上购买一个即可。</p>\n<h3 id=\"Hexo-博客文件夹目录结构如下：\"><a href=\"#Hexo-博客文件夹目录结构如下：\" class=\"headerlink\" title=\"Hexo 博客文件夹目录结构如下：\"></a>Hexo 博客文件夹目录结构如下：</h3><p><img src=\"/images/hexoConfigNote/v2-264c75c0e493ae8cc5f283567c64ff2c_720w.webp\" alt=\"img\"></p>\n<h3 id=\"config-yml文件的配置-Hexo\"><a href=\"#config-yml文件的配置-Hexo\" class=\"headerlink\" title=\"_config.yml文件的配置 | Hexo\"></a>_config.yml文件的<a href=\"https://hexo.io/zh-cn/docs/configuration.html\">配置 | Hexo</a></h3><ul>\n<li>注意：仅仅注释掉某些配置并不会引起页面改变，除非改变配置的值！！</li>\n</ul>\n<img src=\"/images/hexoConfigNote/image-20230526214721316.png\" alt=\"image-20230526214721316\" style=\"zoom:50%;\">\n\n<p>注释掉之后照样显示：</p>\n<p><img src=\"/images/hexoConfigNote/image-20230526214734538.png\" alt=\"image-20230526214734538\"></p>\n<p>除非删除对应的值：</p>\n<img src=\"/images/hexoConfigNote/image-20230526214745972.png\" alt=\"image-20230526214745972\" style=\"zoom: 50%;\">\n\n<p>此时显示：</p>\n<p><img src=\"/images/hexoConfigNote/image-20230526214802166.png\" alt=\"image-20230526214802166\"></p>\n<h2 id=\"2、Hexo常用命令\"><a href=\"#2、Hexo常用命令\" class=\"headerlink\" title=\"2、Hexo常用命令\"></a>2、Hexo常用命令</h2><h3 id=\"搭建相关\"><a href=\"#搭建相关\" class=\"headerlink\" title=\"搭建相关\"></a>搭建相关</h3><ul>\n<li>初始化</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init [folder]\t #新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行下面命令。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean \t\t    #清除缓存文件 (db.json) 和已生成的静态文件 (public)。</span><br></pre></td></tr></table></figure>\n\n<p>简写成下面这样不会删除public文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo c\t</span><br></pre></td></tr></table></figure>\n\n<p>简写成下面这样会删除public文件夹</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo cl</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>生成网站静态文件到默认设置的  <code>public </code> 文件夹。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo generate\t\t#Hexo 引入了差分机制，如果 public 目录存在，那么 hexo g 只会重新生成改动的文件</span><br><span class=\"line\">hexo generate -f\t#强制重新生成文件,使用该参数的效果接近 hexo clean &amp;&amp; hexo generate</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>部署网站到 <code>github</code> 上</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo deploy\t\t\t#可以在 _config.yml 文件中配置 deploy 的相关参数</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>启动本地服务器，用于预览主题。预览的同时可以修改文章内容或主题代码，保存后刷新页面即可；但是对 Hexo 根目录 _config.yml 的修改，需要重启本地服务器后才能预览效果。</p>\n<p>如果你还没有部署到github上，还想在本地改改，这个方便你调试预览。</p>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo server\t\t# 默认情况下，访问网址为： http://localhost:4000/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"发布文章\"><a href=\"#发布文章\" class=\"headerlink\" title=\"发布文章\"></a>发布文章</h3><p><strong>文章可以拥有如下属性：</strong></p>\n<img src=\"/images/hexoConfigNote/image-20230526214839842.png\" alt=\"image-20230526214839842\" style=\"zoom:67%;\">\n\n<ul>\n<li><p>新建一篇文章。如果没有设置 <code>layout</code> 的话，默认使用  _config.yml 中的 <code>default_layout</code> 参数代替。如果标题包含<strong>空格</strong>的话，请使用引号括起来。</p>\n<p>对于独立页面来说，Hexo 会创建一个以标题为名字的目录，并在目录中放置一个 <code>index.md</code> 文件。</p>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new [layout] &lt;title&gt;\t# 目录位置：source/_posts/title</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">title是必不可少的</span></span><br><span class=\"line\">hexo new page --path about/me &quot;About me&quot;\t#创建一个 source/about/me.md 文件，同时 title 为 &quot;About me&quot;</span><br><span class=\"line\">hexo new page --path about/me\t\t\t   #创建 source/_posts/about/me.md，同时 title 为 &quot;page&quot;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>生成草稿，会在source&#x2F;_drafts目录下生成一个new-draft.md文件。但是这个文件不被显示在页面上，链接也访问不到。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new draft &quot;new draft&quot;\t</span><br><span class=\"line\">hexo server --drafts\t\t\t\t#预览草稿</span><br><span class=\"line\">hexo publish [layout] &lt;filename&gt;\t #把草稿变成文章，或者页面</span><br></pre></td></tr></table></figure>\n\n<p>参考：</p>\n<p><a href=\"https://hexo.io/zh-cn/docs/commands.html\">指令 | Hexo</a><br><a href=\"https://www.jianshu.com/p/a2d298e26dcd\">Hexo 最常用的几个命令 - 简书 (jianshu.com)</a></p>\n<h2 id=\"3、选择Hexo-Theme\"><a href=\"#3、选择Hexo-Theme\" class=\"headerlink\" title=\"3、选择Hexo Theme\"></a>3、选择Hexo Theme</h2><p>我选的是<a href=\"https://anzhiy.cn/\">安知鱼 - 生活明朗, 万物可爱 (anzhiy.cn)</a></p>\n<ul>\n<li><p>安装指南是在<a href=\"https://anzhiy.cn/docs/quick-start.html#%F0%9F%92%BB-%E5%AE%89%E8%A3%9D\">安知鱼主题指南 (anzhiy.cn)</a></p>\n</li>\n<li><p>安装步骤是参考的他的视频教程<a href=\"https://www.bilibili.com/video/BV1Rs4y127hu/?spm_id_from=333.788&vd_source=592e40e3e456cbca5e66df60b04bf2d3\">anzhiyu主题安装_哔哩哔哩_bilibili</a></p>\n</li>\n</ul>\n<p>配置：<a href=\"https://www.bilibili.com/video/BV1Cv4y1n7FW/?spm_id_from=pageDriver&vd_source=592e40e3e456cbca5e66df60b04bf2d3\">安知鱼主题社交图标配置_哔哩哔哩_bilibili</a></p>\n<ul>\n<li>配置可以参考anzhiyu的文档：<a href=\"https://blog.anheyu.com/docs/\">安知鱼主题指南 (anheyu.com)</a></li>\n<li>也可以参考Butterfly(更全)：<a href=\"https://butterfly.js.org/\">Butterfly - A Simple and Card UI Design theme for Hexo</a></li>\n<li>配置查文档的话还是参考Butterfly，anzhiyu很多都没有</li>\n</ul>\n<h3 id=\"自定义头像（最开始刚加载的地方）\"><a href=\"#自定义头像（最开始刚加载的地方）\" class=\"headerlink\" title=\"自定义头像（最开始刚加载的地方）\"></a>自定义头像（最开始刚加载的地方）</h3><img src=\"/images/hexoConfigNote/image-20230526214857770.png\" alt=\"image-20230526214857770\" style=\"zoom:67%;\">\n\n<p>Loading Animation (加载动画)中</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Loading Animation (加载动画)</span></span><br><span class=\"line\"><span class=\"attr\">preloader:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># source</span></span><br><span class=\"line\">  <span class=\"comment\"># 1. fullpage-loading</span></span><br><span class=\"line\">  <span class=\"comment\"># 2. pace (progress bar)</span></span><br><span class=\"line\">  <span class=\"comment\"># else all</span></span><br><span class=\"line\">  <span class=\"attr\">source:</span> <span class=\"number\">3</span></span><br><span class=\"line\">  <span class=\"comment\"># pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class=\"line\">  <span class=\"attr\">pace_css_url:</span></span><br><span class=\"line\">  <span class=\"attr\">avatar:</span> <span class=\"string\">/img/avatar.jpg</span> <span class=\"comment\"># 自定义头像</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"页面结构\"><a href=\"#页面结构\" class=\"headerlink\" title=\"页面结构\"></a>页面结构</h3><p><img src=\"/images/hexoConfigNote/image-20230526214910920.png\" alt=\"image-20230526214910920\"></p>\n<h3 id=\"config-anzhiyu-yml文件结构\"><a href=\"#config-anzhiyu-yml文件结构\" class=\"headerlink\" title=\"_config.anzhiyu.yml文件结构\"></a>_config.anzhiyu.yml文件结构</h3><ul>\n<li><p>nav（左上角目录）</p>\n<img src=\"/images/hexoConfigNote/image-20230526214924274.png\" alt=\"image-20230526214924274\" style=\"zoom:50%;\">\n</li>\n<li><p>Code Blocks (代码相关)</p>\n</li>\n<li><p>search (搜索)</p>\n</li>\n</ul>\n<img src=\"/images/hexoConfigNote/image-20230526214939187.png\" alt=\"image-20230526214939187\" style=\"zoom:80%;\">\n\n<img src=\"/images/hexoConfigNote/image-20230526214948330.png\" alt=\"image-20230526214948330\" style=\"zoom:50%;\">\n\n<ul>\n<li>Math (数学)</li>\n<li>Image (图片设置)<ul>\n<li>可以设置<strong>网站图标</strong>：<code>Favicon</code>（网站图标）</li>\n<li>在这里设置**头像(<code>avatar</code>)**没用，头像(<code>avatar</code>)设置应该在：Loading Animation (加载动画)中设置</li>\n<li>index_img</li>\n<li>default_top_img</li>\n<li>archive_img</li>\n<li>tag_img</li>\n<li>category_img</li>\n</ul>\n</li>\n<li>Post（文章设置）</li>\n<li>Share System (分享功能)</li>\n<li>Comments System（评论设置）</li>\n<li>Chat Services（聊天区）</li>\n<li>Footer Settings（页脚设置）</li>\n<li>Analysis</li>\n<li>Advertisement（广告）</li>\n<li>Verification (站长验证)</li>\n<li>Beautify&#x2F;Effect (美化&#x2F;效果)</li>\n<li>Background effects (背景特效)</li>\n<li>aside (侧边栏)</li>\n<li>Bottom right button (右下角按钮)</li>\n<li>Lightbox (图片大图查看模式)</li>\n<li>Tag Plugins settings (标签外挂)</li>\n<li>other</li>\n</ul>\n<h2 id=\"4、clash优化上传速度\"><a href=\"#4、clash优化上传速度\" class=\"headerlink\" title=\"4、clash优化上传速度\"></a>4、clash优化上传速度</h2><ul>\n<li>安装<code>clash</code>（一定要安在系统盘！！！不能有中文路径！！！确保之前的版本卸载干净），推荐在官网下载解压缩版</li>\n<li>配置方法：<a href=\"https://doc.miyun.app/clash-for-windows/\">Clash for Windows 官网下载、设置教程 🌟 觅云🔥 (miyun.app)</a></li>\n</ul>\n<h2 id=\"5、typora-hexo博客中插入图片\"><a href=\"#5、typora-hexo博客中插入图片\" class=\"headerlink\" title=\"5、typora + hexo博客中插入图片\"></a>5、typora + hexo博客中插入图片</h2><p><a href=\"https://blog.csdn.net/qq_32623363/article/details/100524856\">(90条消息) typora + hexo博客中插入图片__吟游诗人的博客-CSDN博客</a></p>\n<ul>\n<li><p>首先在 <code>hexo &gt; source</code>目录下建一个文件夹叫images，用来保存博客中的图片。</p>\n</li>\n<li><p>打开Typora的 <code>文件 &gt; 偏好设置</code>，进行如下设置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">../../source/images/$&#123;filename&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<img src=\"/images/hexoConfigNote/image-20230526215016301.png\" alt=\"image-20230526215016301\" style=\"zoom:50%;\">\n</li>\n<li><p>格式-&gt;图像-&gt;设置图片根目录</p>\n<img src=\"/images/hexoConfigNote/image-20230526215415503.png\" alt=\"image-20230526215415503\" style=\"zoom:50%;\">\n</li>\n<li><p>记得先在hexo里执行了  <code>hexo new  &lt;title&gt;</code> 再用typora打开.md文件进行编辑，这样图片插入时才会保存在文件夹中。</p>\n</li>\n</ul>\n<h2 id=\"6、每次写Blog时\"><a href=\"#6、每次写Blog时\" class=\"headerlink\" title=\"6、每次写Blog时\"></a>6、每次写Blog时</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new  &lt;title&gt;\t#新建一篇Blog</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>用typora打开<code>source\\_posts\\&lt;title&gt;.md</code>，开始写你的Blog，每次记得保存！</li>\n<li>生成文章页并预览</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo cl\t#清除public文件夹</span><br><span class=\"line\">hexo g\t#生成</span><br><span class=\"line\">hexo s\t#本地预览</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如果觉得已经写好啦，部署到github上吧！</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7、添加百度统计实时观测网站数据\"><a href=\"#7、添加百度统计实时观测网站数据\" class=\"headerlink\" title=\"7、添加百度统计实时观测网站数据\"></a>7、添加百度统计实时观测网站数据</h2><p><strong>一开始我没在<a href=\"https://anzhiy.cn/docs/\">安知鱼主题指南 (anzhiy.cn)</a>找到相关配置方法，所以就自己去看了theme文件夹下面的源码</strong></p>\n<ul>\n<li>在<code>themes\\anzhiyu\\layout\\includes\\head\\analytics.pug</code>文件中我找到了关于<code>baidu_analytics</code>的代码:</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if theme.baidu_analytics</span><br><span class=\"line\">  script.</span><br><span class=\"line\">    var _hmt = _hmt || [];</span><br><span class=\"line\">    (function() &#123;</span><br><span class=\"line\">      var hm = document.createElement(&quot;script&quot;);</span><br><span class=\"line\">      hm.src = &quot;https://hm.baidu.com/hm.js?!&#123;theme.baidu_analytics&#125;&quot;;</span><br><span class=\"line\">      var s = document.getElementsByTagName(&quot;script&quot;)[0]; </span><br><span class=\"line\">      s.parentNode.insertBefore(hm, s);</span><br><span class=\"line\">    &#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这段代码的作用是用于在用户的网站上集成百度统计（Baidu Analytics），以便收集访问数据和用户行为信息，为网站的运营和分析提供数据支持。接下来我们逐行分析此代码的作用：</li>\n</ul>\n<ol>\n<li><code>if theme.baidu_analytics</code>：先判断是否设置了<code>baidu_analytics</code>，如果是，则继续执行后面的代码，否则跳过本段代码块。</li>\n<li><code>script.</code>：代表这是一段JavaScript脚本。</li>\n<li><code>var _hmt = _hmt || [];</code>：声明一个全局变量<code>_hmt</code>，如果该变量已存在，则直接将其赋值为自身，如果不存在，则将其赋值为空数组。</li>\n<li><code>(function() &#123; ... &#125;)();</code>：使用匿名函数立即把该函数作为表达式执行，不会在全局范围内定义变量，可以保证插件逻辑与项目逻辑没有任何干扰。</li>\n<li><code> var hm = document.createElement(&quot;script&quot;);</code>：使用<code>document.createElement</code>方法创建一个<code>&lt;script&gt;</code>元素，即创建一个script标签。</li>\n<li><code>hm.src = &quot;https://hm.baidu.com/hm.js?!&#123;theme.baidu_analytics&#125;&quot;;</code>：设置百度统计脚本的<code>src</code>属性，其中<code>theme.baidu_analytics</code>是Vue中的动态属性，用于获取用户设置的百度统计统计ID。</li>\n<li><code>var s = document.getElementsByTagName(&quot;script&quot;)[0];</code>：获取页面上第一个<code>&lt;script&gt;</code>元素。</li>\n<li><code>s.parentNode.insertBefore(hm, s);</code>：将新创建的<code>&lt;script&gt;</code>元素插入到<code>s</code>元素之前，即在页面上引入百度统计的JS脚本文件，以完成数据收集的功能。</li>\n</ol>\n<p><strong>后来，我在<a href=\"https://butterfly.js.org/posts/ceeb73f/#%E5%9C%A8%E7%B6%AB%E8%81%8A%E5%A4%A9\">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a>找到了相关配置方法</strong></p>\n<img src=\"/images/hexoConfigNote/image-20230527173207803.png\" alt=\"image-20230527173207803\" style=\"zoom: 67%;\">\n\n<p><strong>注意！！不是复制一整段代码！！而是</strong></p>\n<p><img src=\"/images/hexoConfigNote/Snipaste_2023-05-27_17-56-31.png\" alt=\"Snipaste_2023-05-27_17-56-31\"></p>\n<h2 id=\"8、加速Hexo网站的加载速度\"><a href=\"#8、加速Hexo网站的加载速度\" class=\"headerlink\" title=\"8、加速Hexo网站的加载速度\"></a>8、加速Hexo网站的加载速度</h2><p><a href=\"https://so.csdn.net/so/search?q=hexo&spm=1001.2101.3001.7020\">hexo</a>-offline-popuphexo-offline-popup 是一个 <a href=\"https://hexo.io/\">hexo</a> 插件， 它可加速您的Hexo网站的加载速度，以及网站内容更新弹窗提示。</p>\n<p>参考：<a href=\"https://blog.csdn.net/weixin_58068682/article/details/116613947\">(90条消息) Hexo博客技巧：提升博客访问速度_基于github搭建的hexo博客如何加速_Chak Aciano的博客-CSDN博客</a></p>\n<h2 id=\"9、首页顶部-3-大分类配置\"><a href=\"#9、首页顶部-3-大分类配置\" class=\"headerlink\" title=\"9、首页顶部 3 大分类配置\"></a>9、首页顶部 3 大分类配置</h2><p><a href=\"https://blog.anheyu.com/docs/site-configuration3.html#%E9%A6%96%E9%A1%B5%E9%A1%B6%E9%83%A8-3-%E5%A4%A7%E5%88%86%E7%B1%BB%E9%85%8D%E7%BD%AE\">站点基础配置(三) | 安知鱼主题指南 (anheyu.com)</a></p>\n<ul>\n<li>创建分类页</li>\n<li>在<code>/_posts/</code>中创建文章，文章顶部配置</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">categories: 生活日常</span><br></pre></td></tr></table></figure>"},{"title":"vitepress构建我的笔记页面","date":"2023-05-29T16:15:03.000Z","_content":"\n# vitepress构建我的笔记页面\n\n## 前言\n\n- **为什么用vitepress而不是vuepress**：vitepress基于vite构建项目，vuepress基于webpack，vitepress更快。\n- **为什么用yarn而不是npm**：官网用的yarn，而且yarn更快\n\n## 1、初始化\n\n**参考：**[VitePress 手把手完全使用手册 - 掘金 (juejin.cn)](https://juejin.cn/post/7164276166084263972#heading-15)\n\n**参考：**[十分钟用vitepress搭建项目文档 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/605300455)\n\n**官方文档**：[Using Vue in Markdown | VitePress](https://vitepress.dev/guide/using-vue)\n\n- 一开始构建出来的界面出现中文乱码，解决：[(92条消息) VuePress 的md文件内容显示乱码解决方案_吉尔想放假的博客-CSDN博客](https://blog.csdn.net/qq_45611841/article/details/115832233)\n\n### 1.1   docs/index.md 中定义首页\n\n- `VitePress` 的布局整体可以分为 4 种：`doc` 、`page` 、`home` 和 没有任何默认布局（空白页面），布局语法：\n\n```markdown\n\n需要注意的是，下面的语法一定要写在 md 文档的头部才会生效\n---\nlayout: doc（文档页） | page | home（首页）\n---\n\n// 通过此语法可以将整个页面变成空白页面，适合自定义的布局\n{{ $formatter.layout }}\n\n\n```\n\n**示例：**\n\n```markdown\n---\nlayout: home\n\nhero:\n  name: Cocolib\n  text: 我的前端笔记库\n  tagline: \n  image:\n    src: /images/logo.png\n    alt: 网站的 logo 图片\n  actions:\n    - theme: brand\n      text: 快速开始\n      link: /guide/what-is-vitepress\n    - theme: alt\n      text: 在 github 上查看\n      link: https://github.com/vuejs/vitepress\nfeatures:\n  - icon: ⚡️\n    title: 这里是功能区 1\n    details: 这里是功能区 1 详情信息\n  - icon: 🖖\n    title: 这里是功能区 2\n    details: 这里是功能区 2 详情信息\n  - icon: 🛠️\n    title: 这里是功能区 3\n    details: 这里是功能区 3 详情信息\n---\n\n```\n\n\n\n<img src=\"../images/vitepressNote/2023-05-30_094604.png\" alt=\"2023-05-30_094604\" style=\"zoom:67%;\" />\n\n### 1.2  docs/.vitepress/config.js中配置 \n\n1. **导航栏：**`Nav` 配置有两种方式，直接点击跳转和下拉菜单样式。\n\n- `link`：当触发点击事件时跳转的地址；可以是外链也可以是项目内的路径。\n- `activeMatch`： 需要被高亮的 `nav` 。\n- `text`：显示到页面的信息。\n\n2. **社交链接**：`socialLinks`\n\n- `icon`：`discord` `facebook` `github` `instagram` `linkedin` `slack` `twitter` `youtube` 或者 `svg` 字符串\n- `link`：跳转链接。\n\n<img src=\"../images/vitepressNote/image-20230530084747612.png\" alt=\"image-20230530084747612\" style=\"zoom:67%;\" />\n\n3. **侧边栏导航：**`Sidebar`  同样有两种配置方式\n\n- `text`：侧边栏块的 `title`。\n- `items`：侧边栏的每一项，`text` 为标题；`link` 为跳转地址。\n- `collapsible`：菜单是否为可折叠的 `Boolean`。\n- `collapsed`：是否默认折叠 `Boolean` 只有配置 `collapsiable` 时此配置才会生效。\n\n<img src=\"../images/vitepressNote/image-20230530084853480.png\" alt=\"image-20230530084853480\" style=\"zoom:67%;\" />\n\n4. **静态资源与导航路由的路径书写规则**\n\n- **静态资源**：推荐放入 `/docs/public` 文件夹中。随后在 `md` 中使用时以 `![image](/images/xxx.png)`。 `/` 以 `public` 开始。\n\n- **路径配置规则**：以 `/docs` 为根目录，进行配置；`/` 以 `docs` 开始。\n\n5. **上下翻页** \n\n此功能虽是默认提供，也可以通过配置来定制默认的文字。\n\n```js\ndocFooter: { prev: '上一篇', next: '下一篇' }\n```\n\n6. **在 `Github` 编辑此页**\n\n```js\n editLink: {\n      pattern: 'https://github.com/vuejs/vitepress/edit/main/docs/:path',\n      text: 'Edit this page on GitHub'\n    }\n```\n\n7. **最后更新时间**\n\n```js\nlastUpdated: true,\nthemeConfig: {\n\tlastUpdatedText: \"最近更新时间\"\n}\n```\n\n8. **主 `title` 内容与图片配置**\n\n```js\n title: '自定义的 title',\n themeConfig: {\n    logo: '/test.jpg',\n  }\n```\n\n![2023-05-30_093958](../images/vitepressNote/2023-05-30_093958.png)\n\n9. **打包后输出目录的配置**\n\n```js\noutDir: '../dist'\n```\n\n10. **`markdown` 主题配置**\n\n```\nmarkdown: {             //markdown配置\n        theme: 'material-palenight',//md主题\n        lineNumbers: true//md 加行号\n},\n```\n\n11. **`description` 配置**\n\n会显示页面中 `<meta name=\"description\" content=\"xxxx\">` \n\n```js\ndescription: '自定义的 description',\n```\n\n12. **页脚配置**\n\n页脚通过 `footer` 进行配置。**如果 `Sidebar` 存在则页脚不会存在**\n\n```\nthemeConfig: {\n    footer: {\n      message: 'Released under the MIT License.',\n      copyright: 'Copyright © 2019-present Evan You'\n    }\n  }\n```\n\n13. **目录**\n\n```js\noutlineTitle: '目录'\n```\n\n14. **`head`配置**\n\n这里是给网页配置图标\n\n```js\n  head:[\n        ['link', { rel: 'icon', href: '/favicon.ico' }]\n   ]\n```\n\n\n\n## 2、部署到GitHub中\n\n### 2.1 一个域名如何部署两个网站（需要宝塔）\n\n**参考：**[10分钟让你彻底理解如何配置子域名来部署多个项目 - 掘金 (juejin.cn)](https://juejin.cn/post/7064024606276845581)\n\n因为我的`Blog`是部署在了`github page`上，并且绑定了我之前申请的域名，这个网站的话，我也想部署在我的域名里。\n\n1. **添加CNAME记录**\n\n在域名服务商那里，加一个，把需要配置的子域名指向根域对应的主机名即可。\n\n<img src=\"../images/vitepressNote/image-20230530105441661.png\" alt=\"image-20230530105441661\" style=\"zoom:67%;\" />\n\n- **什么情况下会用到CNAME记录？**\n\n如果需要将域名指向另一个域名，再由另一个域名提供ip地址，就需要添加CNAME记录\n最常用到CNAME的情况包括：**做CDN，配置子域名**\n\n- **点击添加记录**\n\n**记录类型：**选择 `CNAME`\n\n**主机记录：**填子域名（比如需要添加 myblog.zhangjiancong.top的解析，只需要在主机记录处填写 myblog 即可；如果添加 zhangjiancong.top的解析 的解析，主机记录直接留空，系统会自动填一个“@”到输入框内）。\n\n**解析线路：**默认即可（如果不选默认会导致部分特定用户无法解析；在上图中的作用为：除了联通用户之外的所有用户都可正常解析）\n\n**记录值：**CNAME 指向的域名，只可以填写域名，记录生成后会自动在域名后面补一个“.”，这是正常现象\n\n**TTL：**添加时系统会自动生成，默认为600秒（TTL为缓存时间，数值越小，修改记录各地生效时间越快）。\n\n**……后来发现需要宝塔，我就没用了**\n\n\n\n### 2.2 如何拥有多个GitHub Pages\n\n**参考：**[如何拥有多个GitHub Pages - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/183977963)\n\n**官方文档：**[关于 GitHub Pages - GitHub 文档](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages)\n\n有三种类型的 GitHub Pages 站点：**项目**、**用户**和**组织**。 项目站点连接到 GitHub 上托管的特定项目。 用户和组织站点连接到特定的 GitHub 帐户。\n\n- 要发布用户站点，必须创建名为 `<user>.github.io` 的用户帐户所拥有的仓库。 \n- 要发布组织站点，必须创建名为 `<organization>.github.io` 的组织所拥有的仓库。\n-  除非您使用自定义域，否则用户和组织站点位于 `http(s)://<username>.github.io` 或 `http(s)://<organization>.github.io`。\n\n- 项目站点的源文件与其项目存储在同一个仓库中。 除非您使用自定义域，否则项目站点位于 `http(s)://<user>.github.io/<repository>` 或 `http(s)://<organization>.github.io/<repository>`。\n\n您只能为每个 GitHub 帐户创建一个用户或组织站点。 项目站点（无论是组织还是用户帐户拥有）没有限制。\n\n1. 新建一个仓库，名字随意，我这里是publish的，不知道private行不行\n2. 进入仓库主页，点击`Settings`，点击`Pages`\n\n<img src=\"../images/vitepressNote/2023-05-30_135506.png\" alt=\"2023-05-30_135506\" style=\"zoom:33%;\" />\n\n3. 选一个分支，保存\n\n<img src=\"../images/vitepressNote/image-20230530135914934.png\" alt=\"image-20230530135914934\" style=\"zoom:50%;\" />\n\n4. 等待页面加载，会出现一个`Custom domain`，填入之前在域名商中注册过的**子域名**\n\n<img src=\"../images/vitepressNote/image-20230530140144181.png\" alt=\"image-20230530140144181\" style=\"zoom:50%;\" />\n\n<img src=\"../images/vitepressNote/image-20230530140358622.png\" alt=\"image-20230530140358622\" style=\"zoom:46%;\" />\n\n\n\n### 2.3 部署vitepress到GitHub上\n\n1. 根目录新建 `deploy.sh` 文件。并复制以下内容稍微修改。\n\n```sh\n#!/usr/bin/env sh\n\n# 确保脚本抛出遇到的错误\n# set -e\t\t添加这句报错！！！！！！！！！！\n\n# 删除文件需要根据实际打包的目录进行删除\nrm -rf docs/.vitepress/dist/\n\n# 生成静态文件\nyarn docs:build\n\n# 进入生成的文件夹\ncd docs/.vitepress/dist\n\n# 如果是发布到自定义域名\n# echo 'www.example.com' > CNAME\n\ngit init\ngit add -A\ngit commit -m 'deploy'\n\n# 如果发布到 https://<USERNAME>.github.io 修改仓库地址\n# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git main:master  #注意这里我的默认分支是：main，要推送到master分支去\n\ncd -\n\n```\n\n2. **复制代码到`config.js`，注意 `Repository name` 和本地的 `base` 配置相同**（后来删掉了，因为这样会让页面没有CCS样式）\n\n```js\nexport default defineConfig({\n  base: '/your-github-repository/'\n})\n```\n\n3. `package.json` 中新增脚本并执行，等个三两分钟直接访问 `https://your-github.github.io/your-github-repository/`。\n\n```json\njson复制代码\"scripts\": {\n  \"deploy\": \"bash deploy.sh\"\n}\n```\n\n如果遇到异常 参考 [VuePress 搭建组件库文档](https://juejin.cn/post/7064746265266880549#heading-18) [VuePress 部署](https://link.juejin.cn?target=https%3A%2F%2Fvuepress.vuejs.org%2Fzh%2Fguide%2Fdeploy.html)\n\n3. `yarn docs:build `构建项目\n4. 我在VScode的终端操作总是报各种各样的错，只能在项目的根目录`git bash here` ，然后输入` bash deploy.sh`\n\n**上线成功！！**\n","source":"_posts/vitepressNote.md","raw":"---\ntitle: vitepress构建我的笔记页面\ndate: 2023-05-30 00:15:03\ntags: vitepress \n---\n\n# vitepress构建我的笔记页面\n\n## 前言\n\n- **为什么用vitepress而不是vuepress**：vitepress基于vite构建项目，vuepress基于webpack，vitepress更快。\n- **为什么用yarn而不是npm**：官网用的yarn，而且yarn更快\n\n## 1、初始化\n\n**参考：**[VitePress 手把手完全使用手册 - 掘金 (juejin.cn)](https://juejin.cn/post/7164276166084263972#heading-15)\n\n**参考：**[十分钟用vitepress搭建项目文档 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/605300455)\n\n**官方文档**：[Using Vue in Markdown | VitePress](https://vitepress.dev/guide/using-vue)\n\n- 一开始构建出来的界面出现中文乱码，解决：[(92条消息) VuePress 的md文件内容显示乱码解决方案_吉尔想放假的博客-CSDN博客](https://blog.csdn.net/qq_45611841/article/details/115832233)\n\n### 1.1   docs/index.md 中定义首页\n\n- `VitePress` 的布局整体可以分为 4 种：`doc` 、`page` 、`home` 和 没有任何默认布局（空白页面），布局语法：\n\n```markdown\n\n需要注意的是，下面的语法一定要写在 md 文档的头部才会生效\n---\nlayout: doc（文档页） | page | home（首页）\n---\n\n// 通过此语法可以将整个页面变成空白页面，适合自定义的布局\n{{ $formatter.layout }}\n\n\n```\n\n**示例：**\n\n```markdown\n---\nlayout: home\n\nhero:\n  name: Cocolib\n  text: 我的前端笔记库\n  tagline: \n  image:\n    src: /images/logo.png\n    alt: 网站的 logo 图片\n  actions:\n    - theme: brand\n      text: 快速开始\n      link: /guide/what-is-vitepress\n    - theme: alt\n      text: 在 github 上查看\n      link: https://github.com/vuejs/vitepress\nfeatures:\n  - icon: ⚡️\n    title: 这里是功能区 1\n    details: 这里是功能区 1 详情信息\n  - icon: 🖖\n    title: 这里是功能区 2\n    details: 这里是功能区 2 详情信息\n  - icon: 🛠️\n    title: 这里是功能区 3\n    details: 这里是功能区 3 详情信息\n---\n\n```\n\n\n\n<img src=\"../images/vitepressNote/2023-05-30_094604.png\" alt=\"2023-05-30_094604\" style=\"zoom:67%;\" />\n\n### 1.2  docs/.vitepress/config.js中配置 \n\n1. **导航栏：**`Nav` 配置有两种方式，直接点击跳转和下拉菜单样式。\n\n- `link`：当触发点击事件时跳转的地址；可以是外链也可以是项目内的路径。\n- `activeMatch`： 需要被高亮的 `nav` 。\n- `text`：显示到页面的信息。\n\n2. **社交链接**：`socialLinks`\n\n- `icon`：`discord` `facebook` `github` `instagram` `linkedin` `slack` `twitter` `youtube` 或者 `svg` 字符串\n- `link`：跳转链接。\n\n<img src=\"../images/vitepressNote/image-20230530084747612.png\" alt=\"image-20230530084747612\" style=\"zoom:67%;\" />\n\n3. **侧边栏导航：**`Sidebar`  同样有两种配置方式\n\n- `text`：侧边栏块的 `title`。\n- `items`：侧边栏的每一项，`text` 为标题；`link` 为跳转地址。\n- `collapsible`：菜单是否为可折叠的 `Boolean`。\n- `collapsed`：是否默认折叠 `Boolean` 只有配置 `collapsiable` 时此配置才会生效。\n\n<img src=\"../images/vitepressNote/image-20230530084853480.png\" alt=\"image-20230530084853480\" style=\"zoom:67%;\" />\n\n4. **静态资源与导航路由的路径书写规则**\n\n- **静态资源**：推荐放入 `/docs/public` 文件夹中。随后在 `md` 中使用时以 `![image](/images/xxx.png)`。 `/` 以 `public` 开始。\n\n- **路径配置规则**：以 `/docs` 为根目录，进行配置；`/` 以 `docs` 开始。\n\n5. **上下翻页** \n\n此功能虽是默认提供，也可以通过配置来定制默认的文字。\n\n```js\ndocFooter: { prev: '上一篇', next: '下一篇' }\n```\n\n6. **在 `Github` 编辑此页**\n\n```js\n editLink: {\n      pattern: 'https://github.com/vuejs/vitepress/edit/main/docs/:path',\n      text: 'Edit this page on GitHub'\n    }\n```\n\n7. **最后更新时间**\n\n```js\nlastUpdated: true,\nthemeConfig: {\n\tlastUpdatedText: \"最近更新时间\"\n}\n```\n\n8. **主 `title` 内容与图片配置**\n\n```js\n title: '自定义的 title',\n themeConfig: {\n    logo: '/test.jpg',\n  }\n```\n\n![2023-05-30_093958](../images/vitepressNote/2023-05-30_093958.png)\n\n9. **打包后输出目录的配置**\n\n```js\noutDir: '../dist'\n```\n\n10. **`markdown` 主题配置**\n\n```\nmarkdown: {             //markdown配置\n        theme: 'material-palenight',//md主题\n        lineNumbers: true//md 加行号\n},\n```\n\n11. **`description` 配置**\n\n会显示页面中 `<meta name=\"description\" content=\"xxxx\">` \n\n```js\ndescription: '自定义的 description',\n```\n\n12. **页脚配置**\n\n页脚通过 `footer` 进行配置。**如果 `Sidebar` 存在则页脚不会存在**\n\n```\nthemeConfig: {\n    footer: {\n      message: 'Released under the MIT License.',\n      copyright: 'Copyright © 2019-present Evan You'\n    }\n  }\n```\n\n13. **目录**\n\n```js\noutlineTitle: '目录'\n```\n\n14. **`head`配置**\n\n这里是给网页配置图标\n\n```js\n  head:[\n        ['link', { rel: 'icon', href: '/favicon.ico' }]\n   ]\n```\n\n\n\n## 2、部署到GitHub中\n\n### 2.1 一个域名如何部署两个网站（需要宝塔）\n\n**参考：**[10分钟让你彻底理解如何配置子域名来部署多个项目 - 掘金 (juejin.cn)](https://juejin.cn/post/7064024606276845581)\n\n因为我的`Blog`是部署在了`github page`上，并且绑定了我之前申请的域名，这个网站的话，我也想部署在我的域名里。\n\n1. **添加CNAME记录**\n\n在域名服务商那里，加一个，把需要配置的子域名指向根域对应的主机名即可。\n\n<img src=\"../images/vitepressNote/image-20230530105441661.png\" alt=\"image-20230530105441661\" style=\"zoom:67%;\" />\n\n- **什么情况下会用到CNAME记录？**\n\n如果需要将域名指向另一个域名，再由另一个域名提供ip地址，就需要添加CNAME记录\n最常用到CNAME的情况包括：**做CDN，配置子域名**\n\n- **点击添加记录**\n\n**记录类型：**选择 `CNAME`\n\n**主机记录：**填子域名（比如需要添加 myblog.zhangjiancong.top的解析，只需要在主机记录处填写 myblog 即可；如果添加 zhangjiancong.top的解析 的解析，主机记录直接留空，系统会自动填一个“@”到输入框内）。\n\n**解析线路：**默认即可（如果不选默认会导致部分特定用户无法解析；在上图中的作用为：除了联通用户之外的所有用户都可正常解析）\n\n**记录值：**CNAME 指向的域名，只可以填写域名，记录生成后会自动在域名后面补一个“.”，这是正常现象\n\n**TTL：**添加时系统会自动生成，默认为600秒（TTL为缓存时间，数值越小，修改记录各地生效时间越快）。\n\n**……后来发现需要宝塔，我就没用了**\n\n\n\n### 2.2 如何拥有多个GitHub Pages\n\n**参考：**[如何拥有多个GitHub Pages - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/183977963)\n\n**官方文档：**[关于 GitHub Pages - GitHub 文档](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages)\n\n有三种类型的 GitHub Pages 站点：**项目**、**用户**和**组织**。 项目站点连接到 GitHub 上托管的特定项目。 用户和组织站点连接到特定的 GitHub 帐户。\n\n- 要发布用户站点，必须创建名为 `<user>.github.io` 的用户帐户所拥有的仓库。 \n- 要发布组织站点，必须创建名为 `<organization>.github.io` 的组织所拥有的仓库。\n-  除非您使用自定义域，否则用户和组织站点位于 `http(s)://<username>.github.io` 或 `http(s)://<organization>.github.io`。\n\n- 项目站点的源文件与其项目存储在同一个仓库中。 除非您使用自定义域，否则项目站点位于 `http(s)://<user>.github.io/<repository>` 或 `http(s)://<organization>.github.io/<repository>`。\n\n您只能为每个 GitHub 帐户创建一个用户或组织站点。 项目站点（无论是组织还是用户帐户拥有）没有限制。\n\n1. 新建一个仓库，名字随意，我这里是publish的，不知道private行不行\n2. 进入仓库主页，点击`Settings`，点击`Pages`\n\n<img src=\"../images/vitepressNote/2023-05-30_135506.png\" alt=\"2023-05-30_135506\" style=\"zoom:33%;\" />\n\n3. 选一个分支，保存\n\n<img src=\"../images/vitepressNote/image-20230530135914934.png\" alt=\"image-20230530135914934\" style=\"zoom:50%;\" />\n\n4. 等待页面加载，会出现一个`Custom domain`，填入之前在域名商中注册过的**子域名**\n\n<img src=\"../images/vitepressNote/image-20230530140144181.png\" alt=\"image-20230530140144181\" style=\"zoom:50%;\" />\n\n<img src=\"../images/vitepressNote/image-20230530140358622.png\" alt=\"image-20230530140358622\" style=\"zoom:46%;\" />\n\n\n\n### 2.3 部署vitepress到GitHub上\n\n1. 根目录新建 `deploy.sh` 文件。并复制以下内容稍微修改。\n\n```sh\n#!/usr/bin/env sh\n\n# 确保脚本抛出遇到的错误\n# set -e\t\t添加这句报错！！！！！！！！！！\n\n# 删除文件需要根据实际打包的目录进行删除\nrm -rf docs/.vitepress/dist/\n\n# 生成静态文件\nyarn docs:build\n\n# 进入生成的文件夹\ncd docs/.vitepress/dist\n\n# 如果是发布到自定义域名\n# echo 'www.example.com' > CNAME\n\ngit init\ngit add -A\ngit commit -m 'deploy'\n\n# 如果发布到 https://<USERNAME>.github.io 修改仓库地址\n# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git main:master  #注意这里我的默认分支是：main，要推送到master分支去\n\ncd -\n\n```\n\n2. **复制代码到`config.js`，注意 `Repository name` 和本地的 `base` 配置相同**（后来删掉了，因为这样会让页面没有CCS样式）\n\n```js\nexport default defineConfig({\n  base: '/your-github-repository/'\n})\n```\n\n3. `package.json` 中新增脚本并执行，等个三两分钟直接访问 `https://your-github.github.io/your-github-repository/`。\n\n```json\njson复制代码\"scripts\": {\n  \"deploy\": \"bash deploy.sh\"\n}\n```\n\n如果遇到异常 参考 [VuePress 搭建组件库文档](https://juejin.cn/post/7064746265266880549#heading-18) [VuePress 部署](https://link.juejin.cn?target=https%3A%2F%2Fvuepress.vuejs.org%2Fzh%2Fguide%2Fdeploy.html)\n\n3. `yarn docs:build `构建项目\n4. 我在VScode的终端操作总是报各种各样的错，只能在项目的根目录`git bash here` ，然后输入` bash deploy.sh`\n\n**上线成功！！**\n","slug":"vitepressNote","published":1,"updated":"2023-06-07T09:39:38.517Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clj5sc47r000nf4ss7z1kcwp4","content":"<h1 id=\"vitepress构建我的笔记页面\"><a href=\"#vitepress构建我的笔记页面\" class=\"headerlink\" title=\"vitepress构建我的笔记页面\"></a>vitepress构建我的笔记页面</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><ul>\n<li><strong>为什么用vitepress而不是vuepress</strong>：vitepress基于vite构建项目，vuepress基于webpack，vitepress更快。</li>\n<li><strong>为什么用yarn而不是npm</strong>：官网用的yarn，而且yarn更快</li>\n</ul>\n<h2 id=\"1、初始化\"><a href=\"#1、初始化\" class=\"headerlink\" title=\"1、初始化\"></a>1、初始化</h2><p><strong>参考：</strong><a href=\"https://juejin.cn/post/7164276166084263972#heading-15\">VitePress 手把手完全使用手册 - 掘金 (juejin.cn)</a></p>\n<p><strong>参考：</strong><a href=\"https://zhuanlan.zhihu.com/p/605300455\">十分钟用vitepress搭建项目文档 - 知乎 (zhihu.com)</a></p>\n<p><strong>官方文档</strong>：<a href=\"https://vitepress.dev/guide/using-vue\">Using Vue in Markdown | VitePress</a></p>\n<ul>\n<li>一开始构建出来的界面出现中文乱码，解决：<a href=\"https://blog.csdn.net/qq_45611841/article/details/115832233\">(92条消息) VuePress 的md文件内容显示乱码解决方案_吉尔想放假的博客-CSDN博客</a></li>\n</ul>\n<h3 id=\"1-1-docs-x2F-index-md-中定义首页\"><a href=\"#1-1-docs-x2F-index-md-中定义首页\" class=\"headerlink\" title=\"1.1   docs&#x2F;index.md 中定义首页\"></a>1.1   docs&#x2F;index.md 中定义首页</h3><ul>\n<li><code>VitePress</code> 的布局整体可以分为 4 种：<code>doc</code> 、<code>page</code> 、<code>home</code> 和 没有任何默认布局（空白页面），布局语法：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">需要注意的是，下面的语法一定要写在 md 文档的头部才会生效</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"><span class=\"section\">layout: doc（文档页） | page | home（首页）</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\">// 通过此语法可以将整个页面变成空白页面，适合自定义的布局</span><br><span class=\"line\">&#123;&#123; $formatter.layout &#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>示例：</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">layout: home</span><br><span class=\"line\"></span><br><span class=\"line\">hero:</span><br><span class=\"line\">  name: Cocolib</span><br><span class=\"line\">  text: 我的前端笔记库</span><br><span class=\"line\">  tagline: </span><br><span class=\"line\">  image:</span><br><span class=\"line\"><span class=\"code\">    src: /images/logo.png</span></span><br><span class=\"line\"><span class=\"code\">    alt: 网站的 logo 图片</span></span><br><span class=\"line\"><span class=\"code\">  actions:</span></span><br><span class=\"line\"><span class=\"code\">    - theme: brand</span></span><br><span class=\"line\"><span class=\"code\">      text: 快速开始</span></span><br><span class=\"line\"><span class=\"code\">      link: /guide/what-is-vitepress</span></span><br><span class=\"line\"><span class=\"code\">    - theme: alt</span></span><br><span class=\"line\"><span class=\"code\">      text: 在 github 上查看</span></span><br><span class=\"line\"><span class=\"code\">      link: https://github.com/vuejs/vitepress</span></span><br><span class=\"line\"><span class=\"code\">features:</span></span><br><span class=\"line\"><span class=\"code\">  - icon: ⚡️</span></span><br><span class=\"line\"><span class=\"code\">    title: 这里是功能区 1</span></span><br><span class=\"line\"><span class=\"code\">    details: 这里是功能区 1 详情信息</span></span><br><span class=\"line\"><span class=\"code\">  - icon: 🖖</span></span><br><span class=\"line\"><span class=\"code\">    title: 这里是功能区 2</span></span><br><span class=\"line\"><span class=\"code\">    details: 这里是功能区 2 详情信息</span></span><br><span class=\"line\"><span class=\"code\">  - icon: 🛠️</span></span><br><span class=\"line\"><span class=\"code\">    title: 这里是功能区 3</span></span><br><span class=\"line\"><span class=\"code\">    details: 这里是功能区 3 详情信息</span></span><br><span class=\"line\"><span class=\"code\">---</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br></pre></td></tr></table></figure>\n\n\n\n<img src=\"../images/vitepressNote/2023-05-30_094604.png\" alt=\"2023-05-30_094604\" style=\"zoom:67%;\">\n\n<h3 id=\"1-2-docs-x2F-vitepress-x2F-config-js中配置\"><a href=\"#1-2-docs-x2F-vitepress-x2F-config-js中配置\" class=\"headerlink\" title=\"1.2  docs&#x2F;.vitepress&#x2F;config.js中配置\"></a>1.2  docs&#x2F;.vitepress&#x2F;config.js中配置</h3><ol>\n<li><strong>导航栏：</strong><code>Nav</code> 配置有两种方式，直接点击跳转和下拉菜单样式。</li>\n</ol>\n<ul>\n<li><code>link</code>：当触发点击事件时跳转的地址；可以是外链也可以是项目内的路径。</li>\n<li><code>activeMatch</code>： 需要被高亮的 <code>nav</code> 。</li>\n<li><code>text</code>：显示到页面的信息。</li>\n</ul>\n<ol start=\"2\">\n<li><strong>社交链接</strong>：<code>socialLinks</code></li>\n</ol>\n<ul>\n<li><code>icon</code>：<code>discord</code> <code>facebook</code> <code>github</code> <code>instagram</code> <code>linkedin</code> <code>slack</code> <code>twitter</code> <code>youtube</code> 或者 <code>svg</code> 字符串</li>\n<li><code>link</code>：跳转链接。</li>\n</ul>\n<img src=\"../images/vitepressNote/image-20230530084747612.png\" alt=\"image-20230530084747612\" style=\"zoom:67%;\">\n\n<ol start=\"3\">\n<li><strong>侧边栏导航：</strong><code>Sidebar</code>  同样有两种配置方式</li>\n</ol>\n<ul>\n<li><code>text</code>：侧边栏块的 <code>title</code>。</li>\n<li><code>items</code>：侧边栏的每一项，<code>text</code> 为标题；<code>link</code> 为跳转地址。</li>\n<li><code>collapsible</code>：菜单是否为可折叠的 <code>Boolean</code>。</li>\n<li><code>collapsed</code>：是否默认折叠 <code>Boolean</code> 只有配置 <code>collapsiable</code> 时此配置才会生效。</li>\n</ul>\n<img src=\"../images/vitepressNote/image-20230530084853480.png\" alt=\"image-20230530084853480\" style=\"zoom:67%;\">\n\n<ol start=\"4\">\n<li><strong>静态资源与导航路由的路径书写规则</strong></li>\n</ol>\n<ul>\n<li><p><strong>静态资源</strong>：推荐放入 <code>/docs/public</code> 文件夹中。随后在 <code>md</code> 中使用时以 <code>![image](/images/xxx.png)</code>。 <code>/</code> 以 <code>public</code> 开始。</p>\n</li>\n<li><p><strong>路径配置规则</strong>：以 <code>/docs</code> 为根目录，进行配置；<code>/</code> 以 <code>docs</code> 开始。</p>\n</li>\n</ul>\n<ol start=\"5\">\n<li><strong>上下翻页</strong></li>\n</ol>\n<p>此功能虽是默认提供，也可以通过配置来定制默认的文字。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">docFooter</span>: &#123; <span class=\"attr\">prev</span>: <span class=\"string\">&#x27;上一篇&#x27;</span>, <span class=\"attr\">next</span>: <span class=\"string\">&#x27;下一篇&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li><strong>在 <code>Github</code> 编辑此页</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">editLink</span>: &#123;</span><br><span class=\"line\">     <span class=\"attr\">pattern</span>: <span class=\"string\">&#x27;https://github.com/vuejs/vitepress/edit/main/docs/:path&#x27;</span>,</span><br><span class=\"line\">     <span class=\"attr\">text</span>: <span class=\"string\">&#x27;Edit this page on GitHub&#x27;</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"7\">\n<li><strong>最后更新时间</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">lastUpdated</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\"><span class=\"attr\">themeConfig</span>: &#123;</span><br><span class=\"line\">\t<span class=\"attr\">lastUpdatedText</span>: <span class=\"string\">&quot;最近更新时间&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li><strong>主 <code>title</code> 内容与图片配置</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">title</span>: <span class=\"string\">&#x27;自定义的 title&#x27;</span>,</span><br><span class=\"line\"><span class=\"attr\">themeConfig</span>: &#123;</span><br><span class=\"line\">   <span class=\"attr\">logo</span>: <span class=\"string\">&#x27;/test.jpg&#x27;</span>,</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/../images/vitepressNote/2023-05-30_093958.png\" alt=\"2023-05-30_093958\"></p>\n<ol start=\"9\">\n<li><strong>打包后输出目录的配置</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">outDir</span>: <span class=\"string\">&#x27;../dist&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"10\">\n<li><strong><code>markdown</code> 主题配置</strong></li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">markdown: &#123;             //markdown配置</span><br><span class=\"line\">        theme: &#x27;material-palenight&#x27;,//md主题</span><br><span class=\"line\">        lineNumbers: true//md 加行号</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ol start=\"11\">\n<li><strong><code>description</code> 配置</strong></li>\n</ol>\n<p>会显示页面中 <code>&lt;meta name=&quot;description&quot; content=&quot;xxxx&quot;&gt;</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">description</span>: <span class=\"string\">&#x27;自定义的 description&#x27;</span>,</span><br></pre></td></tr></table></figure>\n\n<ol start=\"12\">\n<li><strong>页脚配置</strong></li>\n</ol>\n<p>页脚通过 <code>footer</code> 进行配置。<strong>如果 <code>Sidebar</code> 存在则页脚不会存在</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">themeConfig: &#123;</span><br><span class=\"line\">    footer: &#123;</span><br><span class=\"line\">      message: &#x27;Released under the MIT License.&#x27;,</span><br><span class=\"line\">      copyright: &#x27;Copyright © 2019-present Evan You&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"13\">\n<li><strong>目录</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">outlineTitle</span>: <span class=\"string\">&#x27;目录&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"14\">\n<li><strong><code>head</code>配置</strong></li>\n</ol>\n<p>这里是给网页配置图标</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">head</span>:[</span><br><span class=\"line\">      [<span class=\"string\">&#x27;link&#x27;</span>, &#123; <span class=\"attr\">rel</span>: <span class=\"string\">&#x27;icon&#x27;</span>, <span class=\"attr\">href</span>: <span class=\"string\">&#x27;/favicon.ico&#x27;</span> &#125;]</span><br><span class=\"line\"> ]</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2、部署到GitHub中\"><a href=\"#2、部署到GitHub中\" class=\"headerlink\" title=\"2、部署到GitHub中\"></a>2、部署到GitHub中</h2><h3 id=\"2-1-一个域名如何部署两个网站（需要宝塔）\"><a href=\"#2-1-一个域名如何部署两个网站（需要宝塔）\" class=\"headerlink\" title=\"2.1 一个域名如何部署两个网站（需要宝塔）\"></a>2.1 一个域名如何部署两个网站（需要宝塔）</h3><p><strong>参考：</strong><a href=\"https://juejin.cn/post/7064024606276845581\">10分钟让你彻底理解如何配置子域名来部署多个项目 - 掘金 (juejin.cn)</a></p>\n<p>因为我的<code>Blog</code>是部署在了<code>github page</code>上，并且绑定了我之前申请的域名，这个网站的话，我也想部署在我的域名里。</p>\n<ol>\n<li><strong>添加CNAME记录</strong></li>\n</ol>\n<p>在域名服务商那里，加一个，把需要配置的子域名指向根域对应的主机名即可。</p>\n<img src=\"../images/vitepressNote/image-20230530105441661.png\" alt=\"image-20230530105441661\" style=\"zoom:67%;\">\n\n<ul>\n<li><strong>什么情况下会用到CNAME记录？</strong></li>\n</ul>\n<p>如果需要将域名指向另一个域名，再由另一个域名提供ip地址，就需要添加CNAME记录<br>最常用到CNAME的情况包括：<strong>做CDN，配置子域名</strong></p>\n<ul>\n<li><strong>点击添加记录</strong></li>\n</ul>\n<p><strong>记录类型：</strong>选择 <code>CNAME</code></p>\n<p><strong>主机记录：</strong>填子域名（比如需要添加 myblog.zhangjiancong.top的解析，只需要在主机记录处填写 myblog 即可；如果添加 zhangjiancong.top的解析 的解析，主机记录直接留空，系统会自动填一个“@”到输入框内）。</p>\n<p><strong>解析线路：</strong>默认即可（如果不选默认会导致部分特定用户无法解析；在上图中的作用为：除了联通用户之外的所有用户都可正常解析）</p>\n<p><strong>记录值：</strong>CNAME 指向的域名，只可以填写域名，记录生成后会自动在域名后面补一个“.”，这是正常现象</p>\n<p><strong>TTL：</strong>添加时系统会自动生成，默认为600秒（TTL为缓存时间，数值越小，修改记录各地生效时间越快）。</p>\n<p><strong>……后来发现需要宝塔，我就没用了</strong></p>\n<h3 id=\"2-2-如何拥有多个GitHub-Pages\"><a href=\"#2-2-如何拥有多个GitHub-Pages\" class=\"headerlink\" title=\"2.2 如何拥有多个GitHub Pages\"></a>2.2 如何拥有多个GitHub Pages</h3><p><strong>参考：</strong><a href=\"https://zhuanlan.zhihu.com/p/183977963\">如何拥有多个GitHub Pages - 知乎 (zhihu.com)</a></p>\n<p><strong>官方文档：</strong><a href=\"https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages\">关于 GitHub Pages - GitHub 文档</a></p>\n<p>有三种类型的 GitHub Pages 站点：<strong>项目</strong>、<strong>用户</strong>和<strong>组织</strong>。 项目站点连接到 GitHub 上托管的特定项目。 用户和组织站点连接到特定的 GitHub 帐户。</p>\n<ul>\n<li><p>要发布用户站点，必须创建名为 <code>&lt;user&gt;.github.io</code> 的用户帐户所拥有的仓库。 </p>\n</li>\n<li><p>要发布组织站点，必须创建名为 <code>&lt;organization&gt;.github.io</code> 的组织所拥有的仓库。</p>\n</li>\n<li><p>除非您使用自定义域，否则用户和组织站点位于 <code>http(s)://&lt;username&gt;.github.io</code> 或 <code>http(s)://&lt;organization&gt;.github.io</code>。</p>\n</li>\n<li><p>项目站点的源文件与其项目存储在同一个仓库中。 除非您使用自定义域，否则项目站点位于 <code>http(s)://&lt;user&gt;.github.io/&lt;repository&gt;</code> 或 <code>http(s)://&lt;organization&gt;.github.io/&lt;repository&gt;</code>。</p>\n</li>\n</ul>\n<p>您只能为每个 GitHub 帐户创建一个用户或组织站点。 项目站点（无论是组织还是用户帐户拥有）没有限制。</p>\n<ol>\n<li>新建一个仓库，名字随意，我这里是publish的，不知道private行不行</li>\n<li>进入仓库主页，点击<code>Settings</code>，点击<code>Pages</code></li>\n</ol>\n<img src=\"../images/vitepressNote/2023-05-30_135506.png\" alt=\"2023-05-30_135506\" style=\"zoom:33%;\">\n\n<ol start=\"3\">\n<li>选一个分支，保存</li>\n</ol>\n<img src=\"../images/vitepressNote/image-20230530135914934.png\" alt=\"image-20230530135914934\" style=\"zoom:50%;\">\n\n<ol start=\"4\">\n<li>等待页面加载，会出现一个<code>Custom domain</code>，填入之前在域名商中注册过的<strong>子域名</strong></li>\n</ol>\n<img src=\"../images/vitepressNote/image-20230530140144181.png\" alt=\"image-20230530140144181\" style=\"zoom:50%;\">\n\n<img src=\"../images/vitepressNote/image-20230530140358622.png\" alt=\"image-20230530140358622\" style=\"zoom:46%;\">\n\n\n\n<h3 id=\"2-3-部署vitepress到GitHub上\"><a href=\"#2-3-部署vitepress到GitHub上\" class=\"headerlink\" title=\"2.3 部署vitepress到GitHub上\"></a>2.3 部署vitepress到GitHub上</h3><ol>\n<li>根目录新建 <code>deploy.sh</code> 文件。并复制以下内容稍微修改。</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/env sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 确保脚本抛出遇到的错误</span></span><br><span class=\"line\"><span class=\"comment\"># set -e\t\t添加这句报错！！！！！！！！！！</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除文件需要根据实际打包的目录进行删除</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf docs/.vitepress/dist/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 生成静态文件</span></span><br><span class=\"line\">yarn docs:build</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入生成的文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> docs/.vitepress/dist</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果是发布到自定义域名</span></span><br><span class=\"line\"><span class=\"comment\"># echo &#x27;www.example.com&#x27; &gt; CNAME</span></span><br><span class=\"line\"></span><br><span class=\"line\">git init</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&#x27;deploy&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果发布到 https://&lt;USERNAME&gt;.github.io 修改仓库地址</span></span><br><span class=\"line\"><span class=\"comment\"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git main:master  #注意这里我的默认分支是：main，要推送到master分支去</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> -</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><strong>复制代码到<code>config.js</code>，注意 <code>Repository name</code> 和本地的 <code>base</code> 配置相同</strong>（后来删掉了，因为这样会让页面没有CCS样式）</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">base</span>: <span class=\"string\">&#x27;/your-github-repository/&#x27;</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><code>package.json</code> 中新增脚本并执行，等个三两分钟直接访问 <code>https://your-github.github.io/your-github-repository/</code>。</li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">json复制代码<span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;deploy&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bash deploy.sh&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>如果遇到异常 参考 <a href=\"https://juejin.cn/post/7064746265266880549#heading-18\">VuePress 搭建组件库文档</a> <a href=\"https://link.juejin.cn/?target=https://vuepress.vuejs.org/zh/guide/deploy.html\">VuePress 部署</a></p>\n<ol start=\"3\">\n<li><code>yarn docs:build </code>构建项目</li>\n<li>我在VScode的终端操作总是报各种各样的错，只能在项目的根目录<code>git bash here</code> ，然后输入<code> bash deploy.sh</code></li>\n</ol>\n<p><strong>上线成功！！</strong></p>\n","site":{"data":{"creativity":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}},"cover":"/img/default_cover.jpg","excerpt":"","more":"<h1 id=\"vitepress构建我的笔记页面\"><a href=\"#vitepress构建我的笔记页面\" class=\"headerlink\" title=\"vitepress构建我的笔记页面\"></a>vitepress构建我的笔记页面</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><ul>\n<li><strong>为什么用vitepress而不是vuepress</strong>：vitepress基于vite构建项目，vuepress基于webpack，vitepress更快。</li>\n<li><strong>为什么用yarn而不是npm</strong>：官网用的yarn，而且yarn更快</li>\n</ul>\n<h2 id=\"1、初始化\"><a href=\"#1、初始化\" class=\"headerlink\" title=\"1、初始化\"></a>1、初始化</h2><p><strong>参考：</strong><a href=\"https://juejin.cn/post/7164276166084263972#heading-15\">VitePress 手把手完全使用手册 - 掘金 (juejin.cn)</a></p>\n<p><strong>参考：</strong><a href=\"https://zhuanlan.zhihu.com/p/605300455\">十分钟用vitepress搭建项目文档 - 知乎 (zhihu.com)</a></p>\n<p><strong>官方文档</strong>：<a href=\"https://vitepress.dev/guide/using-vue\">Using Vue in Markdown | VitePress</a></p>\n<ul>\n<li>一开始构建出来的界面出现中文乱码，解决：<a href=\"https://blog.csdn.net/qq_45611841/article/details/115832233\">(92条消息) VuePress 的md文件内容显示乱码解决方案_吉尔想放假的博客-CSDN博客</a></li>\n</ul>\n<h3 id=\"1-1-docs-x2F-index-md-中定义首页\"><a href=\"#1-1-docs-x2F-index-md-中定义首页\" class=\"headerlink\" title=\"1.1   docs&#x2F;index.md 中定义首页\"></a>1.1   docs&#x2F;index.md 中定义首页</h3><ul>\n<li><code>VitePress</code> 的布局整体可以分为 4 种：<code>doc</code> 、<code>page</code> 、<code>home</code> 和 没有任何默认布局（空白页面），布局语法：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">需要注意的是，下面的语法一定要写在 md 文档的头部才会生效</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"><span class=\"section\">layout: doc（文档页） | page | home（首页）</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\">// 通过此语法可以将整个页面变成空白页面，适合自定义的布局</span><br><span class=\"line\">&#123;&#123; $formatter.layout &#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>示例：</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">layout: home</span><br><span class=\"line\"></span><br><span class=\"line\">hero:</span><br><span class=\"line\">  name: Cocolib</span><br><span class=\"line\">  text: 我的前端笔记库</span><br><span class=\"line\">  tagline: </span><br><span class=\"line\">  image:</span><br><span class=\"line\"><span class=\"code\">    src: /images/logo.png</span></span><br><span class=\"line\"><span class=\"code\">    alt: 网站的 logo 图片</span></span><br><span class=\"line\"><span class=\"code\">  actions:</span></span><br><span class=\"line\"><span class=\"code\">    - theme: brand</span></span><br><span class=\"line\"><span class=\"code\">      text: 快速开始</span></span><br><span class=\"line\"><span class=\"code\">      link: /guide/what-is-vitepress</span></span><br><span class=\"line\"><span class=\"code\">    - theme: alt</span></span><br><span class=\"line\"><span class=\"code\">      text: 在 github 上查看</span></span><br><span class=\"line\"><span class=\"code\">      link: https://github.com/vuejs/vitepress</span></span><br><span class=\"line\"><span class=\"code\">features:</span></span><br><span class=\"line\"><span class=\"code\">  - icon: ⚡️</span></span><br><span class=\"line\"><span class=\"code\">    title: 这里是功能区 1</span></span><br><span class=\"line\"><span class=\"code\">    details: 这里是功能区 1 详情信息</span></span><br><span class=\"line\"><span class=\"code\">  - icon: 🖖</span></span><br><span class=\"line\"><span class=\"code\">    title: 这里是功能区 2</span></span><br><span class=\"line\"><span class=\"code\">    details: 这里是功能区 2 详情信息</span></span><br><span class=\"line\"><span class=\"code\">  - icon: 🛠️</span></span><br><span class=\"line\"><span class=\"code\">    title: 这里是功能区 3</span></span><br><span class=\"line\"><span class=\"code\">    details: 这里是功能区 3 详情信息</span></span><br><span class=\"line\"><span class=\"code\">---</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br></pre></td></tr></table></figure>\n\n\n\n<img src=\"../images/vitepressNote/2023-05-30_094604.png\" alt=\"2023-05-30_094604\" style=\"zoom:67%;\">\n\n<h3 id=\"1-2-docs-x2F-vitepress-x2F-config-js中配置\"><a href=\"#1-2-docs-x2F-vitepress-x2F-config-js中配置\" class=\"headerlink\" title=\"1.2  docs&#x2F;.vitepress&#x2F;config.js中配置\"></a>1.2  docs&#x2F;.vitepress&#x2F;config.js中配置</h3><ol>\n<li><strong>导航栏：</strong><code>Nav</code> 配置有两种方式，直接点击跳转和下拉菜单样式。</li>\n</ol>\n<ul>\n<li><code>link</code>：当触发点击事件时跳转的地址；可以是外链也可以是项目内的路径。</li>\n<li><code>activeMatch</code>： 需要被高亮的 <code>nav</code> 。</li>\n<li><code>text</code>：显示到页面的信息。</li>\n</ul>\n<ol start=\"2\">\n<li><strong>社交链接</strong>：<code>socialLinks</code></li>\n</ol>\n<ul>\n<li><code>icon</code>：<code>discord</code> <code>facebook</code> <code>github</code> <code>instagram</code> <code>linkedin</code> <code>slack</code> <code>twitter</code> <code>youtube</code> 或者 <code>svg</code> 字符串</li>\n<li><code>link</code>：跳转链接。</li>\n</ul>\n<img src=\"../images/vitepressNote/image-20230530084747612.png\" alt=\"image-20230530084747612\" style=\"zoom:67%;\">\n\n<ol start=\"3\">\n<li><strong>侧边栏导航：</strong><code>Sidebar</code>  同样有两种配置方式</li>\n</ol>\n<ul>\n<li><code>text</code>：侧边栏块的 <code>title</code>。</li>\n<li><code>items</code>：侧边栏的每一项，<code>text</code> 为标题；<code>link</code> 为跳转地址。</li>\n<li><code>collapsible</code>：菜单是否为可折叠的 <code>Boolean</code>。</li>\n<li><code>collapsed</code>：是否默认折叠 <code>Boolean</code> 只有配置 <code>collapsiable</code> 时此配置才会生效。</li>\n</ul>\n<img src=\"../images/vitepressNote/image-20230530084853480.png\" alt=\"image-20230530084853480\" style=\"zoom:67%;\">\n\n<ol start=\"4\">\n<li><strong>静态资源与导航路由的路径书写规则</strong></li>\n</ol>\n<ul>\n<li><p><strong>静态资源</strong>：推荐放入 <code>/docs/public</code> 文件夹中。随后在 <code>md</code> 中使用时以 <code>![image](/images/xxx.png)</code>。 <code>/</code> 以 <code>public</code> 开始。</p>\n</li>\n<li><p><strong>路径配置规则</strong>：以 <code>/docs</code> 为根目录，进行配置；<code>/</code> 以 <code>docs</code> 开始。</p>\n</li>\n</ul>\n<ol start=\"5\">\n<li><strong>上下翻页</strong></li>\n</ol>\n<p>此功能虽是默认提供，也可以通过配置来定制默认的文字。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">docFooter</span>: &#123; <span class=\"attr\">prev</span>: <span class=\"string\">&#x27;上一篇&#x27;</span>, <span class=\"attr\">next</span>: <span class=\"string\">&#x27;下一篇&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li><strong>在 <code>Github</code> 编辑此页</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">editLink</span>: &#123;</span><br><span class=\"line\">     <span class=\"attr\">pattern</span>: <span class=\"string\">&#x27;https://github.com/vuejs/vitepress/edit/main/docs/:path&#x27;</span>,</span><br><span class=\"line\">     <span class=\"attr\">text</span>: <span class=\"string\">&#x27;Edit this page on GitHub&#x27;</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"7\">\n<li><strong>最后更新时间</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">lastUpdated</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\"><span class=\"attr\">themeConfig</span>: &#123;</span><br><span class=\"line\">\t<span class=\"attr\">lastUpdatedText</span>: <span class=\"string\">&quot;最近更新时间&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li><strong>主 <code>title</code> 内容与图片配置</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">title</span>: <span class=\"string\">&#x27;自定义的 title&#x27;</span>,</span><br><span class=\"line\"><span class=\"attr\">themeConfig</span>: &#123;</span><br><span class=\"line\">   <span class=\"attr\">logo</span>: <span class=\"string\">&#x27;/test.jpg&#x27;</span>,</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/../images/vitepressNote/2023-05-30_093958.png\" alt=\"2023-05-30_093958\"></p>\n<ol start=\"9\">\n<li><strong>打包后输出目录的配置</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">outDir</span>: <span class=\"string\">&#x27;../dist&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"10\">\n<li><strong><code>markdown</code> 主题配置</strong></li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">markdown: &#123;             //markdown配置</span><br><span class=\"line\">        theme: &#x27;material-palenight&#x27;,//md主题</span><br><span class=\"line\">        lineNumbers: true//md 加行号</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ol start=\"11\">\n<li><strong><code>description</code> 配置</strong></li>\n</ol>\n<p>会显示页面中 <code>&lt;meta name=&quot;description&quot; content=&quot;xxxx&quot;&gt;</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">description</span>: <span class=\"string\">&#x27;自定义的 description&#x27;</span>,</span><br></pre></td></tr></table></figure>\n\n<ol start=\"12\">\n<li><strong>页脚配置</strong></li>\n</ol>\n<p>页脚通过 <code>footer</code> 进行配置。<strong>如果 <code>Sidebar</code> 存在则页脚不会存在</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">themeConfig: &#123;</span><br><span class=\"line\">    footer: &#123;</span><br><span class=\"line\">      message: &#x27;Released under the MIT License.&#x27;,</span><br><span class=\"line\">      copyright: &#x27;Copyright © 2019-present Evan You&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"13\">\n<li><strong>目录</strong></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">outlineTitle</span>: <span class=\"string\">&#x27;目录&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"14\">\n<li><strong><code>head</code>配置</strong></li>\n</ol>\n<p>这里是给网页配置图标</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">head</span>:[</span><br><span class=\"line\">      [<span class=\"string\">&#x27;link&#x27;</span>, &#123; <span class=\"attr\">rel</span>: <span class=\"string\">&#x27;icon&#x27;</span>, <span class=\"attr\">href</span>: <span class=\"string\">&#x27;/favicon.ico&#x27;</span> &#125;]</span><br><span class=\"line\"> ]</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2、部署到GitHub中\"><a href=\"#2、部署到GitHub中\" class=\"headerlink\" title=\"2、部署到GitHub中\"></a>2、部署到GitHub中</h2><h3 id=\"2-1-一个域名如何部署两个网站（需要宝塔）\"><a href=\"#2-1-一个域名如何部署两个网站（需要宝塔）\" class=\"headerlink\" title=\"2.1 一个域名如何部署两个网站（需要宝塔）\"></a>2.1 一个域名如何部署两个网站（需要宝塔）</h3><p><strong>参考：</strong><a href=\"https://juejin.cn/post/7064024606276845581\">10分钟让你彻底理解如何配置子域名来部署多个项目 - 掘金 (juejin.cn)</a></p>\n<p>因为我的<code>Blog</code>是部署在了<code>github page</code>上，并且绑定了我之前申请的域名，这个网站的话，我也想部署在我的域名里。</p>\n<ol>\n<li><strong>添加CNAME记录</strong></li>\n</ol>\n<p>在域名服务商那里，加一个，把需要配置的子域名指向根域对应的主机名即可。</p>\n<img src=\"../images/vitepressNote/image-20230530105441661.png\" alt=\"image-20230530105441661\" style=\"zoom:67%;\">\n\n<ul>\n<li><strong>什么情况下会用到CNAME记录？</strong></li>\n</ul>\n<p>如果需要将域名指向另一个域名，再由另一个域名提供ip地址，就需要添加CNAME记录<br>最常用到CNAME的情况包括：<strong>做CDN，配置子域名</strong></p>\n<ul>\n<li><strong>点击添加记录</strong></li>\n</ul>\n<p><strong>记录类型：</strong>选择 <code>CNAME</code></p>\n<p><strong>主机记录：</strong>填子域名（比如需要添加 myblog.zhangjiancong.top的解析，只需要在主机记录处填写 myblog 即可；如果添加 zhangjiancong.top的解析 的解析，主机记录直接留空，系统会自动填一个“@”到输入框内）。</p>\n<p><strong>解析线路：</strong>默认即可（如果不选默认会导致部分特定用户无法解析；在上图中的作用为：除了联通用户之外的所有用户都可正常解析）</p>\n<p><strong>记录值：</strong>CNAME 指向的域名，只可以填写域名，记录生成后会自动在域名后面补一个“.”，这是正常现象</p>\n<p><strong>TTL：</strong>添加时系统会自动生成，默认为600秒（TTL为缓存时间，数值越小，修改记录各地生效时间越快）。</p>\n<p><strong>……后来发现需要宝塔，我就没用了</strong></p>\n<h3 id=\"2-2-如何拥有多个GitHub-Pages\"><a href=\"#2-2-如何拥有多个GitHub-Pages\" class=\"headerlink\" title=\"2.2 如何拥有多个GitHub Pages\"></a>2.2 如何拥有多个GitHub Pages</h3><p><strong>参考：</strong><a href=\"https://zhuanlan.zhihu.com/p/183977963\">如何拥有多个GitHub Pages - 知乎 (zhihu.com)</a></p>\n<p><strong>官方文档：</strong><a href=\"https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages\">关于 GitHub Pages - GitHub 文档</a></p>\n<p>有三种类型的 GitHub Pages 站点：<strong>项目</strong>、<strong>用户</strong>和<strong>组织</strong>。 项目站点连接到 GitHub 上托管的特定项目。 用户和组织站点连接到特定的 GitHub 帐户。</p>\n<ul>\n<li><p>要发布用户站点，必须创建名为 <code>&lt;user&gt;.github.io</code> 的用户帐户所拥有的仓库。 </p>\n</li>\n<li><p>要发布组织站点，必须创建名为 <code>&lt;organization&gt;.github.io</code> 的组织所拥有的仓库。</p>\n</li>\n<li><p>除非您使用自定义域，否则用户和组织站点位于 <code>http(s)://&lt;username&gt;.github.io</code> 或 <code>http(s)://&lt;organization&gt;.github.io</code>。</p>\n</li>\n<li><p>项目站点的源文件与其项目存储在同一个仓库中。 除非您使用自定义域，否则项目站点位于 <code>http(s)://&lt;user&gt;.github.io/&lt;repository&gt;</code> 或 <code>http(s)://&lt;organization&gt;.github.io/&lt;repository&gt;</code>。</p>\n</li>\n</ul>\n<p>您只能为每个 GitHub 帐户创建一个用户或组织站点。 项目站点（无论是组织还是用户帐户拥有）没有限制。</p>\n<ol>\n<li>新建一个仓库，名字随意，我这里是publish的，不知道private行不行</li>\n<li>进入仓库主页，点击<code>Settings</code>，点击<code>Pages</code></li>\n</ol>\n<img src=\"../images/vitepressNote/2023-05-30_135506.png\" alt=\"2023-05-30_135506\" style=\"zoom:33%;\">\n\n<ol start=\"3\">\n<li>选一个分支，保存</li>\n</ol>\n<img src=\"../images/vitepressNote/image-20230530135914934.png\" alt=\"image-20230530135914934\" style=\"zoom:50%;\">\n\n<ol start=\"4\">\n<li>等待页面加载，会出现一个<code>Custom domain</code>，填入之前在域名商中注册过的<strong>子域名</strong></li>\n</ol>\n<img src=\"../images/vitepressNote/image-20230530140144181.png\" alt=\"image-20230530140144181\" style=\"zoom:50%;\">\n\n<img src=\"../images/vitepressNote/image-20230530140358622.png\" alt=\"image-20230530140358622\" style=\"zoom:46%;\">\n\n\n\n<h3 id=\"2-3-部署vitepress到GitHub上\"><a href=\"#2-3-部署vitepress到GitHub上\" class=\"headerlink\" title=\"2.3 部署vitepress到GitHub上\"></a>2.3 部署vitepress到GitHub上</h3><ol>\n<li>根目录新建 <code>deploy.sh</code> 文件。并复制以下内容稍微修改。</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/env sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 确保脚本抛出遇到的错误</span></span><br><span class=\"line\"><span class=\"comment\"># set -e\t\t添加这句报错！！！！！！！！！！</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除文件需要根据实际打包的目录进行删除</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf docs/.vitepress/dist/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 生成静态文件</span></span><br><span class=\"line\">yarn docs:build</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入生成的文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> docs/.vitepress/dist</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果是发布到自定义域名</span></span><br><span class=\"line\"><span class=\"comment\"># echo &#x27;www.example.com&#x27; &gt; CNAME</span></span><br><span class=\"line\"></span><br><span class=\"line\">git init</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git commit -m <span class=\"string\">&#x27;deploy&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果发布到 https://&lt;USERNAME&gt;.github.io 修改仓库地址</span></span><br><span class=\"line\"><span class=\"comment\"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git main:master  #注意这里我的默认分支是：main，要推送到master分支去</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> -</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><strong>复制代码到<code>config.js</code>，注意 <code>Repository name</code> 和本地的 <code>base</code> 配置相同</strong>（后来删掉了，因为这样会让页面没有CCS样式）</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">base</span>: <span class=\"string\">&#x27;/your-github-repository/&#x27;</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><code>package.json</code> 中新增脚本并执行，等个三两分钟直接访问 <code>https://your-github.github.io/your-github-repository/</code>。</li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">json复制代码<span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;deploy&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bash deploy.sh&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>如果遇到异常 参考 <a href=\"https://juejin.cn/post/7064746265266880549#heading-18\">VuePress 搭建组件库文档</a> <a href=\"https://link.juejin.cn/?target=https://vuepress.vuejs.org/zh/guide/deploy.html\">VuePress 部署</a></p>\n<ol start=\"3\">\n<li><code>yarn docs:build </code>构建项目</li>\n<li>我在VScode的终端操作总是报各种各样的错，只能在项目的根目录<code>git bash here</code> ，然后输入<code> bash deploy.sh</code></li>\n</ol>\n<p><strong>上线成功！！</strong></p>\n"}],"PostAsset":[{"_id":"source/_posts/TreasureinLife/mycover.png","slug":"mycover.png","post":"clj5sc4770001f4ssgnu00b80","modified":0,"renderable":0},{"_id":"source/_posts/dumiNote/mycover.png","slug":"mycover.png","post":"clj5sc47g0006f4ss5g0p7w35","modified":0,"renderable":0},{"_id":"source/_posts/100things/mycover.jpg","slug":"mycover.jpg","post":"clj5sc47c0003f4ss28ho23tn","modified":0,"renderable":0},{"_id":"source/_posts/GitNote/mycover.jpg","slug":"mycover.jpg","post":"clj5sc47h0007f4ss0w5pbiho","modified":0,"renderable":0},{"_id":"source/_posts/CardSpending/mycover.png","slug":"mycover.png","post":"clj5sc47o000if4ssfe5qe9gd","modified":0,"renderable":0},{"_id":"source/_posts/WeatherBroadcast/mycover.png","slug":"mycover.png","post":"clj5sc47p000jf4ssfchpdzbf","modified":0,"renderable":0},{"_id":"source/_posts/myNFC/mycover.jpg","slug":"mycover.jpg","post":"clj5sc47q000lf4ss0rk3aadb","modified":0,"renderable":0},{"_id":"source/_posts/hexoConfigNote/mybackground.jpg","slug":"mybackground.jpg","post":"clj5sc47q000mf4ss0jaq9m8r","modified":0,"renderable":0},{"_id":"source/_posts/hexoConfigNote/mycover.png","slug":"mycover.png","post":"clj5sc47q000mf4ss0jaq9m8r","modified":0,"renderable":0},{"_id":"source/_posts/hexoConfigNote/mytop_img.png","slug":"mytop_img.png","post":"clj5sc47q000mf4ss0jaq9m8r","modified":0,"renderable":0}],"PostCategory":[{"post_id":"clj5sc4770001f4ssgnu00b80","category_id":"clj5sc47e0004f4ssc2ysb3wt","_id":"clj5sc47l000bf4ssg39t0du6"},{"post_id":"clj5sc47c0003f4ss28ho23tn","category_id":"clj5sc47e0004f4ssc2ysb3wt","_id":"clj5sc47l000ef4ssdrya4uai"}],"PostTag":[{"post_id":"clj5sc4770001f4ssgnu00b80","tag_id":"clj5sc47f0005f4ssev081ify","_id":"clj5sc47k000af4ss7bf7cy27"},{"post_id":"clj5sc47c0003f4ss28ho23tn","tag_id":"clj5sc47f0005f4ssev081ify","_id":"clj5sc47l000df4ssh8bs85rr"},{"post_id":"clj5sc47g0006f4ss5g0p7w35","tag_id":"clj5sc47l000cf4ssar0sama0","_id":"clj5sc47m000gf4ss2nnm6rzk"},{"post_id":"clj5sc47h0007f4ss0w5pbiho","tag_id":"clj5sc47m000ff4sshhaa4a1t","_id":"clj5sc47m000hf4sse2iabdik"},{"post_id":"clj5sc47o000if4ssfe5qe9gd","tag_id":"clj5sc47p000kf4ss3e9jgfhh","_id":"clj5sc47s000pf4ss53vodk44"},{"post_id":"clj5sc47p000jf4ssfchpdzbf","tag_id":"clj5sc47p000kf4ss3e9jgfhh","_id":"clj5sc47t000rf4ss8gew9qvc"},{"post_id":"clj5sc47q000lf4ss0rk3aadb","tag_id":"clj5sc47p000kf4ss3e9jgfhh","_id":"clj5sc47u000tf4ss9csz8m75"},{"post_id":"clj5sc47q000mf4ss0jaq9m8r","tag_id":"clj5sc47t000sf4ss6eoq4jmq","_id":"clj5sc47u000vf4ssdsmv89hp"},{"post_id":"clj5sc47r000nf4ss7z1kcwp4","tag_id":"clj5sc47u000uf4ss3qc06p0w","_id":"clj5sc47u000wf4ss3pcdc43s"}],"Tag":[{"name":"life","_id":"clj5sc47f0005f4ssev081ify"},{"name":"前端工程化 react","_id":"clj5sc47l000cf4ssar0sama0"},{"name":"Git","_id":"clj5sc47m000ff4sshhaa4a1t"},{"name":"Android APP","_id":"clj5sc47p000kf4ss3e9jgfhh"},{"name":"config","_id":"clj5sc47t000sf4ss6eoq4jmq"},{"name":"vitepress","_id":"clj5sc47u000uf4ss3qc06p0w"}]}}